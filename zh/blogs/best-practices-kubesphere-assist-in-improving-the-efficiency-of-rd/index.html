<!doctype html><html lang=en-US><head><meta charset=utf-8><title>KubeSphere 助力提升研发效能的应用实践分享</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="我司从 2022 年 6 月开始使用 KubeSphere，到目前为止快一年时间，简要记录下此过程中的经验积累，供大家参考。"><meta name=keywords content="Kubernetes,KubeSphere,容器化,最佳实践"><meta property="og:type" content="article"><meta property="og:title" content="KubeSphere 助力提升研发效能的应用实践分享"><meta property="og:description" content="我司从 2022 年 6 月开始使用 KubeSphere，到目前为止快一年时间，简要记录下此过程中的经验积累，供大家参考。"><meta property="og:image" content="https://pek3b.qingstor.com/kubesphere-community/images/share-kubepshere-using-experience-for-current-company.png"><meta property="og:url" content="https://openksc.github.io/zh/blogs/best-practices-kubesphere-assist-in-improving-the-efficiency-of-rd/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@KubeSphere"><meta property="twitter:image" content="https://pek3b.qingstor.com/kubesphere-community/images/share-kubepshere-using-experience-for-current-company.png"><meta name=docsearch:language content="zh-CN"><meta name=docsearch:version content><link rel=canonical href=https://kubesphere.io/zh/blogs/best-practices-kubesphere-assist-in-improving-the-efficiency-of-rd/><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=apple-touch-icon href=/images/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/svg+xml href=/images/favicons/favicon.svg><link rel=icon type=image/png href=/images/favicons/favicon.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#00ad6e><meta name=msapplication-config content='/images/favicons/browserconfig.xml'><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=/fonts/Roboto/stylesheet.css><link rel=stylesheet href=/fonts/ProximaNova/stylesheet.css><link rel=stylesheet href=/css/jquery.modal.min.css><link rel=stylesheet href=/css/viewer.min.css><link rel=stylesheet href=/swiper/swiper-bundle.min.css><link rel=stylesheet href=/scss/common.min.0c3fdcc05ec210321169846714f74b11c4a1baf09a1833fa9273b2347c81e636.css><script src=/js/jquery-3.7.1.min.js></script><script src=/js/viewer.min.js></script><script src=/js/jquery.modal.min.js></script><script src=/swiper/swiper-bundle.min.js></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?0888981f1fa45d241b1fb6962da2963e",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-YYCVN36HT5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YYCVN36HT5")</script><script type=text/javascript>!function(e,t,n,s,o){e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=("https:"==document.location.protocol?"https://":"http://")+s,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio"),gio("init","8a24ae300cbf8b8c",{}),gio("send")</script><link rel=stylesheet href=/scss/content.min.f73b326fbf8c5bd331900b0de21c7dde608a4926f482f6465f9ae1d9049b83ad.css><link rel=stylesheet href=/scss/markdown.min.db47186481122431dffae72d17dbbd51f90b66f022cc163458645709924e4eac.css></head><body><header class=navigation><div class=join-div><div class=content>🚀 KubeSphere v4.1.3 发布，多项优化与改进，欢迎体验！<a href=/zh/docs/v4.1/20-release-notes/release-v413/ target=_blank rel="noopener noreferrer">请查看 Release notes →</a>
<img id=close-join src=/images/header/close.svg alt=close></div></div><div class=common-layout><div class=header-container><a href=/zh/ aria-label=logo><img src=/images/header/logo.svg alt class=logo></a><ul class=nav><li class=menu-li><span class=menu-span>应用场景</span><ul class="dropdown-menu menu-2"><li><a href=/zh/devops/>拥抱一站式 DevOps 工作流</a></li><li><a href=/zh/service-mesh/>在 Kubernetes 运行微服务</a></li><li><a href=/zh/observability/>构建丰富的云原生可观测性</a></li></ul></li><li class=menu-li><span class=menu-span>资源</span><ul class="dropdown-menu menu-3"><li><a href=/zh/projects/>开源项目</a></li><li><a href=/zh/conferences/>开源峰会</a></li><li><a href=/zh/blogs/>技术博客</a></li><li><a href=/zh/videos/>视频资源</a></li><li><a href=/zh/learn/>云原生实战</a></li></ul></li><li class=menu-li><span class=menu-span>文档中心</span><ul class="dropdown-menu menu-4"><li><a href=/zh/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/zh/docs/v3.4>v3.4</a></li><li><a href=/zh/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/zh/ target=_blank rel="noopener noreferrer">扩展组件开发</a></li><li><a href=https://kube.design/ target=_blank rel="noopener noreferrer">Kube Design</a></li></ul></li><li class=menu-li><span class=menu-span>开源社区</span><ul class="dropdown-menu menu-5"><li><a href=/zh/contribution/>参与贡献</a></li><li><a href=/zh/live/>社区活动</a></li><li><a href=/zh/case/>案例学习</a></li><li><a href=/zh/partner/>合作伙伴</a></li><li><a href=/zh/user-group/>用户委员会</a></li><li><a href=/zh/news/>动态</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md target=_blank rel="noopener noreferrer">版本计划</a></li><li><a href=https://www.kubesphere.io/zh/ target=_blank rel="noopener noreferrer">中国站</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025 target=_blank rel="noopener noreferrer">开源之夏 2025</a></li></ul></li><li><a data-docs=用户论坛 href=https://ask.kubesphere.io/forum target=_blank rel="noopener noreferrer">用户论坛</a></li><li><a data-docs=认证 href=https://kubesphere.cloud/certification/ target=_blank rel="noopener noreferrer">认证</a></li></ul><div class=right-menu><ul><li class=language-menu><div><img src=/images/header/black.svg alt>
<span>简体中文</span></div><ul class=dropdown-menu><li onclick='handleLangClick("zh","/zh/blogs/best-practices-kubesphere-assist-in-improving-the-efficiency-of-rd/")'>简体中文</li></ul></li><li class=github-li><div class=github-star><a class=star-btn href=https://github.com/kubesphere/kubesphere rel="noopener noreferrer" target=_blank><span class=star-img></span>&nbsp;<span>Star</span>
</a><a class=social-count href=https://github.com/kubesphere/kubesphere/stargazers rel="noopener noreferrer" target=_blank></a></div></li><li class=menu-icon><img src=/images/header/menu.svg alt></li></ul></div></div></div><div id=modal-for-menu class=modal><ul class=nav><li data-check=0 class=menu-li><span class=menu-span>应用场景</span><ul class=dropdown-menu><li><a href=/zh/devops/>拥抱一站式 DevOps 工作流</a></li><li><a href=/zh/service-mesh/>在 Kubernetes 运行微服务</a></li><li><a href=/zh/observability/>构建丰富的云原生可观测性</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>资源</span><ul class=dropdown-menu><li><a href=/zh/projects/>开源项目</a></li><li><a href=/zh/conferences/>开源峰会</a></li><li><a href=/zh/blogs/>技术博客</a></li><li><a href=/zh/videos/>视频资源</a></li><li><a href=/zh/learn/>云原生实战</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>文档中心</span><ul class=dropdown-menu><li><a href=/zh/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/zh/docs/v3.4>v3.4</a></li><li><a href=/zh/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/zh/>扩展组件开发</a></li><li><a href=https://kube.design/>Kube Design</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>开源社区</span><ul class=dropdown-menu><li><a href=/zh/contribution/>参与贡献</a></li><li><a href=/zh/live/>社区活动</a></li><li><a href=/zh/case/>案例学习</a></li><li><a href=/zh/partner/>合作伙伴</a></li><li><a href=/zh/user-group/>用户委员会</a></li><li><a href=/zh/news/>动态</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md>版本计划</a></li><li><a href=https://www.kubesphere.io/zh/>中国站</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025>开源之夏 2025</a></li></ul></li><li><a data-docs=用户论坛 href=https://ask.kubesphere.io/forum>用户论坛</a></li><li><a data-docs=认证 href=https://kubesphere.cloud/certification/>认证</a></li></ul><div class=link-div><a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank rel="noopener noreferrer" aria-label=slack><img src=/images/header/slack-hover.svg alt>
</a><a href=https://x.com/KubeSphere target=_blank rel="noopener noreferrer" aria-label=twitter><img src=/images/header/twitter-hover.svg alt>
</a><a href=https://github.com/kubesphere/kubesphere target=_blank rel="noopener noreferrer" aria-label=github><img src=/images/header/github-hover.svg alt></a></div></div></header><script>var bindNavMouseEvent,bindScrollChangeHeader,bindClickShowMenu,bindClickModalLi,bindClickClose,language,handleLangClick,githubApiLink="https://api.github.com/repos/kubesphere/kubesphere",getStar=function(){$(".social-count").hide(),$.getJSON(githubApiLink,function(e){$(".social-count").show().html(e.stargazers_count)})};getStar(),bindNavMouseEvent=function(e,t){t||(t=$(e));var n=!1;t.mouseenter(function(){if(n)return!1;n=!0,$(this).find(".dropdown-menu").fadeIn(200,function(){n=!1})}),t.mouseleave(function(){$(this).find(".dropdown-menu").fadeOut(200)})},bindScrollChangeHeader=function(){var t=100,e=$("header");window.addEventListener("scroll",function(){var t=window.scrollY;t>0?e.addClass("navigationScroll"):e.removeClass("navigationScroll")})},bindClickShowMenu=function(){$(".menu-icon").click(function(){$("#modal-for-menu").modal()})},bindClickModalLi=function(){$(".modal .menu-li").click(function(){var e=$(this).data("check");e===0?($(this).data("check",1),$(this).find(".dropdown-menu").slideDown(200)):($(this).data("check",0),$(this).find(".dropdown-menu").slideUp(200)),$(this).find(".menu-span").toggleClass("up")})},bindClickClose=function(){$("#close-join").click(function(){$(".navigation .join-div").hide(),$(".main-section").removeClass("padding")})},language="zh",bindClickClose(),bindScrollChangeHeader(),$(".header-container .menu-li").each(function(){bindNavMouseEvent("",$(this))}),bindNavMouseEvent(".header-container .language-menu"),bindNavMouseEvent(".header-container .btn-li"),bindClickShowMenu(),bindClickModalLi(),handleLangClick=function(e,t){try{localStorage.setItem("lang",e)}catch{}location.href=t}</script><section class=main-section><div class=common-layout><div class=breadcrumb><span><a href=/zh/blogs/>技术博客</a> > </span><span>KubeSphere 助力提升研发效能的应用实践分享</span></div><div class='main-div middle-div'><div class=author>卢运强</div><span class=date>发布于：2023-04-19</span>&nbsp;&nbsp;&nbsp;
<span style=font-size:14px;color:#919aa3 id=busuanzi_container_page_pv>本文总阅读量：<span id=busuanzi_value_page_pv></span></span><h1>KubeSphere 助力提升研发效能的应用实践分享</h1><div class=share-1><div class=share><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f&text=KubeSphere%20%e5%8a%a9%e5%8a%9b%e6%8f%90%e5%8d%87%e7%a0%94%e5%8f%91%e6%95%88%e8%83%bd%e7%9a%84%e5%ba%94%e7%94%a8%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab" target=_blank rel="noopener noreferrer"><img src=/images/share/Twitter.svg alt="twitter icon">
</a><a href="https://reddit.com/submit?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f&title=KubeSphere%20%e5%8a%a9%e5%8a%9b%e6%8f%90%e5%8d%87%e7%a0%94%e5%8f%91%e6%95%88%e8%83%bd%e7%9a%84%e5%ba%94%e7%94%a8%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab" target=_blank rel="noopener noreferrer"><img src=/images/share/Reddit.svg alt="reddit icon">
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Facebook.svg alt="facebook icon">
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Linkedin.svg alt="linkedin icon">
</a><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f&t=KubeSphere%20%e5%8a%a9%e5%8a%9b%e6%8f%90%e5%8d%87%e7%a0%94%e5%8f%91%e6%95%88%e8%83%bd%e7%9a%84%e5%ba%94%e7%94%a8%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab" target=_blank rel="noopener noreferrer"><img src=/images/share/HackerNews.svg alt="hackernews icon"></a></div></div><div class=content><div class=md-body><blockquote><p>作者：卢运强，主要从事 Java、Python 和 Golang 相关的开发工作。热爱学习和使用新技术；有着十分强烈的代码洁癖；喜欢重构代码，善于分析和解决问题。<a href=https://lucumt.info/post/devops/share-kubepshere-using-experience-for-current-company/ target=_blank rel="noopener noreferrer">原文链接</a>。</p></blockquote><p>我司从 2022 年 6 月开始使用 KubeSphere，到目前为止快一年时间，简要记录下此过程中的经验积累，供大家参考。</p><h2 id=背景>背景</h2><p>公司当前有接近 3000 人的规模，主要业务为汽车配套相关的软硬件开发，其中专门从事软件开发约有 800 人，这其中 Java 开发的约占 70%，余下的为 C/C++ 嵌入式和 C# 桌面程序的开发。</p><p>在 Java 开发部分，约 80% 的都是 Java EE 开发，由于公司的业务主要是给外部客户提供软硬件产品和咨询服务，在早期公司和部门更关注的是如何将产品销售给更多的客户、获得更多的订单和尽快回款，对软件开发流程这块没有过多的重视，故早期在软件开发部分不是特别规范化。软件开发基于项目主要采用<a href=https://zh.wikipedia.org/zh-hans/%E6%95%8F%E6%8D%B7%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91 target=_blank rel="noopener noreferrer">敏捷开发</a>或<a href=https://zh.wikipedia.org/wiki/%E7%80%91%E5%B8%83%E6%A8%A1%E5%9E%8B target=_blank rel="noopener noreferrer">瀑布模型</a>，而对于软件部署和运维依旧采用的纯手工方式。</p><p>随着公司规模的扩大与软件产品线的增多，上述方式逐渐暴露出一些问题：</p><ul><li>存在大量重复性工作，在软件快速迭代时，需要频繁的手工编译部署，耗费时间，且此过程缺乏日志记录，后续无法追踪审计；</li><li>缺乏审核功能，对于测试环境和生产环境的操作需要审批流程，之前通过邮件和企业微信无法串联；</li><li>缺乏准入功能，随着团队规模扩大，人员素质参差不齐，需要对软件开发流程、代码风格都需要强制固化；</li><li>缺乏监控功能，后续不同团队、项目采用的监控方案不统一，不利于知识的积累；</li><li>不同客户的定制化功能太多（logo，字体，IP 地址，业务逻辑等），采用手工打包的方式效率低，容易遗漏出错。</li></ul><p>在竞争日益激烈的市场环境下，<strong>公司需要把有限的人力资源优先用于业务迭代开发</strong>，解决上述问题变得愈发迫切。</p><h2 id=选型说明>选型说明</h2><p>基于前述原因，部门准备选用网络上开源的系统来尽可能的解决上述痛点，在技术选型时有如下考量点：</p><ul><li>采用尽量少的系统，最好一套系统能解决前述所有问题，避免多个系统维护和整合的成本；</li><li>采用开源版本，避免公司内部手工开发，节约人力；</li><li>安装过程简洁，不需要复杂的操作，能支持离线安装；</li><li>文档丰富、社区活跃、使用人员较多，遇到问题能较容易的找到答案；</li><li>支持容器化部署，公司和部门的业务中自动驾驶和云仿真相关的越来越多，此部分对算力和资源提出了更高的要求。</li></ul><p>我们最开始采用的是 <a href=https://www.jenkins.io/ target=_blank rel="noopener noreferrer">Jenkins</a>，通过 Jenkins 基本上能解决我们 90% 的问题，但依旧有如下问题影使用体验:</p><ul><li>对于云原生支持不太好，不利于部门后续云仿真相关的业务使用；</li><li>UI 界面简陋，交互方式不友好(项目构建日志输出等)；</li><li>对于项目，资源的权限分配与隔离过于简陋，不满足多项目多部门使用时细粒度的区分要求。</li></ul><p>在网络上查找后发现类似的工具有很多，经过初步对比筛选后倾向于 KubeSphere、Zadig 这 2 款产品，它们的基本功能都类似，进一步对比如下：</p><table><thead><tr><th></th><th style=text-align:center>KubeSphere</th><th style=text-align:center>Zadig</th></tr></thead><tbody><tr><td><strong>云原生支持</strong></td><td style=text-align:center><strong>高</strong></td><td style=text-align:center>一般</td></tr><tr><td><strong>UI 美观度</strong></td><td style=text-align:center><strong>高</strong></td><td style=text-align:center>一般</td></tr><tr><td><strong>GitHub Star</strong></td><td style=text-align:center><strong>12.4k</strong></td><td style=text-align:center>2k</td></tr><tr><td><strong>社区活跃度</strong></td><td style=text-align:center><strong>高</strong></td><td style=text-align:center>一般</td></tr></tbody></table><p>经过对比，KubeSphere 较为符合我们的需求，尤其是 KubeSphere 的 UI 界面十分美观，故最终选定 KubeSphere 作为部门内部的持续集成与容器化管理系统！</p><p>至此，部门内部经历了<code>手工操作</code>-><code>Jenkins</code>-><code>KubeSphere</code>这 3 个阶段，各阶段的主要使用点如下：</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/different-type-of-deploy-compare.png alt></p><h2 id=实践过程>实践过程</h2><p>KubeSphere 在公司内部的整体部署架构如下图所示，其作为最顶层的应用程序直接与使用人员交互，提供主动/定时触发构建、应用监控等功能，使用人员不必关心底层的 Jenkins、Kubernetes 等依赖组件，只需要与 Gitlab 和 KubeSphere 交互即可。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-integration-architecture.png alt></p><h3 id=持续集成>持续集成</h3><h4 id=初始实现>初始实现</h4><p>在最初的尝试阶段只规划了 4 套环境：<code>dev</code>(开发环境)、<code>sit</code>(调试环境)、<code>test</code>(测试环境)、<code>prod</code>(生产环境)。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/using-jekins-to-deploy-automatic.png alt></p><p>出于简化使用与维护的考虑，计划对每个工程模块只维护一条流水线，通过构建时选择不同的环境参数来实现定制化打包与部署。</p><p>KubeSphere 和 Kubernetes 目前在部门是以单机版形式安装的，故对于不同环境的区分主要是通过分配不同端口来实现，具体实现时需要能在 Jenkins 和 Kubernetes 的 yaml 文件中都能动态的获取对应的端口参数和项目名称，参考实现代码如下：</p><ul><li><p>在基于 <code>Groovy</code> 的 <code>script</code> 中根据选择环境动态分配相关端口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span><span style=color:#66d9ef>switch</span><span style=color:#f92672>(</span>PRODUCT_PHASE<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;sit&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span><span style=color:#a6e22e>NODE_PORT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>13003</span>
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span><span style=color:#a6e22e>DUBBO_PORT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>13903</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;test&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span><span style=color:#a6e22e>NODE_PORT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>14003</span>
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span><span style=color:#a6e22e>DUBBO_PORT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>14903</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;prod&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span><span style=color:#a6e22e>NODE_PORT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>15003</span>
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span><span style=color:#a6e22e>DUBBO_PORT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>15903</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></li><li><p><code>script</code> 中读取参数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>print env<span style=color:#f92672>.</span><span style=color:#a6e22e>DUBBO_IP</span>
</span></span></code></pre></div></li><li><p><code>shell</code> 中读取参数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker build -f kubesphere/Dockerfile <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>-t idp-data:$BUILD_TAG  <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--build-arg  PROJECT_VERSION<span style=color:#f92672>=</span>$PROJECT_VERSION <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--build-arg  NODE_PORT<span style=color:#f92672>=</span>$NODE_PORT <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--build-arg  DUBBO_PORT<span style=color:#f92672>=</span>$DUBBO_PORT <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--build-arg PRODUCT_PHASE<span style=color:#f92672>=</span>$PRODUCT_PHASE .
</span></span></code></pre></div></li><li><p><code>yaml</code> 文件中读取参数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>$NODE_PORT</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>$NODE_PORT</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>nodePort</span>: <span style=color:#ae81ff>$NODE_PORT</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>dubbo</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>$DUBBO_PORT</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>$DUBBO_PORT</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>nodePort</span>: <span style=color:#ae81ff>$DUBBO_PORT</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>lucumt-data-$PRODUCT_PHASE</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sessionAffinity</span>: <span style=color:#ae81ff>None</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>NodePort</span>
</span></span></code></pre></div></li></ul><p>运行效果类似下图：</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-jenkins-pipeline-run-dialog.png alt></p><p>详细内容请参见 <a href=https://lucumt.info/post/devops/share-experiences-for-using-kubesphere/ target=_blank rel="noopener noreferrer">KubeSphere 使用心得</a>。</p><h4 id=环境扩容>环境扩容</h4><p>基于前述方式搭建的 4 套环境一开始使用较为顺利，但随着项目的推进以及开发人员的增多，同时有多个功能模块需要并行开发与测试，导致原有的 4 套环境不够用。经过一番摸索后，实现了结合 <a href=https://nacos.io/zh-cn/docs/what-is-nacos.html target=_blank rel="noopener noreferrer">Nacos</a> 在 KubeSphere 中动态配置多套环境功能，通过修改 Nacos 中的 <code>JSON</code> 配置文件可很容易的从 4 套扩展为 16 套甚至更多。</p><p>结合项目实际情况以及避免后续再次修改 KubeSphere 流水线，为了实现<strong>灵活的配置多套环境</strong>，制定了如下 2 个规则：</p><ol><li>端口信息存放到配置文件中，KubeSphere 在构建时去流水线读取相关配置</li><li>当需要扩展环境或修改端口时，不需要修改 KubeSphere 中的流水线，只需要修改对应的端口配置文件即可</li></ol><p>由于项目中采用 Nacos 作为配置中心与服务管理平台，故决定采用 Nacos 作为端口的配置中心，实现流程如下：</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-build-with-nacos-config.png alt></p><p>基于上述流程，在具体实现时面临如下问题：</p><ul><li>利用 <code>Groovy</code> 代码获取 <code>Nacos</code> 中特定的端口 <code>JSON</code> 配置文件，并能动态解析；</li><li>利用 <code>Groovy</code> 代码根据输入输入参数动态的获取 <code>Nacos</code> 中对应的 <code>namespace</code>；</li><li>由于环境的增多，不可能每套环境都准备一个 <code>YAML</code> 文件，此时需要动态的读取并更新 <code>YAML</code> 文件。</li></ul><p>由于 <code>Jenkins</code> 默认不支持 <code>JSON</code>、<code>YAML</code> 的解析，需要在 <code>Jenkins</code> 中预先安装 <a href=https://www.jenkins.io/doc/pipeline/steps/pipeline-utility-steps/ target=_blank rel="noopener noreferrer">Pipeline Utility Steps</a>插件，该插件提供了对 <code>JSON</code>、<code>YAML</code>、<code>CSV</code>、<code>PROPERTIES</code> 等常见文件格式的读取与修改操作。</p><ul><li><p><code>JSON</code> 文件设计如下，通过 env、server、dubbo 等属性记录环境和端口信息，通过 <code>project</code> 来记录具体的项目名称，由于配置文件中的 <code>key</code> 都是固定的，后续 <code>Groovy</code> 解析时会较为方便，在需要扩展环境时只需要更新此 <code>JSON</code> 文件即可。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;portConfig&#34;</span>:[
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;project&#34;</span>:<span style=color:#e6db74>&#34;lucumt-system&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;ports&#34;</span>:[
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;env&#34;</span>:<span style=color:#e6db74>&#34;dev-1&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#ae81ff>12001</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;dubbo&#34;</span>:<span style=color:#ae81ff>12002</span>
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;env&#34;</span>:<span style=color:#e6db74>&#34;dev-2&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#ae81ff>12201</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;dubbo&#34;</span>:<span style=color:#ae81ff>12202</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;project&#34;</span>:<span style=color:#e6db74>&#34;lucumt-idp&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;ports&#34;</span>:[
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;env&#34;</span>:<span style=color:#e6db74>&#34;dev-1&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#ae81ff>13001</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;dubbo&#34;</span>:<span style=color:#ae81ff>13002</span>
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;env&#34;</span>:<span style=color:#e6db74>&#34;dev-2&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#ae81ff>13201</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;dubbo&#34;</span>:<span style=color:#ae81ff>13202</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p><a href=https://nacos.io/zh-cn/docs/open-api.html target=_blank rel="noopener noreferrer">Nacos Open Api</a> 中可知查询 <code>namespace</code> 的请求为 <code>/nacos/v1/console/namespaces</code>，查询配置文件的请求为 <code>/nacos/v1/cs/configs</code>，基于 <code>Groovy</code> 的读取代码如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>response <span style=color:#f92672>=</span> sh<span style=color:#f92672>(</span>script: <span style=color:#e6db74>&#34;curl -X GET &#39;http://xxx.xxx.xxx.xxx:8848/nacos/v1/console/namespaces&#39;&#34;</span><span style=color:#f92672>,</span> returnStdout: <span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>jsonData <span style=color:#f92672>=</span> readJSON text: response
</span></span><span style=display:flex><span>namespaces <span style=color:#f92672>=</span> jsonData<span style=color:#f92672>.</span><span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>nm <span style=color:#66d9ef>in</span> namespaces<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>BUILD_TYPE<span style=color:#f92672>==</span>nm<span style=color:#f92672>.</span><span style=color:#a6e22e>namespaceShowName</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        NACOS_NAMESPACE <span style=color:#f92672>=</span> nm<span style=color:#f92672>.</span><span style=color:#a6e22e>namespace</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>response <span style=color:#f92672>=</span> sh<span style=color:#f92672>(</span>script: <span style=color:#e6db74>&#34;curl -X GET &#39;http://xxx.xxx.xxx.xxx:8848/nacos/v1/cs/configs?dataId=idp-custom-config.json&amp;group=idp-custom-config&amp;tenant=0f894ca6-4231-43dd-b9f3-960c02ad20fa&#39;&#34;</span><span style=color:#f92672>,</span> returnStdout: <span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>jsonData <span style=color:#f92672>=</span> readJSON text: response
</span></span><span style=display:flex><span>configs <span style=color:#f92672>=</span> jsonData<span style=color:#f92672>.</span><span style=color:#a6e22e>portConfig</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>config <span style=color:#66d9ef>in</span> configs<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>    project <span style=color:#f92672>=</span> config<span style=color:#f92672>.</span><span style=color:#a6e22e>project</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>project<span style=color:#f92672>!=</span>PROJECT_NAME<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    ports <span style=color:#f92672>=</span> config<span style=color:#f92672>.</span><span style=color:#a6e22e>ports</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>port <span style=color:#66d9ef>in</span> ports<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>port<span style=color:#f92672>.</span><span style=color:#a6e22e>env</span><span style=color:#f92672>!=</span>BUILD_TYPE<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span><span style=color:#a6e22e>NODE_PORT</span> <span style=color:#f92672>=</span> port<span style=color:#f92672>.</span><span style=color:#a6e22e>server</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></li><li><p>动态更新 <code>yaml</code> 文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>yamlFile = &#39;src/main/resources/bootstrap-dev.yml&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>yamlData = readYaml file</span>: <span style=color:#ae81ff>yamlFile</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>yamlData.spring.cloud.nacos.discovery.group = BUILD_TYPE</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>yamlData.spring.cloud.nacos.discovery.namespace = NACOS_NAMESPACE</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>yamlData.spring.cloud.nacos.config.namespace = NACOS_NAMESPACE</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>sh &#34;rm $yamlFile&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>writeYaml file: yamlFile, data</span>: <span style=color:#ae81ff>yamlData</span>
</span></span></code></pre></div></li></ul><p>详细内容请参见<a href=https://lucumt.info/post/devops/using-nacos-and-kubesphere-to-create-multiple-environments/ target=_blank rel="noopener noreferrer">利用 Nacos 与 KubeSphere 创建多套开发与测试环境</a>。</p><h4 id=扩展功能>扩展功能</h4><ul><li><p>在项目构建时添加审核功能，对于 <code>test</code> 和 <code>prod</code> 环境必须经过相关人的审核才能进行后续构建流程，避免破坏相关版本的稳定性。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-jenkins-pipeline-execute-review.png alt></p></li><li><p>在 KubeSphere 的容器组页面可以查看 pod 节点的 CPU 和内存消耗，可初步满足对代码潜在性能问题的排查。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-monitor-resouce-consumption.png alt></p></li><li><p>在项目构建完成时发送邮件通知给相关人。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-jenkins-pipeline-mail-notification.png alt></p></li></ul><h3 id=外部部署>外部部署</h3><p>部门内部的软件最终都会销售并交付给相关客户，由于客户网络与公司网络不通以及代码保密等要求，无法在客户现场使用原有的 Jenkins 流水线进行部署交付。基于此部门采取折中方案：<strong>在公司内部通过 KubeSphere 进行编译打包，导出 Docker 镜像，拷贝到客户处然后基于 Docker 镜像部署运行</strong>,具体请参见如下链接:</p><ul><li><a href=https://lucumt.info//post/devops/git-checkout-by-dynamic-repository-in-jenkins/ target=_blank rel="noopener noreferrer">在 Jenkins 中根据配置从不同的仓库中 Checkout 代码</a></li><li><a href=https://lucumt.info//post/linux/using-script-to-deploy-microservice-application-in-docker/ target=_blank rel="noopener noreferrer">利用 shell 脚本实现将微服务程序以 docker 容器方式自动部署</a></li></ul><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/software-deploy-in-customer-environment.png alt></p><h2 id=使用协助>使用协助</h2><p>在使用过程中确实遇到了不少问题，主要通过如下三条途径解决:</p><ul><li>阅读<a href=https://kubesphere.io/zh/docs/v3.3 target=_blank rel="noopener noreferrer">官方文档</a>，根据文档说明操作；</li><li>若官网文档没有，则去<a href=https://kubesphere.io/forum/ target=_blank rel="noopener noreferrer">用户论坛</a>查看是否有人遇到类似问题或直接发帖；</li><li>通过微信群寻求协助。</li></ul><p>根据部门使用经验，90% 的问题可通过官方文档或用户论坛获得答案。</p><h2 id=使用效果>使用效果</h2><p>部分同事习惯于原始的手工操作或基于 Docker 部署，导致在推广过程中受到了一定的阻力，部门内部基于充分沟通和逐步替换的方式引导相关同事来慢慢适应。经过约一年的时间磨合，大家都认可了拥抱云原生和 KubeSphere 给我们带来的便利，使用过的同事都说很香!</p><p>对我司而言，有如下几个方面的提升:</p><ul><li>研发人员几乎不用耗费时间在软件的部署和监控上，节省约 20% 时间，产品迭代速度更快；</li><li>定制化的功能通过脚本实现，彻底杜绝了给客户交付软件时由于人工疏漏导致的偶发问题，在提高软件交付质量的同时也提升了客户我司的认可度；</li><li>软件开发、测试流程更规范，通过在 <code>Jenkins</code> 流水线强制添加各种规范检查和审核流程，实现了软件研发的规范统一，代码质量更高，更利于扩展维护，同时也在一定程序上减少了由于人员流失/变更对项目造成的影响；</li><li>基于 <code>KubeSphere</code> 的云原生部署结合 <code>Nacos</code> 可以更快速的分配多套环境，有效的实现了<code>开发</code>、<code>测试</code>、<code>生产</code>环境的隔离，在云仿真相关的业务场景中可基于业务场景更方便的对 <code>pod</code> 进行监控与调整，前瞻性的业务研发开展更顺利。</li></ul><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/using-kubesphere-to-deploy.png alt></p><h2 id=未来规划>未来规划</h2><p>结合公司与部门的实际情况，短期的规划依然是完善基于 Jenkins 的 CI/CD 使用来完善打包与部署流程，部门内部在进行全面 web 化，基于此中长期拥抱云原生。</p><ul><li>接入企业微信，将构建与运行结果随时通知相关人，构建结果与项目监控更实时；</li><li>将部门内部基于 <code>Eclipse RCP</code> 的桌面应用程序通过 <code>Jenkins</code> 实现标准化与自动化的构建；</li><li>将底层的 <code>Kubernetes</code> 从单机升级为集群，支持更多 <code>pod</code> 的部署，支持公司内部需要大量 <code>pod</code> 并发运行的云仿真项目；</li><li>部门内部的 <code>web</code> 项目全部通过 <code>KubeSphere</code> 构建部署，完善其使用文档，挖掘 <code>KubeSphere</code> 在部门业务中新的应用场景（如对设计文档、开发文档、bug 修复的定时与强制检查通知等）。</li></ul></div></div><div class=share-2><div class=share><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f&text=KubeSphere%20%e5%8a%a9%e5%8a%9b%e6%8f%90%e5%8d%87%e7%a0%94%e5%8f%91%e6%95%88%e8%83%bd%e7%9a%84%e5%ba%94%e7%94%a8%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab" target=_blank rel="noopener noreferrer"><img src=/images/share/Twitter.svg alt="twitter icon">
</a><a href="https://reddit.com/submit?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f&title=KubeSphere%20%e5%8a%a9%e5%8a%9b%e6%8f%90%e5%8d%87%e7%a0%94%e5%8f%91%e6%95%88%e8%83%bd%e7%9a%84%e5%ba%94%e7%94%a8%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab" target=_blank rel="noopener noreferrer"><img src=/images/share/Reddit.svg alt="reddit icon">
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Facebook.svg alt="facebook icon">
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Linkedin.svg alt="linkedin icon">
</a><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fbest-practices-kubesphere-assist-in-improving-the-efficiency-of-rd%2f&t=KubeSphere%20%e5%8a%a9%e5%8a%9b%e6%8f%90%e5%8d%87%e7%a0%94%e5%8f%91%e6%95%88%e8%83%bd%e7%9a%84%e5%ba%94%e7%94%a8%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab" target=_blank rel="noopener noreferrer"><img src=/images/share/HackerNews.svg alt="hackernews icon"></a></div></div></div><div class=aside><div class=inner-div><div class=title>目录</div><div class=tabs><nav id=TableOfContents><ul><li><a href=#背景>背景</a></li><li><a href=#选型说明>选型说明</a></li><li><a href=#实践过程>实践过程</a><ul><li><a href=#持续集成>持续集成</a></li><li><a href=#外部部署>外部部署</a></li></ul></li><li><a href=#使用协助>使用协助</a></li><li><a href=#使用效果>使用效果</a></li><li><a href=#未来规划>未来规划</a></li></ul></nav></div></div></div></div></section><div class=SubscribeForm><div class=innerBox><img class=close src=/images/home/close.svg alt=close><p class=description>通过邮件接收 KubeSphere 最新的技术博客与产品更新的通知</p><div id=blog_formAddress data-actionaddress="https://www.sendcloud.net/v3/api/subInvite/subscription?invitecode=1dc5a4fb-894c-4470-b01d-ca7fa9d47a46" data-usesendcloud=true data-lang=zh><input name=EMAIL id=email-input-blog type=text placeholder>
<button id=email-submit-blog>订阅</button>
<span id=message_blog data-message1=请提供您的邮箱 data-message2=请输入有效的邮箱地址! data-message3=邮箱地址已经存在 style=color:red></span><span id=message1_blog style=color:#00a971 data-success=订阅成功啦，我们保证不会给你发垃圾邮件的啦></span></div></div></div><footer><div class=footer><div class="footer-main common-layout"><div class=up-main><div class=left-div><img src=/images/logo.svg alt class=foot-logo><p>通过邮件接收 KubeSphere 最新的技术博客与产品更新的通知</p><div id=formAddress data-actionaddress="https://www.sendcloud.net/v3/api/subInvite/subscription?invitecode=1dc5a4fb-894c-4470-b01d-ca7fa9d47a46" data-usesendcloud=true data-lang=zh><input name=EMAIL id=email-input type=text placeholder=请输入您的邮箱地址>
<button id=email-submit>订阅</button></div><span id=message data-message1=请提供您的邮箱 data-message2=请输入有效的邮箱地址! data-message3=邮箱地址已经存在></span><span id=message1 style=color:#00a971 data-success=订阅成功啦，我们保证不会给你发垃圾邮件的啦></span><script>var bindSubmit=function(){var e=$("#email-input");$("#email-submit").click(function(t){t.stopPropagation();var s,o,n=e.val(),i=$("#message").data("message1"),a=$("#message").data("message2"),r=$("#message").data("message3"),c=$("#message1").data("success");if(n)if(validateEmail(n)){if(s=$("#formAddress").data("usesendcloud"),!s)return;o=$("#formAddress").data("actionaddress"),$.post({type:"post",url:o,data:{email:$("#email-input").val().toString()},success:function(){showSuccessMessage(c),setTimeout(function(){$("#email-input").val("")},1e3)},error:function(){showMessage(r)}})}else t.preventDefault(),showMessage(a);else t.preventDefault(),showMessage(i)})},validateEmail=function(e){var t=/^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\.)+[A-Za-z]{2,6}$/;return t.test(e)},showMessage=function(e){$("#message").html(e).show()},showSuccessMessage=function(e){$("#message1").html(e).show()},bindHideMessage=function(){$(window).click(function(){$("#message").hide(),$("#message1").hide()})},bindClose=function(){$(".formBox .close").click(function(e){e.stopPropagation(),$(".formBox").fadeOut()})};bindSubmit(),bindClose(),bindHideMessage()</script><span id=message data-message1=请提供您的邮箱 data-message2=请输入有效的邮箱地址!></span></div><div class=right-div><ul class=common-flex-layout><li class=nowrap-li><div class=h3>应用场景</div><a href=/zh/devops/>拥抱一站式 DevOps</a>
<a href=/zh/service-mesh/>在 K8s 运行微服务</a>
<a href=/zh/observability/>构建云原生可观测性</a>
<a href=https://github.com/kubesphere/kubekey target=_blank rel="noopener noreferrer">K8s 一键部署与运维</a>
<a href=https://github.com/OpenFunction/OpenFunction target=_blank rel="noopener noreferrer">构建 FaaS 平台与 Serverless 架构</a>
<a href=https://github.com/openpitrix/openpitrix target=_blank rel="noopener noreferrer">多云应用管理平台</a></li><li class=nowrap-li><div class=h3>资源</div><a href=/zh/projects/>开源项目</a>
<a href=/zh/blogs/>技术博客</a>
<a href=/zh/conferences/>开源峰会</a>
<a href=/zh/videos/>视频资源</a>
<a href=/zh/learn/>云原生实战</a></li><li class=nowrap-li><div class=h3>文档中心</div><a href=/zh/docs/v4.1/01-intro/01-introduction/>产品介绍</a>
<a href=/zh/docs/v4.1/03-installation-and-upgrade/02-install-kubesphere/02-install-kubernetes-and-kubesphere/>如何安装</a>
<a href=/zh/docs/v4.1/02-quickstart/>快速入门</a>
<a href=/zh/docs/v3.4/reference/api-docs/>API 文档</a></li><li class=nowrap-li><div class=h3>开源社区</div><a href=/zh/contribution/>参与贡献</a>
<a href=/zh/live/>社区活动</a>
<a href=/zh/case/>案例学习</a>
<a href=/zh/partner/>合作伙伴</a>
<a href=/zh/user-group/>用户委员会</a>
<a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md target=_blank rel="noopener noreferrer">版本计划</a>
<a href=https://kubesphere.com.cn/ target=_blank rel="noopener noreferrer">中国站</a>
<a href=https://ask.kubesphere.io/forum target=_blank rel="noopener noreferrer">中文论坛</a>
<a href=https://kubesphere.io target=_blank rel="noopener noreferrer">全球站</a></li><li class=nowrap-li><div class=h3>产品与服务</div><a href=https://aws.amazon.com/cn/quickstart/architecture/qingcloud-kubesphere/ target=_blank rel="noopener noreferrer">KubeSphere on AWS</a>
<a href=https://market.azure.cn/marketplace/apps/qingcloud.kubesphere target=_blank rel="noopener noreferrer">KubeSphere on Azure</a>
<a href=https://marketplace.digitalocean.com/apps/kubesphere target=_blank rel="noopener noreferrer">KubeSphere on DigitalOcean</a>
<a href=https://www.qingcloud.com/products/kubesphereqke target=_blank rel="noopener noreferrer">KubeSphere on QingCloud(QKE)</a>
<a href=https://kubesphere.com.cn/kse/ target=_blank rel="noopener noreferrer">KubeSphere 企业版</a>
<a href=https://kubesphere.cloud/ksv/ target=_blank rel="noopener noreferrer">KubeSphere 虚拟化平台</a>
<a href=https://kubesphere.com.cn/marketplace/ target=_blank rel="noopener noreferrer">云原生扩展组件市场</a>
<a href=https://kubesphere.cloud target=_blank rel="noopener noreferrer">云原生应用服务平台</a>
<a href=https://m.qingcloud.com/p/aec50 target=_blank rel="noopener noreferrer">了解商业产品与咨询合作</a></li></ul></div></div><div class=down-main><div class=img-div><a class=wechat href=javascript:void(0); aria-label=wechat><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="0 0 28 28"><defs><path id="a" d="M0 0h15.673v12.156H0z"/></defs><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="13" cy="13" r="13" stroke="#B6C2CD"/><g transform="translate(5 7)"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path fill="currentColor" d="M15.673 7.898c0-2.061-2.173-3.74-4.619-3.74-2.59.0-4.625 1.679-4.625 3.74.0 2.066 2.035 3.738 4.625 3.738.542.0 1.09-.13 1.632-.256l1.493.776-.408-1.29c1.09-.776 1.902-1.81 1.902-2.968zm-6.119-.645c-.27.0-.541-.257-.541-.514.0-.256.27-.514.541-.514.41.0.681.258.681.514.0.257-.271.514-.681.514zm2.994.0c-.27.0-.541-.257-.541-.514.0-.256.27-.514.54-.514.41.0.681.258.681.514.0.257-.277.514-.68.514z" mask="url(#b)"/><path fill="currentColor" d="M10.602 3.674c.177.0.356.011.533.029C10.657 1.576 8.27.0 5.543.0 2.498.0.0 1.974.0 4.485c0 1.45.829 2.64 2.216 3.564l-.552 1.588 1.94-.929c.693.129 1.251.263 1.94.263.17.0.343-.005.515-.022a3.68 3.68.0 01-.172-1.104c0-2.302 2.081-4.171 4.715-4.171zM7.618 2.243c.417.0.693.263.693.66s-.276.66-.693.66c-.418.0-.835-.263-.835-.66.006-.398.423-.66.835-.66zm-3.88 1.319c-.417.0-.834-.263-.834-.66s.417-.66.834-.66c.418.0.695.263.695.66.0.392-.277.66-.695.66z" mask="url(#b)"/></g></g></svg><div class=hide-div><img src=/images/home/wechat.svg alt></div></a><a class=facebook-a href=https://www.facebook.com/kubesphere target=_blank aria-label=facebook></a><a class=twitter-a href=https://x.com/KubeSphere target=_blank aria-label=twitter rel="noopener noreferrer"></a><a class=linkedin-a href=https://www.linkedin.com/company/kubesphere/ target=_blank aria-label=linkedin rel="noopener noreferrer"></a><a class=bilibili-a href=https://space.bilibili.com/438908638 target=_blank aria-label=bilibili rel="noopener noreferrer"></a><a class=slack-a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank aria-label=slack rel="noopener noreferrer"></a><a class=github-a href=https://github.com/kubesphere/kubesphere target=_blank aria-label=github rel="noopener noreferrer"></a><a class=medium-a href=https://itnext.io/@kubesphere target=_blank aria-label=medium rel="noopener noreferrer"></a></div><p class=p1></p><p class=case><a href=http://www.beian.miit.gov.cn/ target=_blank rel="noopener noreferrer"><span>京ICP备13019086号</span>
</a><a target=_blank rel="noopener noreferrer" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502041003"><img src=/images/footer/case-icon.png alt=备案图标>
<span>京公网安备 11010502041003号</span></a></p></div></div></div><div class=cookie><div class=common-layout><p>您的隐私对我们很重要。我们使用Cookie来记住订阅详细信息，优化网站功能并交付根据您的兴趣量身定制的内容。要了解更多信息，请参阅我们的<a href=/zh/privacy>隐私政策</a>.</p><button>
接受并继续</button></div></div></footer><script>var lazyLoad=function(e,t){for(var n,o,i,s=0;s<t;s++){if(n=e.eq(s),o=n.attr("data-loaded"),o)continue;n.offset().top<parseInt($(window).height())+parseInt($(window).scrollTop())&&(i=n.attr("src"),n.attr("src",i),n.attr("data-loaded",!0))}},bindLayLoad=function(){var e=$("img"),t=e.length;lazyLoad(e,t),$(window).scroll(function(){lazyLoad(e,t)})},bindAddPadding=function(){var e=$("#close-join");e.length>0&&$(".main-section").addClass("padding")},docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t){return!!e&&!/^(?:expires|max-age|path|domain|secure)$/i.test(e)&&(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t),!0)}},bindHideCookie=function(){var t=docCookies.getItem("hasAuth"),e=$(".cookie");t?e.hide():e.show(),e.find("button").on("click",function(){docCookies.setItem("hasAuth","1"),e.hide()})};bindAddPadding(),bindHideCookie()</script><script type=text/javascript src=/js/aside.2d6977c0f16aef4ed3e886dd66675ce74bd0efcd467c2b2bcdb30b92d5e7c7c0e5c6e0c9d8f09a883c22f58df9e6b0b6347fcdd3c9a920b7faba6d7f91a201c3.js integrity="sha512-LWl3wPFq707T6IbdZmdc50vQ781GfCsrzbMLktXnx8DlxuDJ2PCaiDwi9Y355rC2NH/N08mpILf6um1/kaIBww=="></script><script type=text/javascript src=/js/markdown-tab.17f9f46b021adebc7250ce1b07134a577b307e7a436daa4aaf388f218e8463966f53770b26a64817c06c168738a887672d47fb4c29615adfc446e11d09a344cf.js integrity="sha512-F/n0awIa3rxyUM4bBxNKV3swfnpDbapKrziPIY6EY5ZvU3cLJqZIF8BsFoc4qIdnLUf7TClhWt/ERuEdCaNEzw=="></script><script>let forbidForm=!1;var viewer=new Viewer(document.querySelector(".md-body"),{url:"src"}),blogBindSubmit=function(){var e=$("#email-input-blog");$("#email-submit-blog").click(function(t){t.stopPropagation();var s,o,n=e.val(),i=$("#message_blog").data("message1"),a=$("#message_blog").data("message2"),r=$("#message_blog").data("message3"),c=$("#message1_blog").data("success");if(n)if(validateEmail(n)){if(s=$("#blog_formAddress").data("usesendcloud"),!s)return;o=$("#blog_formAddress").data("actionaddress"),$.post({type:"post",url:o,data:{email:n.toString()},success:function(){showSuccessMessage_blog(c),setTimeout(function(){window.onscroll="",$(".SubscribeForm").hide(),$("#email-input-blog").val("")},5e3)},error:function(){showMessage_blog(r)}})}else t.preventDefault(),$("#message_blog").html(a).show();else t.preventDefault(),$("#message_blog").html(i).show()})},validateEmail=function(e){var t=/^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\.)+[A-Za-z]{2,6}$/;return t.test(e)},bindHideMessageBlog=function(){$(window).click(function(){$("#message_blog").hide()})},bindCloseBlog=function(){$(".SubscribeForm .close").click(function(e){e.stopPropagation(),$(".SubscribeForm").fadeOut(),window.onscroll=""})},showMessage_blog=function(e){$("#message_blog").html(e).show()},showSuccessMessage_blog=function(e){$("#message1_blog").html(e).show()};window.onscroll=()=>{var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollHeight||document.body.scrollHeight;forbidForm&&(window.onscroll=""),e+t>n-710?$(".SubscribeForm").hide():$(".SubscribeForm").show()},blogBindSubmit(),bindCloseBlog(),bindHideMessageBlog()</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></body></html>