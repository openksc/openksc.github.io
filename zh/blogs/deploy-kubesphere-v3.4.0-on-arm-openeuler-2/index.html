<!doctype html><html lang=en-US><head><meta charset=utf-8><title>ARM ç‰ˆ openEuler 22.03 éƒ¨ç½² KubeSphere 3.4.0 ä¸å®Œå…¨æŒ‡å—ç»­ç¯‡</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="æœ¬æ–‡ä¸»è¦å®æˆ˜æ¼”ç¤ºäº†åœ¨ ARM ç‰ˆ openEuler 22.03 LTS SP2 æœåŠ¡å™¨ä¸Šï¼Œåˆ©ç”¨ KubeKey v3.0.10 è‡ªåŠ¨åŒ–éƒ¨ç½²æœ€å°åŒ– KubeSphere v3.4.0 å’Œ Kubernetes v1.26.5 é«˜å¯ç”¨é›†ç¾¤çš„è¯¦ç»†è¿‡ç¨‹ã€‚"><meta name=keywords content="Kubernetes,KubeSphere,openEuler,ARM"><meta property="og:type" content="article"><meta property="og:title" content="ARM ç‰ˆ openEuler 22.03 éƒ¨ç½² KubeSphere 3.4.0 ä¸å®Œå…¨æŒ‡å—ç»­ç¯‡"><meta property="og:description" content="æœ¬æ–‡ä¸»è¦å®æˆ˜æ¼”ç¤ºäº†åœ¨ ARM ç‰ˆ openEuler 22.03 LTS SP2 æœåŠ¡å™¨ä¸Šï¼Œåˆ©ç”¨ KubeKey v3.0.10 è‡ªåŠ¨åŒ–éƒ¨ç½²æœ€å°åŒ– KubeSphere v3.4.0 å’Œ Kubernetes v1.26.5 é«˜å¯ç”¨é›†ç¾¤çš„è¯¦ç»†è¿‡ç¨‹ã€‚"><meta property="og:image" content="https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-3.4-on-openeuler-cover.png"><meta property="og:url" content="https://openksc.github.io/zh/blogs/deploy-kubesphere-v3.4.0-on-arm-openeuler-2/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@KubeSphere"><meta property="twitter:image" content="https://pek3b.qingstor.com/kubesphere-community/images/kubesphere-3.4-on-openeuler-cover.png"><meta name=docsearch:language content="zh-CN"><meta name=docsearch:version content><link rel=canonical href=https://kubesphere.io/zh/blogs/deploy-kubesphere-v3.4.0-on-arm-openeuler-2/><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=apple-touch-icon href=/images/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/svg+xml href=/images/favicons/favicon.svg><link rel=icon type=image/png href=/images/favicons/favicon.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#00ad6e><meta name=msapplication-config content='/images/favicons/browserconfig.xml'><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=/fonts/Roboto/stylesheet.css><link rel=stylesheet href=/fonts/ProximaNova/stylesheet.css><link rel=stylesheet href=/css/jquery.modal.min.css><link rel=stylesheet href=/css/viewer.min.css><link rel=stylesheet href=/swiper/swiper-bundle.min.css><link rel=stylesheet href=/scss/common.min.0c3fdcc05ec210321169846714f74b11c4a1baf09a1833fa9273b2347c81e636.css><script src=/js/jquery-3.7.1.min.js></script><script src=/js/viewer.min.js></script><script src=/js/jquery.modal.min.js></script><script src=/swiper/swiper-bundle.min.js></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?0888981f1fa45d241b1fb6962da2963e",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-YYCVN36HT5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YYCVN36HT5")</script><script type=text/javascript>!function(e,t,n,s,o){e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=("https:"==document.location.protocol?"https://":"http://")+s,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio"),gio("init","8a24ae300cbf8b8c",{}),gio("send")</script><link rel=stylesheet href=/scss/content.min.f73b326fbf8c5bd331900b0de21c7dde608a4926f482f6465f9ae1d9049b83ad.css><link rel=stylesheet href=/scss/markdown.min.db47186481122431dffae72d17dbbd51f90b66f022cc163458645709924e4eac.css></head><body><header class=navigation><div class=join-div><div class=content>ğŸš€ KubeSphere v4.1.3 å‘å¸ƒï¼Œå¤šé¡¹ä¼˜åŒ–ä¸æ”¹è¿›ï¼Œæ¬¢è¿ä½“éªŒï¼<a href=/zh/docs/v4.1/20-release-notes/release-v413/ target=_blank rel="noopener noreferrer">è¯·æŸ¥çœ‹ Release notes â†’</a>
<img id=close-join src=/images/header/close.svg alt=close></div></div><div class=common-layout><div class=header-container><a href=/zh/ aria-label=logo><img src=/images/header/logo.svg alt class=logo></a><ul class=nav><li class=menu-li><span class=menu-span>åº”ç”¨åœºæ™¯</span><ul class="dropdown-menu menu-2"><li><a href=/zh/devops/>æ‹¥æŠ±ä¸€ç«™å¼ DevOps å·¥ä½œæµ</a></li><li><a href=/zh/service-mesh/>åœ¨ Kubernetes è¿è¡Œå¾®æœåŠ¡</a></li><li><a href=/zh/observability/>æ„å»ºä¸°å¯Œçš„äº‘åŸç”Ÿå¯è§‚æµ‹æ€§</a></li></ul></li><li class=menu-li><span class=menu-span>èµ„æº</span><ul class="dropdown-menu menu-3"><li><a href=/zh/projects/>å¼€æºé¡¹ç›®</a></li><li><a href=/zh/conferences/>å¼€æºå³°ä¼š</a></li><li><a href=/zh/blogs/>æŠ€æœ¯åšå®¢</a></li><li><a href=/zh/videos/>è§†é¢‘èµ„æº</a></li><li><a href=/zh/learn/>äº‘åŸç”Ÿå®æˆ˜</a></li></ul></li><li class=menu-li><span class=menu-span>æ–‡æ¡£ä¸­å¿ƒ</span><ul class="dropdown-menu menu-4"><li><a href=/zh/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/zh/docs/v3.4>v3.4</a></li><li><a href=/zh/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/zh/ target=_blank rel="noopener noreferrer">æ‰©å±•ç»„ä»¶å¼€å‘</a></li><li><a href=https://kube.design/ target=_blank rel="noopener noreferrer">Kube Design</a></li></ul></li><li class=menu-li><span class=menu-span>å¼€æºç¤¾åŒº</span><ul class="dropdown-menu menu-5"><li><a href=/zh/contribution/>å‚ä¸è´¡çŒ®</a></li><li><a href=/zh/live/>ç¤¾åŒºæ´»åŠ¨</a></li><li><a href=/zh/case/>æ¡ˆä¾‹å­¦ä¹ </a></li><li><a href=/zh/partner/>åˆä½œä¼™ä¼´</a></li><li><a href=/zh/user-group/>ç”¨æˆ·å§”å‘˜ä¼š</a></li><li><a href=/zh/news/>åŠ¨æ€</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md target=_blank rel="noopener noreferrer">ç‰ˆæœ¬è®¡åˆ’</a></li><li><a href=https://www.kubesphere.io/zh/ target=_blank rel="noopener noreferrer">ä¸­å›½ç«™</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025 target=_blank rel="noopener noreferrer">å¼€æºä¹‹å¤ 2025</a></li></ul></li><li><a data-docs=ç”¨æˆ·è®ºå› href=https://ask.kubesphere.io/forum target=_blank rel="noopener noreferrer">ç”¨æˆ·è®ºå›</a></li><li><a data-docs=è®¤è¯ href=https://kubesphere.cloud/certification/ target=_blank rel="noopener noreferrer">è®¤è¯</a></li></ul><div class=right-menu><ul><li class=language-menu><div><img src=/images/header/black.svg alt>
<span>ç®€ä½“ä¸­æ–‡</span></div><ul class=dropdown-menu><li onclick='handleLangClick("zh","/zh/blogs/deploy-kubesphere-v3.4.0-on-arm-openeuler-2/")'>ç®€ä½“ä¸­æ–‡</li></ul></li><li class=github-li><div class=github-star><a class=star-btn href=https://github.com/kubesphere/kubesphere rel="noopener noreferrer" target=_blank><span class=star-img></span>&nbsp;<span>Star</span>
</a><a class=social-count href=https://github.com/kubesphere/kubesphere/stargazers rel="noopener noreferrer" target=_blank></a></div></li><li class=menu-icon><img src=/images/header/menu.svg alt></li></ul></div></div></div><div id=modal-for-menu class=modal><ul class=nav><li data-check=0 class=menu-li><span class=menu-span>åº”ç”¨åœºæ™¯</span><ul class=dropdown-menu><li><a href=/zh/devops/>æ‹¥æŠ±ä¸€ç«™å¼ DevOps å·¥ä½œæµ</a></li><li><a href=/zh/service-mesh/>åœ¨ Kubernetes è¿è¡Œå¾®æœåŠ¡</a></li><li><a href=/zh/observability/>æ„å»ºä¸°å¯Œçš„äº‘åŸç”Ÿå¯è§‚æµ‹æ€§</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>èµ„æº</span><ul class=dropdown-menu><li><a href=/zh/projects/>å¼€æºé¡¹ç›®</a></li><li><a href=/zh/conferences/>å¼€æºå³°ä¼š</a></li><li><a href=/zh/blogs/>æŠ€æœ¯åšå®¢</a></li><li><a href=/zh/videos/>è§†é¢‘èµ„æº</a></li><li><a href=/zh/learn/>äº‘åŸç”Ÿå®æˆ˜</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>æ–‡æ¡£ä¸­å¿ƒ</span><ul class=dropdown-menu><li><a href=/zh/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/zh/docs/v3.4>v3.4</a></li><li><a href=/zh/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/zh/>æ‰©å±•ç»„ä»¶å¼€å‘</a></li><li><a href=https://kube.design/>Kube Design</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>å¼€æºç¤¾åŒº</span><ul class=dropdown-menu><li><a href=/zh/contribution/>å‚ä¸è´¡çŒ®</a></li><li><a href=/zh/live/>ç¤¾åŒºæ´»åŠ¨</a></li><li><a href=/zh/case/>æ¡ˆä¾‹å­¦ä¹ </a></li><li><a href=/zh/partner/>åˆä½œä¼™ä¼´</a></li><li><a href=/zh/user-group/>ç”¨æˆ·å§”å‘˜ä¼š</a></li><li><a href=/zh/news/>åŠ¨æ€</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md>ç‰ˆæœ¬è®¡åˆ’</a></li><li><a href=https://www.kubesphere.io/zh/>ä¸­å›½ç«™</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025>å¼€æºä¹‹å¤ 2025</a></li></ul></li><li><a data-docs=ç”¨æˆ·è®ºå› href=https://ask.kubesphere.io/forum>ç”¨æˆ·è®ºå›</a></li><li><a data-docs=è®¤è¯ href=https://kubesphere.cloud/certification/>è®¤è¯</a></li></ul><div class=link-div><a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank rel="noopener noreferrer" aria-label=slack><img src=/images/header/slack-hover.svg alt>
</a><a href=https://x.com/KubeSphere target=_blank rel="noopener noreferrer" aria-label=twitter><img src=/images/header/twitter-hover.svg alt>
</a><a href=https://github.com/kubesphere/kubesphere target=_blank rel="noopener noreferrer" aria-label=github><img src=/images/header/github-hover.svg alt></a></div></div></header><script>var bindNavMouseEvent,bindScrollChangeHeader,bindClickShowMenu,bindClickModalLi,bindClickClose,language,handleLangClick,githubApiLink="https://api.github.com/repos/kubesphere/kubesphere",getStar=function(){$(".social-count").hide(),$.getJSON(githubApiLink,function(e){$(".social-count").show().html(e.stargazers_count)})};getStar(),bindNavMouseEvent=function(e,t){t||(t=$(e));var n=!1;t.mouseenter(function(){if(n)return!1;n=!0,$(this).find(".dropdown-menu").fadeIn(200,function(){n=!1})}),t.mouseleave(function(){$(this).find(".dropdown-menu").fadeOut(200)})},bindScrollChangeHeader=function(){var t=100,e=$("header");window.addEventListener("scroll",function(){var t=window.scrollY;t>0?e.addClass("navigationScroll"):e.removeClass("navigationScroll")})},bindClickShowMenu=function(){$(".menu-icon").click(function(){$("#modal-for-menu").modal()})},bindClickModalLi=function(){$(".modal .menu-li").click(function(){var e=$(this).data("check");e===0?($(this).data("check",1),$(this).find(".dropdown-menu").slideDown(200)):($(this).data("check",0),$(this).find(".dropdown-menu").slideUp(200)),$(this).find(".menu-span").toggleClass("up")})},bindClickClose=function(){$("#close-join").click(function(){$(".navigation .join-div").hide(),$(".main-section").removeClass("padding")})},language="zh",bindClickClose(),bindScrollChangeHeader(),$(".header-container .menu-li").each(function(){bindNavMouseEvent("",$(this))}),bindNavMouseEvent(".header-container .language-menu"),bindNavMouseEvent(".header-container .btn-li"),bindClickShowMenu(),bindClickModalLi(),handleLangClick=function(e,t){try{localStorage.setItem("lang",e)}catch{}location.href=t}</script><section class=main-section><div class=common-layout><div class=breadcrumb><span><a href=/zh/blogs/>æŠ€æœ¯åšå®¢</a> > </span><span>ARM ç‰ˆ openEuler 22.03 éƒ¨ç½² KubeSphere 3.4.0 ä¸å®Œå…¨æŒ‡å—ç»­ç¯‡</span></div><div class='main-div middle-div'><div class=author>è¿ç»´æœ‰æœ¯</div><span class=date>å‘å¸ƒäºï¼š2023-10-31</span>&nbsp;&nbsp;&nbsp;
<span style=font-size:14px;color:#919aa3 id=busuanzi_container_page_pv>æœ¬æ–‡æ€»é˜…è¯»é‡ï¼š<span id=busuanzi_value_page_pv></span></span><h1>ARM ç‰ˆ openEuler 22.03 éƒ¨ç½² KubeSphere 3.4.0 ä¸å®Œå…¨æŒ‡å—ç»­ç¯‡</h1><div class=share-1><div class=share><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f&text=ARM%20%e7%89%88%20openEuler%2022.03%20%e9%83%a8%e7%bd%b2%20KubeSphere%203.4.0%20%e4%b8%8d%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%e7%bb%ad%e7%af%87" target=_blank rel="noopener noreferrer"><img src=/images/share/Twitter.svg alt="twitter icon">
</a><a href="https://reddit.com/submit?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f&title=ARM%20%e7%89%88%20openEuler%2022.03%20%e9%83%a8%e7%bd%b2%20KubeSphere%203.4.0%20%e4%b8%8d%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%e7%bb%ad%e7%af%87" target=_blank rel="noopener noreferrer"><img src=/images/share/Reddit.svg alt="reddit icon">
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Facebook.svg alt="facebook icon">
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Linkedin.svg alt="linkedin icon">
</a><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f&t=ARM%20%e7%89%88%20openEuler%2022.03%20%e9%83%a8%e7%bd%b2%20KubeSphere%203.4.0%20%e4%b8%8d%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%e7%bb%ad%e7%af%87" target=_blank rel="noopener noreferrer"><img src=/images/share/HackerNews.svg alt="hackernews icon"></a></div></div><div class=content><div class=md-body><h2 id=å‰è¨€>å‰è¨€</h2><h3 id=çŸ¥è¯†ç‚¹>çŸ¥è¯†ç‚¹</h3><ul><li>å®šçº§ï¼š<strong>å…¥é—¨çº§</strong></li><li>KubeKey å®‰è£…éƒ¨ç½² ARM ç‰ˆ KubeSphere å’Œ Kubernetes</li><li>ARM ç‰ˆ KubeSphere å’Œ Kubernetes å¸¸è§é—®é¢˜</li></ul><h3 id=å®æˆ˜æœåŠ¡å™¨é…ç½®-ä¸ªäººäº‘ä¸Šæµ‹è¯•æœåŠ¡å™¨>å®æˆ˜æœåŠ¡å™¨é…ç½® (ä¸ªäººäº‘ä¸Šæµ‹è¯•æœåŠ¡å™¨)</h3><table><thead><tr><th style=text-align:center>ä¸»æœºå</th><th style=text-align:center>IP</th><th style=text-align:center>CPU</th><th style=text-align:center>å†…å­˜</th><th style=text-align:center>ç³»ç»Ÿç›˜</th><th style=text-align:center>æ•°æ®ç›˜</th><th style=text-align:center>ç”¨é€”</th></tr></thead><tbody><tr><td style=text-align:center>ks-master-1</td><td style=text-align:center>172.16.33.16</td><td style=text-align:center>6</td><td style=text-align:center>16</td><td style=text-align:center>50</td><td style=text-align:center>200</td><td style=text-align:center>KubeSphere/k8s-master</td></tr><tr><td style=text-align:center>ks-master-2</td><td style=text-align:center>172.16.33.22</td><td style=text-align:center>6</td><td style=text-align:center>16</td><td style=text-align:center>50</td><td style=text-align:center>200</td><td style=text-align:center>KubeSphere/k8s-master</td></tr><tr><td style=text-align:center>ks-master-3</td><td style=text-align:center>172.16.33.23</td><td style=text-align:center>6</td><td style=text-align:center>16</td><td style=text-align:center>50</td><td style=text-align:center>200</td><td style=text-align:center>KubeSphere/k8s-master</td></tr><tr><td style=text-align:center>åˆè®¡</td><td style=text-align:center>10</td><td style=text-align:center>18</td><td style=text-align:center>48</td><td style=text-align:center>150</td><td style=text-align:center>600+</td><td style=text-align:center></td></tr></tbody></table><h3 id=å®æˆ˜ç¯å¢ƒæ¶‰åŠè½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯>å®æˆ˜ç¯å¢ƒæ¶‰åŠè½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯</h3><ul><li><p>æœåŠ¡å™¨èŠ¯ç‰‡ï¼š<strong>Kunpeng-920</strong></p></li><li><p>æ“ä½œç³»ç»Ÿï¼š<strong>openEuler 22.03 LTS SP2 aarch64</strong></p></li><li><p>KubeSphereï¼š<strong>v3.4.0</strong></p></li><li><p>Kubernetesï¼š<strong>v1.26.5</strong></p></li><li><p>Containerdï¼š<strong>1.6.4</strong></p></li><li><p>KubeKey: <strong>v3.0.10</strong></p></li></ul><h2 id=1-æœ¬æ–‡ç®€ä»‹>1. æœ¬æ–‡ç®€ä»‹</h2><p>æœ¬æ–‡æ˜¯ <a href=https://kubesphere.io/zh/blogs/deploy-kubesphere-v3.4.0-on-arm-openeuler/ target=_blank rel="noopener noreferrer">ARM ç‰ˆ openEuler 22.03 éƒ¨ç½² KubeSphere 3.4.0 ä¸å®Œå…¨æŒ‡å—</a> çš„ç»­é›†ï¼Œå—é™äºå­—ç¬¦æ•°é‡é™åˆ¶ï¼Œå°†å®Œæ•´çš„æ–‡æ¡£æ‹†æˆäº†ä¸¤ç¯‡ã€‚</p><p>ä¸Šç¯‡æˆ‘ä»¬å®Œæˆäº† KubeSphere å’Œ Kubernetes é›†ç¾¤çš„éƒ¨ç½²ï¼Œä¸‹ç¯‡æˆ‘ä»¬ä¸»è¦ä»‹ç»ä»¥ä¸‹ä¸¤ä¸ªä¸»é¢˜å†…å®¹ï¼š</p><ul><li>éƒ¨ç½²æµ‹è¯•èµ„æºéªŒè¯ KubeSphere å’Œ Kubernetes çš„åŸºæœ¬åŠŸèƒ½æ˜¯å¦æ­£å¸¸</li><li>è§£å†³ ARM ç‰ˆ KubeSphere å’Œ Kubernetes æœåŠ¡ç»„ä»¶å¼‚å¸¸çš„é—®é¢˜ï¼ˆ<strong>æœ¬æ–‡æ ¸å¿ƒä»·å€¼</strong>ï¼‰</li></ul><p>KubeSphere å’Œ Kubernetes åœ¨ ARM æ¶æ„ å’Œ X86 æ¶æ„çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºæ‰€æœ‰æœåŠ¡ä½¿ç”¨çš„<strong>å®¹å™¨é•œåƒæ¶æ„ç±»å‹</strong>çš„ä¸åŒï¼ŒKubeSphere å¼€æºç‰ˆå¯¹äº ARM æ¶æ„çš„é»˜è®¤æ”¯æŒå¯ä»¥å®ç° KubeSphere-Core åŠŸèƒ½ï¼Œå³å¯ä»¥å®ç°æœ€å°åŒ–çš„ KubeSphere å’Œå®Œæ•´çš„ Kubernetes é›†ç¾¤çš„éƒ¨ç½²ã€‚å½“å¯ç”¨äº† KubeSphere å¯æ’æ‹”ç»„ä»¶æ—¶ï¼Œä¼šé‡åˆ°ä¸ªåˆ«ç»„ä»¶éƒ¨ç½²å¤±è´¥çš„æƒ…å†µï¼Œéœ€è¦æˆ‘ä»¬æ‰‹å·¥æ›¿æ¢å®˜æ–¹æˆ–æ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„ ARM ç‰ˆé•œåƒæˆ–æ˜¯æ ¹æ®å®˜æ–¹æºç æ‰‹å·¥æ„å»º ARM ç‰ˆé•œåƒã€‚</p><p>æœ¬æ–‡è¯¦ç»†çš„è®°å½•äº†åœ¨å®Œæˆæœ€ç»ˆéƒ¨ç½²çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„å„ç§é—®é¢˜æŠ¥é”™åŠç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚ç”±äºèƒ½åŠ›æœ‰é™ï¼Œæœ¬æ–‡ä¸­æ‰€é‡åˆ°çš„æ¶æ„ä¸å…¼å®¹çš„é—®é¢˜ï¼Œå‡é‡‡ç”¨äº†æ‰‹å·¥æ›¿æ¢ç¬¬ä¸‰æ–¹ä»“åº“æˆ–æ˜¯å®˜æ–¹å…¶ä»–ä»“åº“ç›¸åŒæˆ–æ˜¯ç›¸ä¼¼ ARM ç‰ˆæœ¬é•œåƒçš„æ–¹æ¡ˆã€‚</p><p>å»ºè®®è®¡åˆ’åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨çš„è¯»è€…æœ€å¥½èƒ½å…·å¤‡ä½¿ç”¨å®˜æ–¹æºç åŠ DockerFile æ„å»ºä¸ X86 ç‰ˆæœ¬å®Œå…¨ç›¸åŒçš„ ARM ç‰ˆå®¹å™¨é•œåƒçš„èƒ½åŠ›ï¼Œä¸è¦æ›¿æ¢ç›¸è¿‘ç‰ˆæœ¬æˆ–æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹é•œåƒã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºæœ¬æ–‡å¹¶æ²¡æœ‰æ¶‰åŠåˆ©ç”¨å®˜æ–¹æºç åŠ Dockerfile æ„å»º ARM é•œåƒçš„ç›¸å…³å†…å®¹ï¼Œæ‰€ä»¥æ‰å–åä¸º<strong>ä¸å®Œå…¨æŒ‡å—</strong>ã€‚</p><h2 id=2-å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸åŠè§£å†³æ–¹æ¡ˆ>2. å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸åŠè§£å†³æ–¹æ¡ˆ</h2><h3 id=21-kubernetes-ç›¸å…³ç»„ä»¶äºŒè¿›åˆ¶åŒ…æ ¼å¼ä¸åŒ¹é…>2.1 Kubernetes ç›¸å…³ç»„ä»¶äºŒè¿›åˆ¶åŒ…æ ¼å¼ä¸åŒ¹é…</h3><ul><li>æŠ¥é”™ç°è±¡</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># containerd å¯åŠ¨å¤±è´¥</span>
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:00 KP-Euler-ZH-01 systemd<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: Starting containerd container runtime...
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:00 KP-Euler-ZH-01 <span style=color:#f92672>(</span>ntainerd<span style=color:#f92672>)[</span>27271<span style=color:#f92672>]</span>: containerd.service: Failed to execute /usr/bin/containerd: Exec format error
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:00 KP-Euler-ZH-01 <span style=color:#f92672>(</span>ntainerd<span style=color:#f92672>)[</span>27271<span style=color:#f92672>]</span>: containerd.service: Failed at step EXEC spawning /usr/bin/containerd: Exec format error
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:00 KP-Euler-ZH-01 systemd<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: containerd.service: Main process exited, code<span style=color:#f92672>=</span>exited, status<span style=color:#f92672>=</span>203/EXEC
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:00 KP-Euler-ZH-01 systemd<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: containerd.service: Failed with result <span style=color:#e6db74>&#39;exit-code&#39;</span>.
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:00 KP-Euler-ZH-01 systemd<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: Failed to start containerd container runtime.
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:05 KP-Euler-ZH-01 systemd<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: containerd.service: Scheduled restart job, restart counter is at 241.
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>12</span> 10:44:05 KP-Euler-ZH-01 systemd<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: Stopped containerd container runtime.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹ kk ä¸‹è½½çš„äºŒè¿›åˆ¶åŒ…</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 kubekey<span style=color:#f92672>]</span><span style=color:#75715e># ll kubekey/kube/v1.26.5/ -R</span>
</span></span><span style=display:flex><span>kubekey/kube/v1.26.5/:
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#ae81ff>2</span> root root <span style=color:#ae81ff>4096</span> Oct <span style=color:#ae81ff>12</span> 10:18 amd64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubekey/kube/v1.26.5/amd64:
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>211048</span>
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>46788608</span> Oct <span style=color:#ae81ff>12</span> 10:04 kubeadm
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>48046080</span> Oct <span style=color:#ae81ff>12</span> 10:18 kubectl
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>121277432</span> Oct <span style=color:#ae81ff>12</span> 10:04 kubelet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 kubekey<span style=color:#f92672>]</span><span style=color:#75715e># ll kubekey/containerd/1.6.4/ -R</span>
</span></span><span style=display:flex><span>kubekey/containerd/1.6.4/:
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#ae81ff>2</span> root root <span style=color:#ae81ff>4096</span> Oct <span style=color:#ae81ff>12</span> 10:20 amd64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubekey/containerd/1.6.4/amd64:
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>43396</span>
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>44436699</span> Oct <span style=color:#ae81ff>12</span> 10:21 containerd-1.6.4-linux-amd64.tar.gz
</span></span></code></pre></div><ul><li>è§£å†³æ–¹æ¡ˆ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kk é»˜è®¤ä¸‹è½½çš„äºŒè¿›åˆ¶åŒ…éƒ½æ˜¯ amd64 æ ¼å¼çš„ä¸é€‚ç”¨äº ARM ç¯å¢ƒï¼Œéœ€è¦æ‰‹å·¥ä¿®æ”¹åˆ›å»ºé›†ç¾¤çš„é…ç½®æ–‡ä»¶
</span></span><span style=display:flex><span>åœ¨ spec.hosts çš„ä¸»æœºé…ç½®ä¸­å¢åŠ èŠ‚ç‚¹çš„ arch å±æ€§
</span></span></code></pre></div><ul><li>æ­£ç¡®çš„å®‰è£…æ•ˆæœ</li></ul><p>å®‰è£…è¿‡ç¨‹æ—¥å¿—è¾“å‡ºæ¯”è¾ƒå¤šï¼Œæœ¬æ–‡åªå±•ç¤ºé‡è¦çš„ä¸€ç‚¹ï¼Œä¸€å®šè¦è§‚å¯Ÿä¸‹è½½äºŒè¿›åˆ¶åŒ…çš„æ—¶å€™ï¼Œæ ¼å¼ä¸º <strong>arm64</strong>ï¼Œå…¶å®ƒçš„æ—¥å¿—è¾“å‡ºï¼Œä¸ºäº†èŠ‚çœç¯‡å¹…è¿™é‡Œå°±ä¸å±•ç¤ºäº†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Continue this installation? <span style=color:#f92672>[</span>yes/no<span style=color:#f92672>]</span>: yes
</span></span><span style=display:flex><span>10:49:21 CST success: <span style=color:#f92672>[</span>LocalHost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>10:49:21 CST <span style=color:#f92672>[</span>NodeBinariesModule<span style=color:#f92672>]</span> Download installation binaries
</span></span><span style=display:flex><span>10:49:21 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 kubeadm v1.26.5 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 43.3M  <span style=color:#ae81ff>100</span> 43.3M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1035k      <span style=color:#ae81ff>0</span>  0:00:42  0:00:42 --:--:-- 1212k
</span></span><span style=display:flex><span>10:50:04 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 kubelet v1.26.5 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span>  111M  <span style=color:#ae81ff>100</span>  111M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1018k      <span style=color:#ae81ff>0</span>  0:01:51  0:01:51 --:--:-- 1027k
</span></span><span style=display:flex><span>10:51:56 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 kubectl v1.26.5 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 44.3M  <span style=color:#ae81ff>100</span> 44.3M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1022k      <span style=color:#ae81ff>0</span>  0:00:44  0:00:44 --:--:-- 1081k
</span></span><span style=display:flex><span>10:52:41 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 helm v3.9.0 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 43.6M  <span style=color:#ae81ff>100</span> 43.6M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1035k      <span style=color:#ae81ff>0</span>  0:00:43  0:00:43 --:--:-- 1181k
</span></span><span style=display:flex><span>10:53:24 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 kubecni v1.2.0 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 36.2M  <span style=color:#ae81ff>100</span> 36.2M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1039k      <span style=color:#ae81ff>0</span>  0:00:35  0:00:35 --:--:-- 1236k
</span></span><span style=display:flex><span>10:54:00 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 crictl v1.24.0 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 12.7M  <span style=color:#ae81ff>100</span> 12.7M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1032k      <span style=color:#ae81ff>0</span>  0:00:12  0:00:12 --:--:-- 1080k
</span></span><span style=display:flex><span>10:54:13 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 etcd v3.4.13 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 15.3M  <span style=color:#ae81ff>100</span> 15.3M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1026k      <span style=color:#ae81ff>0</span>  0:00:15  0:00:15 --:--:-- 1074k
</span></span><span style=display:flex><span>10:54:28 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 containerd 1.6.4 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 31.9M  <span style=color:#ae81ff>100</span> 31.9M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1015k      <span style=color:#ae81ff>0</span>  0:00:32  0:00:32 --:--:-- 1021k
</span></span><span style=display:flex><span>10:55:01 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 runc v1.1.1 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 8837k  <span style=color:#ae81ff>100</span> 8837k    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1099k      <span style=color:#ae81ff>0</span>  0:00:08  0:00:08 --:--:-- 1182k
</span></span><span style=display:flex><span>10:55:09 CST message: <span style=color:#f92672>[</span>localhost<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>downloading arm64 calicoctl v3.23.2 ...
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> 55.5M  <span style=color:#ae81ff>100</span> 55.5M    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>  1030k      <span style=color:#ae81ff>0</span>  0:00:55  0:00:55 --:--:-- 1214k
</span></span><span style=display:flex><span>10:56:04 CST success: <span style=color:#f92672>[</span>LocalHost<span style=color:#f92672>]</span>
</span></span></code></pre></div><h2 id=3-å¼‚å¸¸ç»„ä»¶åŠè§£å†³æ–¹æ¡ˆ>3. å¼‚å¸¸ç»„ä»¶åŠè§£å†³æ–¹æ¡ˆ</h2><p>ç”±äº KubeSphere ç¤¾åŒºç‰ˆå¯¹ ARM çš„æ”¯æŒå¹¶ä¸å®Œç¾ï¼Œé»˜è®¤ä»…èƒ½ä¿è¯ KubeSphere-Core åœ¨ ARM æ¶æ„ä¸‹èƒ½éƒ¨ç½²æˆåŠŸï¼Œå½“å¯ç”¨äº†æ’ä»¶åï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ’ä»¶éƒ½æœ‰ ARM é•œåƒï¼Œå½“æ²¡æœ‰å¯¹åº” ARM ç‰ˆæœ¬é•œåƒæ—¶ï¼Œç³»ç»Ÿæ‹‰å– x86 ç‰ˆæœ¬çš„é•œåƒåˆ›å»ºå¹¶å¯åŠ¨æœåŠ¡ï¼Œå› æ­¤ä¼šå¯¼è‡´æ¶æ„ä¸åŒå¼•å‘çš„æœåŠ¡å¯åŠ¨å¼‚å¸¸ï¼Œéœ€è¦æ ¹æ®æŠ¥é”™ä¿¡æ¯è§£å†³å¼‚å¸¸ã€‚</p><p>è§£å†³å¼‚å¸¸çš„æ–¹æ¡ˆæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>ä½¿ç”¨å¼‚å¸¸ç»„ä»¶å®˜æ–¹å…¶ä»–ä»“åº“æˆ–æ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„<strong>ç›¸åŒç‰ˆæœ¬</strong>çš„ ARM é•œåƒï¼ˆ<strong>æ¬¡ä¼˜</strong>æ–¹æ¡ˆï¼Œä¼˜å…ˆåœ¨å®˜æ–¹æ‰¾ï¼Œå®åœ¨æ²¡æœ‰å†æ‰¾ç¬¬ä¸‰æ–¹ç”¨æˆ·æä¾›çš„é•œåƒï¼‰</li><li>ä½¿ç”¨å¼‚å¸¸ç»„ä»¶å®˜æ–¹å…¶ä»–ä»“åº“æˆ–æ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„<strong>ç›¸è¿‘ç‰ˆæœ¬</strong>çš„ ARM é•œåƒï¼ˆ<strong>ä¿åº•</strong>æ–¹æ¡ˆï¼Œä»…é™äºç ”å‘æµ‹è¯•ç¯å¢ƒï¼‰</li><li>ä½¿ç”¨å®˜æ–¹ç»„ä»¶æºä»£ç å’Œ Dockerfile <strong>è‡ªå·±æ„å»º</strong> ARM é•œåƒï¼ˆ<strong>æœ€ä¼˜</strong>æ–¹æ¡ˆï¼Œå› æš‚æ—¶èƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥æœ¬æ–‡å¹¶æœªæ¶‰åŠï¼Œåç»­å¯èƒ½ä¼šæœ‰æ›´æ–°ï¼‰</li></ul><p>æœ¬å°èŠ‚çš„å†…å®¹å®Œæ•´çš„è®°å½•äº†åœ¨æ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠç›¸åº”çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯æœ¬æ–‡çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚</p><h3 id=31-æŸ¥çœ‹å¼‚å¸¸ç»„ä»¶å¯¹åº”çš„-pod>3.1 æŸ¥çœ‹å¼‚å¸¸ç»„ä»¶å¯¹åº”çš„ Pod</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A -o wide | grep CrashLoopBackOff | grep -v weave</span>
</span></span><span style=display:flex><span>argocd                         devops-argocd-applicationset-controller-8486797d4d-72888   0/1     CrashLoopBackOff        <span style=color:#ae81ff>24</span> <span style=color:#f92672>(</span>5m4s ago<span style=color:#f92672>)</span>    107m   10.233.103.12   ks-master-1   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>istio-system                   istiod-1-14-6-6576b8664b-28c44                             0/1     CrashLoopBackOff        <span style=color:#ae81ff>25</span> <span style=color:#f92672>(</span>43s ago<span style=color:#f92672>)</span>     107m   10.233.102.8    ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>kubesphere-controls-system     default-http-backend-767cdb5fdc-ptqhh                      0/1     CrashLoopBackOff        <span style=color:#ae81ff>24</span> <span style=color:#f92672>(</span>5m5s ago<span style=color:#f92672>)</span>    108m   10.233.93.9     ks-master-3   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>kubesphere-devops-system       devops-jenkins-774fdb948b-4rk56                            0/1     Init:CrashLoopBackOff   <span style=color:#ae81ff>23</span> <span style=color:#f92672>(</span>4m57s ago<span style=color:#f92672>)</span>   107m   10.233.93.18    ks-master-3   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><p>å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·åœ¨åˆå§‹éƒ¨ç½²çš„æ—¶å€™å°±é€‰æ‹©äº† weave ç»„ä»¶ï¼Œåœ¨å¤±è´¥çš„ Pod åˆ—è¡¨ä¸­ä¹Ÿä¼šæœ‰ weave å‘½åç©ºé—´ä¸‹çš„ç›¸åº” Podã€‚å› ä¸ºï¼Œweave å·²ç»è¿‡æ—¶ä¸”æ— æ³•è§£å†³ï¼Œæ‰€ä»¥åœ¨è¿‡æ»¤å¼‚å¸¸ Pod çš„æ—¶å€™æ’é™¤äº† weave ç›¸åº”çš„ Podã€‚</p><p>ä¸Šé¢çš„è¾“å‡ºç»“æœåœ¨æ’é™¤ weave ä»¥åï¼Œä¹Ÿæ²¡æœ‰åŒ…å«å…¨éƒ¨å¼‚å¸¸ç»„ä»¶ã€‚å› ä¸ºåœ¨é‡‡é›†è¿™ä¸ªç»“æœä¹‹å‰ï¼Œæˆ‘å·²ç»è§£å†³äº†å…¶ä»–å‡ ä¸ªç»„ä»¶çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å…ˆæŒ‰ä¸Šé¢è¾“å‡ºçš„ç»“æœæ’åºæ¥å¤„ç†å¼‚å¸¸ï¼Œä¸åœ¨ä¸Šé¢ç»“æœä¸­çš„å¼‚å¸¸ç»„ä»¶çš„é—®é¢˜æŠ¥é”™åŠè§£å†³è¿‡ç¨‹æ”¾åœ¨äº†åé¢ï¼Œå…·ä½“ç»†èŠ‚è¯·çœ‹ä¸‹æ–‡ã€‚</p><h3 id=32-è§£å†³-argo-cd-å¼‚å¸¸>3.2 è§£å†³ Argo CD å¼‚å¸¸</h3><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A -o wide | grep -v Running | grep -v Completed</span>
</span></span><span style=display:flex><span>NAMESPACE                      NAME                                                           READY   STATUS             RESTARTS           AGE     IP               NODE          NOMINATED NODE   READINESS GATES
</span></span><span style=display:flex><span>argocd                         devops-argocd-applicationset-controller-8486797d4d-72888       0/1     CrashLoopBackOff   <span style=color:#ae81ff>1119</span> <span style=color:#f92672>(</span>4m4s ago<span style=color:#f92672>)</span>    3d23h   10.233.103.12    ks-master-1   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>istio-system                   istiod-1-14-6-6576b8664b-28c44                                 0/1     CrashLoopBackOff   <span style=color:#ae81ff>1119</span> <span style=color:#f92672>(</span>3m37s ago<span style=color:#f92672>)</span>   3d23h   10.233.102.8     ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—ï¼ˆ<strong>å…¸å‹çš„äºŒè¿›åˆ¶ç¨‹åºæ¶æ„ä¸åŒ¹é…é€ æˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ x86 çš„ç¨‹åºï¼Œåœ¨ ARM ä¸Šè¿è¡Œ</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs --all-containers devops-argocd-applicationset-controller-8486797d4d-72888 -n argocd</span>
</span></span><span style=display:flex><span>exec /usr/local/bin/applicationset-controller: exec format error
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl describe pods devops-argocd-applicationset-controller-8486797d4d-72888 -n argocd | grep Image:</span>
</span></span><span style=display:flex><span>    Image:         registry.cn-beijing.aliyuncs.com/kubesphereio/argocd-applicationset:v0.4.1
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/argocd-applicationset:v0.4.1 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span></code></pre></div><ul><li>è·å–é€‚é…çš„ ARM ç‰ˆé•œåƒï¼ˆ<strong>ç›¸åŒç‰ˆæœ¬ KubeSphere å®˜æ–¹ ARM ç‰ˆé•œåƒ</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æ‰¾ä¸ªç›¸åŒç‰ˆæœ¬çš„ ARM æ¶æ„çš„é•œåƒ</span>
</span></span><span style=display:flex><span>crictl pull kubespheredev/argocd-applicationset-arm64:v0.4.1
</span></span></code></pre></div><ul><li>é•œåƒé‡æ–°æ‰“ tagï¼ˆ<strong>ä¸ºäº†ä¿æŒé•œåƒåç§°é£æ ¼ä¸€è‡´</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ctr -n k8s.io images tag docker.io/kubespheredev/argocd-applicationset-arm64:v0.4.1 registry.cn-beijing.aliyuncs.com/kubesphereio/argocd-applicationset-arm64:v0.4.1
</span></span></code></pre></div><ul><li>é‡æ–°éƒ¨ç½²ç»„ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># ä¿®æ”¹ Deployment ä½¿ç”¨çš„é•œåƒï¼Œå¹¶é‡å¯</span>
</span></span><span style=display:flex><span>kubectl set image deployment/devops-argocd-applicationset-controller applicationset-controller<span style=color:#f92672>=</span>registry.cn-beijing.aliyuncs.com/kubesphereio/argocd-applicationset-arm64:v0.4.1 -n argocd
</span></span><span style=display:flex><span>kubectl rollout restart deployment/devops-argocd-applicationset-controller -n argocd
</span></span></code></pre></div><ul><li>éªŒè¯æ–°çš„ Pod åˆ›å»ºå¹¶å¯åŠ¨æˆåŠŸ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -o wide -n argocd | grep applicationset-controller</span>
</span></span><span style=display:flex><span>devops-argocd-applicationset-controller-864f464855-64zvf   1/1     Running   <span style=color:#ae81ff>0</span>          56s     10.233.103.125   ks-master-1   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><h3 id=33-è§£å†³-istio-å¼‚å¸¸>3.3 è§£å†³ Istio å¼‚å¸¸</h3><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A -o wide | grep -v Running | grep -v Completed</span>
</span></span><span style=display:flex><span>NAMESPACE                      NAME                                                           READY   STATUS             RESTARTS           AGE     IP               NODE          NOMINATED NODE   READINESS GATES
</span></span><span style=display:flex><span>istio-system                   istiod-1-14-6-6576b8664b-28c44                                 0/1     CrashLoopBackOff   <span style=color:#ae81ff>1122</span> <span style=color:#f92672>(</span>3m10s ago<span style=color:#f92672>)</span>   3d23h   10.233.102.8     ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs --all-containers istiod-1-14-6-6576b8664b-28c44 -n istio-system</span>
</span></span><span style=display:flex><span>exec /usr/local/bin/pilot-discovery: exec format error
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl describe pods istiod-1-14-6-6576b8664b-28c44 -n istio-system | grep Image:</span>
</span></span><span style=display:flex><span>    Image:         registry.cn-beijing.aliyuncs.com/kubesphereio/pilot:1.14.6
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-2 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/pilot:1.14.6 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span></code></pre></div><ul><li>è·å–é€‚é…çš„ ARM ç‰ˆé•œåƒ (<strong>Istio å®˜æ–¹ç›¸è¿‘ç‰ˆæœ¬ ARM é•œåƒ</strong>)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æ‰¾ä¸ªç›¸è¿‘ç‰ˆæœ¬çš„ ARM æ¶æ„çš„é•œåƒï¼ˆå®˜æ–¹æ²¡æœ‰ 1.14.6 çš„ ARM é•œåƒï¼Œä» 1.15 å¼€å§‹æ‰åŸç”Ÿæ”¯æŒ ARMï¼Œæ‰€ä»¥ç”¨äº† 1.15.7 ä»£æ›¿ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®è‡ªå·±ç”¨ 1.14.6 ç‰ˆæœ¬çš„æºç ç¼–è¯‘æ„å»ºï¼‰</span>
</span></span><span style=display:flex><span>crictl pull istio/pilot:1.15.7 --platform arm64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ç¡®ä¿é•œåƒæ¶æ„æ˜¯ arm64</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-2 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/pilot:1.15.7 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;arm64&#34;</span>,
</span></span></code></pre></div><ul><li>é•œåƒé‡æ–°æ‰“ tag</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ctr -n k8s.io images tag docker.io/istio/pilot:1.15.7 registry.cn-beijing.aliyuncs.com/kubesphereio/pilot:1.15.7
</span></span></code></pre></div><ul><li>é‡æ–°éƒ¨ç½²ç»„ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># ä¿®æ”¹ Deployment ä½¿ç”¨çš„é•œåƒï¼Œå¹¶é‡å¯</span>
</span></span><span style=display:flex><span>kubectl set image deployment/istiod-1-14-6 discovery<span style=color:#f92672>=</span>registry.cn-beijing.aliyuncs.com/kubesphereio/pilot:1.15.7 -n istio-system
</span></span><span style=display:flex><span>kubectl rollout restart deployment/istiod-1-14-6 -n istio-system
</span></span></code></pre></div><ul><li>éªŒè¯æ–°çš„ Pod åˆ›å»ºå¹¶å¯åŠ¨æˆåŠŸ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># ç¡®ä¿æ–°çš„ Pod åˆ›å»ºå¹¶å¯åŠ¨æˆåŠŸ</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -o wide -n istio-system | grep istio</span>
</span></span><span style=display:flex><span>istiod-1-14-6-58ff9f7cc-59djl      0/1     Pending   <span style=color:#ae81ff>0</span>          7m59s   &lt;none&gt;           &lt;none&gt;        &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>istiod-1-14-6-747f5b86b-bg29h      1/1     Running   <span style=color:#ae81ff>0</span>          15m     10.233.102.122   ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ä¸Šé¢çš„ç»“æœä¸­ï¼Œæœ‰ä¸€ä¸ª POd ä¸€ç›´å¤„äº Pending çŠ¶æ€ï¼ŒæŸ¥çœ‹å…·ä½“åŸå› </span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl events pod --for=pod/istiod-1-14-6-58ff9f7cc-59djl -n istio-system</span>
</span></span><span style=display:flex><span>LAST SEEN               TYPE      REASON             OBJECT                              MESSAGE
</span></span><span style=display:flex><span>3m26s <span style=color:#f92672>(</span>x2 over 8m42s<span style=color:#f92672>)</span>   Warning   FailedScheduling   Pod/istiod-1-14-6-58ff9f7cc-59djl   0/3 nodes are available: <span style=color:#ae81ff>3</span> Insufficient cpu. preemption: 0/3 nodes are available: <span style=color:#ae81ff>3</span> No preemption victims found <span style=color:#66d9ef>for</span> incoming pod..
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ç»“æœæ˜¾ç¤º CPU èµ„æºä¸è¶³ï¼ŒéªŒè¯</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># for i in {1..3};do echo ks-master-$i Cpu Usage: &amp;&amp; kubectl describe node ks-master-$i | grep cpu | grep -v cpu: ;done</span>
</span></span><span style=display:flex><span>ks-master-1 Cpu Usage:
</span></span><span style=display:flex><span>  cpu                3317m <span style=color:#f92672>(</span>92%<span style=color:#f92672>)</span>   10500m <span style=color:#f92672>(</span>291%<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>ks-master-2 Cpu Usage:
</span></span><span style=display:flex><span>  cpu                3587m <span style=color:#f92672>(</span>99%<span style=color:#f92672>)</span>   11910m <span style=color:#f92672>(</span>330%<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>ks-master-3 Cpu Usage:
</span></span><span style=display:flex><span>  cpu                3317m <span style=color:#f92672>(</span>92%<span style=color:#f92672>)</span>   10800m <span style=color:#f92672>(</span>300%<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¢åŠ æœåŠ¡å™¨ CPU èµ„æºï¼Œé‡å¯æœåŠ¡å™¨åï¼Œå†æ¬¡æŸ¥çœ‹</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -o wide -n istio-system | grep istio</span>
</span></span><span style=display:flex><span>istiod-1-14-6-6d4dbc56df-n5z9g     1/1     Running             <span style=color:#ae81ff>0</span>             17s   10.233.102.149   ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><h3 id=34-è§£å†³-http-backupend-å¼‚å¸¸>3.4 è§£å†³ http-backupend å¼‚å¸¸</h3><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A -o wide | grep -v Running | grep -v Completed</span>
</span></span><span style=display:flex><span>NAMESPACE                      NAME                                                           READY   STATUS             RESTARTS           AGE     IP               NODE          NOMINATED NODE   READINESS GATES
</span></span><span style=display:flex><span>kubesphere-controls-system     default-http-backend-767cdb5fdc-ptqhh                          0/1     CrashLoopBackOff   <span style=color:#ae81ff>1108</span> <span style=color:#f92672>(</span>4m7s ago<span style=color:#f92672>)</span>    3d22h   10.233.93.9      ks-master-3   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs --all-containers default-http-backend-767cdb5fdc-ptqhh -n kubesphere-controls-system</span>
</span></span><span style=display:flex><span>exec /server: exec format error
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl describe pods default-http-backend-767cdb5fdc-ptqh -n kubesphere-controls-system | grep Image:</span>
</span></span><span style=display:flex><span>    Image:          registry.cn-beijing.aliyuncs.com/kubesphereio/defaultbackend-amd64:1.4
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-3 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/defaultbackend-amd64:1.4 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span></code></pre></div><ul><li>è·å–é€‚é…çš„ ARM ç‰ˆé•œåƒï¼ˆ<strong>ç¬¬ä¸‰æ–¹ç›¸åŒç‰ˆæœ¬ ARM é•œåƒ</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>crictl pull mirrorgooglecontainers/defaultbackend-arm64:1.4
</span></span></code></pre></div><ul><li>é•œåƒé‡æ–°æ‰“ tagï¼ˆ<strong>ä¸ºäº†ä¿æŒé•œåƒåç§°é£æ ¼ä¸€è‡´</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ctr -n k8s.io images tag docker.io/mirrorgooglecontainers/defaultbackend-arm64:1.4 registry.cn-beijing.aliyuncs.com/kubesphereio/defaultbackend-arm64:1.4
</span></span></code></pre></div><ul><li>é‡æ–°éƒ¨ç½²ç»„ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># ä¿®æ”¹ Deployment ä½¿ç”¨çš„é•œåƒï¼Œå¹¶é‡å¯</span>
</span></span><span style=display:flex><span>kubectl set image deployment/default-http-backend default-http-backend<span style=color:#f92672>=</span>registry.cn-beijing.aliyuncs.com/kubesphereio/defaultbackend-arm64:1.4 -n kubesphere-controls-system
</span></span><span style=display:flex><span>kubectl rollout restart deployment/default-http-backend -n kubesphere-controls-system
</span></span></code></pre></div><ul><li>éªŒè¯æ–°çš„ Pod åˆ›å»ºå¹¶å¯åŠ¨æˆåŠŸ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -o wide -n kubesphere-controls-system | grep default-http-backend</span>
</span></span><span style=display:flex><span>default-http-backend-694d6557b5-h674b   1/1     Running   <span style=color:#ae81ff>0</span>          14m     10.233.102.120   ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><h3 id=35-è§£å†³-jenkins-å¼‚å¸¸>3.5 è§£å†³ Jenkins å¼‚å¸¸</h3><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs --all-containers devops-jenkins-774fdb948b-4rk56 -n kubesphere-devops-system</span>
</span></span><span style=display:flex><span>exec /bin/sh: exec format error
</span></span><span style=display:flex><span>Error from server <span style=color:#f92672>(</span>BadRequest<span style=color:#f92672>)</span>: container <span style=color:#e6db74>&#34;devops-jenkins&#34;</span> in pod <span style=color:#e6db74>&#34;devops-jenkins-774fdb948b-4rk56&#34;</span> is waiting to start: PodInitializing
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„äº‹ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl events devops-jenkins-774fdb948b-4rk56 -n kubesphere-devops-system</span>
</span></span><span style=display:flex><span>LAST SEEN             TYPE      REASON             OBJECT                                MESSAGE
</span></span><span style=display:flex><span>40m                   Normal    SuccessfulCreate   CronJob/devops                        Created job devops-28284990
</span></span><span style=display:flex><span>40m                   Normal    SuccessfulCreate   Job/devops-28284990                   Created pod: devops-28284990-59cvp
</span></span><span style=display:flex><span>40m                   Normal    Scheduled          Pod/devops-28284990-59cvp             Successfully assigned kubesphere-devops-system/devops-28284990-59cvp to ks-master-1
</span></span><span style=display:flex><span>40m                   Normal    Pulling            Pod/devops-28284990-59cvp             Pulling image <span style=color:#e6db74>&#34;registry.cn-beijing.aliyuncs.com/kubesphereio/devops-tools:ks-v3.4.0&#34;</span>
</span></span><span style=display:flex><span>40m                   Normal    Pulled             Pod/devops-28284990-59cvp             Successfully pulled image <span style=color:#e6db74>&#34;registry.cn-beijing.aliyuncs.com/kubesphereio/devops-tools:ks-v3.4.0&#34;</span> in 427.197317ms <span style=color:#f92672>(</span>427.222677ms including waiting<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>40m                   Normal    Created            Pod/devops-28284990-59cvp             Created container pipeline-run-gc
</span></span><span style=display:flex><span>40m                   Normal    Started            Pod/devops-28284990-59cvp             Started container pipeline-run-gc
</span></span><span style=display:flex><span>40m                   Normal    Completed          Job/devops-28284990                   Job completed
</span></span><span style=display:flex><span>40m                   Normal    SawCompletedJob    CronJob/devops                        Saw completed job: devops-28284990, status: Complete
</span></span><span style=display:flex><span>10m                   Normal    SuccessfulCreate   CronJob/devops                        Created job devops-28285020
</span></span><span style=display:flex><span>10m                   Normal    Scheduled          Pod/devops-28285020-zqd72             Successfully assigned kubesphere-devops-system/devops-28285020-zqd72 to ks-master-1
</span></span><span style=display:flex><span>10m                   Normal    SuccessfulCreate   Job/devops-28285020                   Created pod: devops-28285020-zqd72
</span></span><span style=display:flex><span>10m                   Normal    Started            Pod/devops-28285020-zqd72             Started container pipeline-run-gc
</span></span><span style=display:flex><span>10m                   Normal    Created            Pod/devops-28285020-zqd72             Created container pipeline-run-gc
</span></span><span style=display:flex><span>10m                   Normal    Pulled             Pod/devops-28285020-zqd72             Successfully pulled image <span style=color:#e6db74>&#34;registry.cn-beijing.aliyuncs.com/kubesphereio/devops-tools:ks-v3.4.0&#34;</span> in 423.190976ms <span style=color:#f92672>(</span>423.205056ms including waiting<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>10m                   Normal    Pulling            Pod/devops-28285020-zqd72             Pulling image <span style=color:#e6db74>&#34;registry.cn-beijing.aliyuncs.com/kubesphereio/devops-tools:ks-v3.4.0&#34;</span>
</span></span><span style=display:flex><span>10m                   Normal    Completed          Job/devops-28285020                   Job completed
</span></span><span style=display:flex><span>10m                   Normal    SuccessfulDelete   CronJob/devops                        Deleted job devops-28284930
</span></span><span style=display:flex><span>10m                   Normal    SawCompletedJob    CronJob/devops                        Saw completed job: devops-28285020, status: Complete
</span></span><span style=display:flex><span>83s <span style=color:#f92672>(</span>x431 over 95m<span style=color:#f92672>)</span>   Warning   BackOff            Pod/devops-jenkins-774fdb948b-4rk56   Back-off restarting failed container copy-default-config in pod devops-jenkins-774fdb948b-4rk56_kubesphere-devops-system<span style=color:#f92672>(</span>d4e1ad50-0930-4ea7-823d-200bd90df471<span style=color:#f92672>)</span>
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl describe pods devops-jenkins-774fdb948b-4rk56 -n kubesphere-devops-system | grep Image:</span>
</span></span><span style=display:flex><span>    Image:         registry.cn-beijing.aliyuncs.com/kubesphereio/ks-jenkins:v3.4.0-2.319.3-1
</span></span><span style=display:flex><span>    Image:         registry.cn-beijing.aliyuncs.com/kubesphereio/ks-jenkins:v3.4.0-2.319.3-1
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-3 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/ks-jenkins:v3.4.0-2.319.3-1 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span></code></pre></div><ul><li>è·å–é€‚é…çš„ ARM ç‰ˆé•œåƒï¼ˆ<strong>ç›¸è¿‘ç‰ˆæœ¬ KubeSphere å®˜æ–¹ ARM ç‰ˆé•œåƒ</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æ²¡æœ‰æ‰¾åˆ°åŒç‰ˆæœ¬çš„ï¼Œåªèƒ½æ‰¾äº†ä¸€ä¸ªç›¸è¿‘ç‰ˆæœ¬çš„ ARM æ¶æ„çš„é•œåƒ</span>
</span></span><span style=display:flex><span>crictl pull docker.io/kubesphere/ks-jenkins:v3.4.1-2.319.3  --platform arm64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ç¡®ä¿ image æ¶æ„æ˜¯ arm64</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-3 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/ks-jenkins:v3.4.0-2.319.3-1 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;arm64&#34;</span>,
</span></span></code></pre></div><ul><li>é•œåƒé‡æ–°æ‰“ tagï¼ˆ<strong>ä¸ºäº†ä¿æŒé•œåƒåé£æ ¼ä¸€è‡´</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>crictl rmi registry.cn-beijing.aliyuncs.com/kubesphereio/ks-jenkins:v3.4.0-2.319.3-1
</span></span><span style=display:flex><span>ctr -n k8s.io images tag docker.io/kubesphere/ks-jenkins:v3.4.1-2.319.3 registry.cn-beijing.aliyuncs.com/kubesphereio/ks-jenkins:v3.4.0-2.319.3-1
</span></span></code></pre></div><ul><li>é‡æ–°éƒ¨ç½²ç»„ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æŸ¥æ‰¾ç°æœ‰ pod</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-3 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A -o wide | grep jenkins</span>
</span></span><span style=display:flex><span>kubesphere-devops-system       devops-jenkins-774fdb948b-fmmls                                0/1     Init:CrashLoopBackOff   <span style=color:#ae81ff>6</span> <span style=color:#f92672>(</span>43s ago<span style=color:#f92672>)</span>       6m28s   10.233.93.27    ks-master-3   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># åˆ é™¤ podï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡å»º</span>
</span></span><span style=display:flex><span>kubectl delete pod devops-jenkins-774fdb948b-fmmls -n kubesphere-devops-system
</span></span></code></pre></div><h3 id=36-è§£å†³-weave-å¼‚å¸¸>3.6 è§£å†³ weave å¼‚å¸¸</h3><p>åˆå§‹åŒ–éƒ¨ç½²æ—¶å¯ç”¨äº† weaveï¼Œå¯¼è‡´æœåŠ¡éƒ¨ç½²å¼‚å¸¸ï¼Œéœ€è¦åšå¦‚ä¸‹æ“ä½œå¸è½½ weave æ’ä»¶ã€‚</p><p><strong>æ³¨ï¼š</strong> æœ‰èƒ½åŠ›çš„å¯ä»¥è‡ªå·±æ‰“å¯¹åº”ç‰ˆæœ¬çš„ ARM é•œåƒï¼Œæˆ‘æ”¾å¼ƒäº†ï¼Œæ¯•ç«Ÿè¿™ä¸ªåŠŸèƒ½æ¨¡å—ç”¨å¤„ä¸å¤§äº†ï¼Œè¯¥é¡¹ç›®éƒ½å·²ç»ä¸åœ¨ç»´æŠ¤äº†ï¼Œ<a href=https://www.weave.works/blog/weave-cloud-end-of-service title=åœæ­¢ç»´æŠ¤è¯´æ˜ target=_blank rel="noopener noreferrer">åœæ­¢ç»´æŠ¤è¯´æ˜</a>ã€‚</p><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A -o wide | grep weave</span>
</span></span><span style=display:flex><span>weave                          weave-scope-agent-78r2r                                    0/1     CrashLoopBackOff    <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>95s ago<span style=color:#f92672>)</span>    8m41s   172.16.33.16    ks-master-1   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>weave                          weave-scope-agent-gcm6z                                    0/1     CrashLoopBackOff    <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>69s ago<span style=color:#f92672>)</span>    8m40s   172.16.33.23    ks-master-3   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>weave                          weave-scope-agent-kpp46                                    0/1     CrashLoopBackOff    <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>79s ago<span style=color:#f92672>)</span>    8m40s   172.16.33.22    ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>weave                          weave-scope-app-c6966bf4-c79n2                             0/1     CrashLoopBackOff    <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>67s ago<span style=color:#f92672>)</span>    8m42s   10.233.93.10    ks-master-3   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>weave                          weave-scope-cluster-agent-6f8f6596ff-xpctc                 0/1     CrashLoopBackOff    <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>75s ago<span style=color:#f92672>)</span>    8m41s   10.233.102.7    ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs -n weave weave-scope-agent-78r2r</span>
</span></span><span style=display:flex><span>exec /home/weave/scope: exec format error
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl describe pod weave-scope-agent-78r2r -n weave | grep Image:</span>
</span></span><span style=display:flex><span>    Image:         registry.cn-beijing.aliyuncs.com/kubesphereio/scope:1.13.0
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/scope:1.13.0 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span></code></pre></div><ul><li>ç¼–è¾‘é›†ç¾¤é…ç½®æ–‡ä»¶ï¼Œ<code>kubectl edit cc ks-installer -n kubesphere-system</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> network:
</span></span><span style=display:flex><span>    ippool:
</span></span><span style=display:flex><span>      type: calico
</span></span><span style=display:flex><span>    networkpolicy:
</span></span><span style=display:flex><span>      enabled: true
</span></span><span style=display:flex><span>    topology:
</span></span><span style=display:flex><span>      type: weave-scope <span style=color:#75715e># ä¿®æ”¹ä¸º none</span>
</span></span></code></pre></div><ul><li>ä¿®æ”¹å®Œæˆåï¼Œä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ï¼ˆä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ ks-installer çš„ podï¼Œæ‰‹å·¥å¼ºåˆ¶é‡å¯éƒ¨ç½²ä»»åŠ¡ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete pod ks-installer-6674579f54-4s4tp -n kubesphere-system
</span></span></code></pre></div><ul><li>è§‚å¯Ÿéƒ¨ç½²æ—¥å¿—</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl logs -n kubesphere-system <span style=color:#66d9ef>$(</span>kubectl get pod -n kubesphere-system -l <span style=color:#e6db74>&#39;app in (ks-install, ks-installer)&#39;</span> -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.items[0].metadata.name}&#39;</span><span style=color:#66d9ef>)</span> -f
</span></span></code></pre></div><h3 id=37-è§£å†³-metrics-server-å¼‚å¸¸>3.7 è§£å†³ metrics-server å¼‚å¸¸</h3><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 kubekey<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A</span>
</span></span><span style=display:flex><span>NAMESPACE           NAME                                           READY   STATUS             RESTARTS        AGE
</span></span><span style=display:flex><span>kube-system         metrics-server-66b6cfb784-85l94                0/1     CrashLoopBackOff   <span style=color:#ae81ff>38</span> <span style=color:#f92672>(</span>114s ago<span style=color:#f92672>)</span>   171m
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 kubekey<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs metrics-server-66b6cfb784-85l94 -n kube-system</span>
</span></span><span style=display:flex><span>exec /metrics-server: exec format error
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 kubekey<span style=color:#f92672>]</span><span style=color:#75715e># kubectl describe pod metrics-server-66b6cfb784-85l94 -n kube-system | grep Image:</span>
</span></span><span style=display:flex><span>    Image:         registry.cn-beijing.aliyuncs.com/kubesphereio/metrics-server:v0.4.2
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-3 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/metrics-server:v0.4.2 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span></code></pre></div><ul><li>è·å–é€‚é…çš„ ARM ç‰ˆé•œåƒï¼ˆ<strong>ç›¸åŒç‰ˆæœ¬ KubeSphere å®˜æ–¹ ARM ç‰ˆé•œåƒ</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æ‹‰å– arm64 é•œåƒ</span>
</span></span><span style=display:flex><span>crictl pull registry.cn-beijing.aliyuncs.com/kubesphereio/metrics-server:v0.4.2-arm64  --platform arm64
</span></span></code></pre></div><ul><li>é•œåƒé‡æ–°æ‰“ tag</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># åˆ é™¤ amd64 é•œåƒ</span>
</span></span><span style=display:flex><span>crictl rmi registry.cn-beijing.aliyuncs.com/kubesphereio/metrics-server:v0.4.2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># é‡æ–°æ‰“ tag</span>
</span></span><span style=display:flex><span>ctr -n k8s.io images tag registry.cn-beijing.aliyuncs.com/kubesphereio/metrics-server:v0.4.2-arm64 registry.cn-beijing.aliyuncs.com/kubesphereio/metrics-server:v0.4.2
</span></span></code></pre></div><ul><li>é‡æ–°éƒ¨ç½²ç»„ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># åˆ é™¤ ks-install é‡å¯å®‰è£…ä»»åŠ¡</span>
</span></span><span style=display:flex><span>kubectl delete pod ks-installer-6674579f54-4s4tp -n kubesphere-system
</span></span></code></pre></div><h3 id=38-è§£å†³-minio-å¼‚å¸¸>3.8 è§£å†³ Minio å¼‚å¸¸</h3><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A -o wide</span>
</span></span><span style=display:flex><span>NAMESPACE           NAME                                           READY   STATUS             RESTARTS        AGE     IP             NODE          NOMINATED NODE   READINESS GATES
</span></span><span style=display:flex><span>kubesphere-system   minio-757c8bc7f-tlnts                          0/1     CrashLoopBackOff   <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>111s ago<span style=color:#f92672>)</span>    5m27s   10.233.103.4   ks-master-1   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>kubesphere-system   minio-make-bucket-job-fzz95                    0/1     Error     <span style=color:#ae81ff>2</span> <span style=color:#f92672>(</span>24s ago<span style=color:#f92672>)</span>    31s    10.233.93.5    ks-master-3   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs minio-757c8bc7f-tlnts -n kubesphere-system</span>
</span></span><span style=display:flex><span>exec /bin/sh: exec format error
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Minio ç»„ä»¶å¯¹åº”ä¸¤ä¸ªé•œåƒ</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl images ls | grep minio</span>
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/minio                     RELEASE.2019-08-07T01-59-21Z   29c267893b048       23.1MB
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-3 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl images ls | grep mc</span>
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/mc                        RELEASE.2019-08-07T23-14-43Z         c02b00df169fc       9.32MB
</span></span></code></pre></div><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„ï¼ˆä»¥ minio ä¸ºä¾‹ï¼‰</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/minio:RELEASE.2019-08-07T01-59-21Z | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span></code></pre></div><ul><li>è·å–é€‚é…çš„ ARM ç‰ˆé•œåƒï¼ˆ<strong>ç›¸è¿‘ç‰ˆæœ¬ minio å®˜æ–¹ ARM ç‰ˆé•œåƒ</strong>ï¼‰</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æ‰¾ä¸ªç›¸è¿‘ç‰ˆæœ¬çš„ ARM æ¶æ„çš„é•œåƒ</span>
</span></span><span style=display:flex><span><span style=color:#75715e># minio</span>
</span></span><span style=display:flex><span>crictl pull minio/minio:RELEASE.2020-11-25T22-36-25Z-arm64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># mc</span>
</span></span><span style=display:flex><span>crictl pull minio/mc:RELEASE.2020-11-25T23-04-07Z-arm64
</span></span></code></pre></div><ul><li>é•œåƒé‡æ–°æ‰“ tag</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># minio</span>
</span></span><span style=display:flex><span>crictl rmi registry.cn-beijing.aliyuncs.com/kubesphereio/minio:RELEASE.2019-08-07T01-59-21Z
</span></span><span style=display:flex><span>ctr -n k8s.io images tag docker.io/minio/minio:RELEASE.2020-11-25T22-36-25Z-arm64 registry.cn-beijing.aliyuncs.com/kubesphereio/minio:RELEASE.2019-08-07T01-59-21Z
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># mc</span>
</span></span><span style=display:flex><span>crictl rmi registry.cn-beijing.aliyuncs.com/kubesphereio/mc:RELEASE.2019-08-07T23-14-43Z
</span></span><span style=display:flex><span>ctr -n k8s.io images tag --force docker.io/minio/mc:RELEASE.2020-11-25T23-04-07Z-arm64 registry.cn-beijing.aliyuncs.com/kubesphereio/mc:RELEASE.2019-08-07T23-14-43Z
</span></span></code></pre></div><ul><li>é‡æ–°éƒ¨ç½²ç»„ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># é‡æ–°éƒ¨ç½²,åˆ é™¤æ—§çš„ Podï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„ï¼ˆæ­¤æ­¥çš„æ“ä½œä¹Ÿå¯ä»¥ä½¿ç”¨ä¿®æ”¹ minio å¯¹åº”çš„ deployment ä½¿ç”¨çš„é•œåƒåç§°çš„æ–¹å¼ï¼‰</span>
</span></span><span style=display:flex><span>kubectl delete pod minio-757c8bc7f-tlnts -n kubesphere-system
</span></span><span style=display:flex><span>kubectl delete pod minio-make-bucket-job-fzz95 -n kubesphere-system
</span></span></code></pre></div><h3 id=39-è§£å†³ç»„ä»¶å¼‚å¸¸é€šç”¨æ–¹æ¡ˆ>3.9 è§£å†³ç»„ä»¶å¼‚å¸¸é€šç”¨æ–¹æ¡ˆ</h3><p>åœ¨éƒ¨ç½² ARM çš„ KubeSphere å’Œ Kubernetes é›†ç¾¤æ—¶ï¼Œé‡åˆ°çš„å¼‚å¸¸å¤šæ•°éƒ½æ˜¯å› ä¸ºé•œåƒæ¶æ„ä¸åŒ¹é…é€ æˆçš„ï¼Œå½“é‡åˆ°æœ¬æ–‡æ²¡æœ‰æ¶‰åŠçš„å¼‚å¸¸ç»„ä»¶æ—¶ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æµç¨‹è§£å†³ã€‚</p><ul><li>æŸ¥çœ‹å¼‚å¸¸ Pod</li><li>æŸ¥çœ‹å¼‚å¸¸ Pod çš„æ—¥å¿—</li><li>æŸ¥çœ‹å¼‚å¸¸ Pod ä½¿ç”¨çš„é•œåƒ</li><li>æŸ¥çœ‹å¼‚å¸¸ Pod é•œåƒæ¶æ„</li><li>è·å–é€‚é…çš„ ARM ç‰ˆé•œåƒ</li><li>é•œåƒé‡æ–°æ‰“ tag</li><li>é‡æ–°éƒ¨ç½²ç»„ä»¶</li></ul><h2 id=4-éƒ¨ç½²æµ‹è¯•èµ„æº>4. éƒ¨ç½²æµ‹è¯•èµ„æº</h2><p>åœ¨è§£å†³å®Œæ‰€æœ‰å¼‚å¸¸ç»„ä»¶åï¼Œæ•´ä¸ª Kubetnetes é›†ç¾¤ä¸­çš„ Pod éƒ½åº”è¯¥å¤„äº Running çŠ¶æ€ï¼Œä»£è¡¨ç€ KubeSphere å’Œ Kubernetes è¡¨é¢ä¸Šçœ‹ç€æ˜¯æ­£å¸¸çš„ã€‚</p><p>åœ¨ä¸Šç¯‡æ–‡æ¡£ä¸­æˆ‘ä»¬å·²ç»éªŒè¯æµ‹è¯•äº† KubeSphere å’Œ Kubernetes é›†ç¾¤çš„çŠ¶æ€ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†åœ¨ Kubernetes é›†ç¾¤ä¸Šéƒ¨ç½²ä¸€ä¸ªç®€å•çš„ Nginx Web æœåŠ¡å™¨ï¼Œæµ‹è¯•éªŒè¯ Kubernetes å’Œ KubeSphere åŸºæœ¬åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚</p><p>æœ¬ç¤ºä¾‹ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·åœ¨ Kubernetes é›†ç¾¤ä¸Šéƒ¨ç½²ä¸€ä¸ª Nginx Web æœåŠ¡å™¨å¹¶åˆ©ç”¨ KubeSphere å›¾å½¢åŒ–ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹éƒ¨ç½²çš„èµ„æºä¿¡æ¯ã€‚</p><h3 id=41-åˆ›å»º-nginx-deployment>4.1 åˆ›å»º Nginx Deployment</h3><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªéƒ¨ç½² Nginx Web æœåŠ¡å™¨çš„ Deploymentã€‚æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºå…·æœ‰ä¸¤ä¸ªå‰¯æœ¬åŸºäº nginx:alpine é•œåƒçš„ Podã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl create deployment nginx --image<span style=color:#f92672>=</span>nginx:alpine --replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span></code></pre></div><h3 id=42-åˆ›å»º-nginx-service>4.2 åˆ›å»º Nginx Service</h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ Kubernetes æœåŠ¡ï¼ŒæœåŠ¡åç§° nginxï¼ŒæœåŠ¡ç±»å‹ Nodeportï¼Œå¯¹å¤–çš„æœåŠ¡ç«¯å£ 80ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl create service nodeport nginx --tcp<span style=color:#f92672>=</span>80:80
</span></span></code></pre></div><h3 id=43-éªŒè¯-nginx-deployment-å’Œ-pod>4.3 éªŒè¯ Nginx Deployment å’Œ Pod</h3><ul><li>è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹åˆ›å»ºçš„ Deployment å’Œ Pod èµ„æºã€‚</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get deployment -o wide
</span></span><span style=display:flex><span>kubectl get pods -o wide
</span></span></code></pre></div><ul><li>æŸ¥çœ‹ç»“æœå¦‚ä¸‹ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get deployment -o wide</span>
</span></span><span style=display:flex><span>NAME    READY   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS   IMAGES         SELECTOR
</span></span><span style=display:flex><span>nginx   2/2     <span style=color:#ae81ff>2</span>            <span style=color:#ae81ff>2</span>           20s   nginx        nginx:alpine   app<span style=color:#f92672>=</span>nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -o wide</span>
</span></span><span style=display:flex><span>NAME                     READY   STATUS    RESTARTS   AGE   IP               NODE          NOMINATED NODE   READINESS GATES
</span></span><span style=display:flex><span>nginx-6c557cc74d-tbw9c   1/1     Running   <span style=color:#ae81ff>0</span>          23s   10.233.102.187   ks-master-2   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>nginx-6c557cc74d-xzzss   1/1     Running   <span style=color:#ae81ff>0</span>          23s   10.233.103.148   ks-master-1   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><h3 id=44-éªŒè¯-nginx-é•œåƒæ¶æ„>4.4 éªŒè¯ Nginx é•œåƒæ¶æ„</h3><ul><li>è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ Nginx Image çš„æ¶æ„ç±»å‹</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>crictl inspecti nginx:alpine | grep architecture
</span></span></code></pre></div><ul><li>æŸ¥çœ‹ç»“æœå¦‚ä¸‹ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti nginx:alpine | grep architecture</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;arm64&#34;</span>
</span></span></code></pre></div><h3 id=45-éªŒè¯-nginx-service>4.5 éªŒè¯ Nginx Service</h3><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯ç”¨çš„æœåŠ¡åˆ—è¡¨ï¼Œåœ¨åˆ—è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Nginx æœåŠ¡ç±»å‹ ä¸º Nodeportï¼Œå¹¶åœ¨ Kubernetes ä¸»æœºä¸Šå¼€æ”¾äº† <strong>30563</strong> ç«¯å£ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get svc -o wide
</span></span></code></pre></div><p>æŸ¥çœ‹ç»“æœå¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get svc -o wide</span>
</span></span><span style=display:flex><span>NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT<span style=color:#f92672>(</span>S<span style=color:#f92672>)</span>        AGE     SELECTOR
</span></span><span style=display:flex><span>kubernetes   ClusterIP   10.233.0.1     &lt;none&gt;        443/TCP        4d22h   &lt;none&gt;
</span></span><span style=display:flex><span>nginx        NodePort    10.233.14.48   &lt;none&gt;        80:30619/TCP   5s      app<span style=color:#f92672>=</span>nginx
</span></span></code></pre></div><h3 id=46-éªŒè¯æœåŠ¡>4.6 éªŒè¯æœåŠ¡</h3><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤è®¿é—®éƒ¨ç½²çš„ Nginx æœåŠ¡ï¼ŒéªŒè¯æœåŠ¡æ˜¯å¦æˆåŠŸéƒ¨ç½²ã€‚</p><ul><li>éªŒè¯ç›´æ¥è®¿é—® Pod</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl 10.233.102.187
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¿é—®ç»“æœå¦‚ä¸‹</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># curl 10.233.102.187</span>
</span></span><span style=display:flex><span>&lt;!DOCTYPE html&gt;
</span></span><span style=display:flex><span>&lt;html&gt;
</span></span><span style=display:flex><span>&lt;head&gt;
</span></span><span style=display:flex><span>&lt;title&gt;Welcome to nginx!&lt;/title&gt;
</span></span><span style=display:flex><span>&lt;style&gt;
</span></span><span style=display:flex><span>html <span style=color:#f92672>{</span> color-scheme: light dark; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>body <span style=color:#f92672>{</span> width: 35em; margin: <span style=color:#ae81ff>0</span> auto;
</span></span><span style=display:flex><span>font-family: Tahoma, Verdana, Arial, sans-serif; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>&lt;/style&gt;
</span></span><span style=display:flex><span>&lt;/head&gt;
</span></span><span style=display:flex><span>&lt;body&gt;
</span></span><span style=display:flex><span>&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
</span></span><span style=display:flex><span>&lt;p&gt;If you see this page, the nginx web server is successfully installed and
</span></span><span style=display:flex><span>working. Further configuration is required.&lt;/p&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;p&gt;For online documentation and support please refer to
</span></span><span style=display:flex><span>&lt;a href<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://nginx.org/&#34;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
</span></span><span style=display:flex><span>Commercial support is available at
</span></span><span style=display:flex><span>&lt;a href<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://nginx.com/&#34;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;p&gt;&lt;em&gt;Thank you <span style=color:#66d9ef>for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
</span></span><span style=display:flex><span>&lt;/body&gt;
</span></span><span style=display:flex><span>&lt;/html&gt;
</span></span></code></pre></div><ul><li>éªŒè¯è®¿é—® Service</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl 10.233.14.48
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¿é—®ç»“æœåŒä¸Šï¼Œç•¥</span>
</span></span></code></pre></div><ul><li>éªŒè¯è®¿é—® Nodeport</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl 172.16.33.16:30619
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¿é—®ç»“æœåŒä¸Šï¼Œç•¥</span>
</span></span></code></pre></div><h3 id=47-åœ¨ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹>4.7 åœ¨ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ° KubeSphere ç®¡ç†æ§åˆ¶å°ï¼Œåœ¨ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹å·²ç»åˆ›å»ºçš„èµ„æºã€‚</p><blockquote><p><strong>è¯´æ˜ï¼š</strong> KubeSphere çš„ç®¡ç†æ§åˆ¶å°å…·æœ‰å‹å¥½åœ°ã€å›¾å½¢åŒ–åˆ›å»º Kubernetes å„ç§èµ„æºçš„åŠŸèƒ½ï¼Œä¸»è¦æ˜¯æˆªå›¾å¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥æœ¬æ–‡é‡‡ç”¨äº†å‘½ä»¤è¡Œçš„æ–¹å¼ç®€å•çš„åˆ›å»ºäº†æµ‹è¯•èµ„æºã€‚</p><p>åªæ˜¯åœ¨æŸ¥çœ‹çš„æ—¶å€™ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹ KubeSphere ç®¡ç†æ§åˆ¶å°çš„åŸºæœ¬åŠŸèƒ½ï¼Œå®é™…ä½¿ç”¨ä¸­ï¼Œå¤§å®¶å¯ä»¥ä½¿ç”¨å›¾å½¢åŒ–æ–¹å¼åˆ›å»ºå’Œç®¡ç† Kubernetes èµ„æºã€‚</p></blockquote><ul><li>ç™»å½• KubeSphere ç®¡ç†æ§åˆ¶å°ï¼Œç‚¹å‡»ã€Œå¹³å°ç®¡ç†ã€ï¼Œé€‰æ‹©ã€Œé›†ç¾¤ç®¡ç†ã€ã€‚</li><li>å•å‡»é›†ç¾¤ç®¡ç†é¡µé¢å·¦ä¾§çš„ã€Œåº”ç”¨è´Ÿè½½ã€ï¼Œç‚¹å‡»ã€Œå·¥ä½œè´Ÿè½½ã€ã€‚é»˜è®¤ä¼šçœ‹åˆ°æ‰€æœ‰ç±»å‹ä¸º<strong>éƒ¨ç½²</strong>çš„å·¥ä½œè´Ÿè½½ã€‚</li></ul><p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ admin è´¦æˆ·ï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å·¥ä½œè´Ÿè½½ï¼Œåœ¨æœç´¢æ¡†è¾“å…¥ nginxï¼Œåªæ˜¾ç¤º Nginx éƒ¨ç½²å·¥ä½œè´Ÿè½½ã€‚</p><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-clusters-deployments-v340-v126-arm.png alt></p><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-clusters-deployments-nginx-v340-v126-arm.png alt></p><ul><li>å•å‡»éƒ¨ç½²åˆ—è¡¨ä¸­çš„ Nginxï¼Œå¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¹¶ä¸”ç®¡ç† Nginx éƒ¨ç½² (Deployment)ã€‚</li></ul><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-clusters-deployments-nginx-resource-status-v340-v126-arm.png alt></p><ul><li>å•å‡»å®¹å™¨ç»„ä¸­çš„ä¸€ä¸ª Nginx å®¹å™¨ï¼Œå¯ä»¥æŸ¥çœ‹å®¹å™¨çš„çŠ¶æ€ã€ç›‘æ§ç­‰ä¿¡æ¯ã€‚</li></ul><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-clusters-pods-nginx-monitors-v340-v126-arm.png alt></p><ul><li>å›åˆ°ã€Œå¹³å°ç®¡ç†ã€-ã€Œé›†ç¾¤ç®¡ç†ã€é¡µé¢ï¼Œå•å‡»é›†ç¾¤ç®¡ç†é¡µé¢å·¦ä¾§çš„ã€Œåº”ç”¨è´Ÿè½½ã€ï¼Œç‚¹å‡»ã€ŒæœåŠ¡ã€ã€‚é»˜è®¤ä¼šçœ‹åˆ°æ‰€æœ‰ç±»å‹ä¸º<strong>æœåŠ¡</strong>çš„å·¥ä½œè´Ÿè½½ã€‚</li></ul><p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ admin è´¦æˆ·ï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å·¥ä½œè´Ÿè½½ï¼Œåœ¨æœç´¢æ¡†è¾“å…¥ Nginxï¼Œåªæ˜¾ç¤º Nginx æœåŠ¡å·¥ä½œè´Ÿè½½ã€‚</p><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-clusters-services-v340-v126-arm.png alt></p><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-clusters-services-nginx-v340-v126-arm.png alt></p><ul><li>å•å‡»æœåŠ¡åˆ—è¡¨ä¸­çš„ Nginxï¼Œå¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¹¶ä¸”ç®¡ç† Nginx æœåŠ¡ (Service)ã€‚</li></ul><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-clusters-services-nginx-resource-status-v340-v126-arm.png alt></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº†å°† Nginx Web æœåŠ¡å™¨éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ï¼Œå¹¶é€šè¿‡ KubeSphere ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹ã€éªŒè¯äº†éƒ¨ç½²çš„ Deploymentã€Podã€Service çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>æœ¬æ–‡ä»…å¯¹ ARM æ¶æ„ä¸‹éƒ¨ç½²çš„ KubeSphere å’Œ Kubernetes åšäº†æœ€åŸºæœ¬çš„èµ„æºåˆ›å»ºçš„éªŒè¯æµ‹è¯•ï¼Œæ›´å¤šçš„å®Œæ•´çš„å¯æ’æ‹”ç»„ä»¶çš„æµ‹è¯•å¹¶æœªæ¶‰åŠï¼Œè¯·è¯»è€…æ ¹æ®éœ€æ±‚è‡ªå·±éªŒè¯ã€æµ‹è¯•ã€‚</p><p>åœ¨éªŒè¯æµ‹è¯•è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å¤šæ•°éƒ½åº”è¯¥æ˜¯é•œåƒæ¶æ„ä¸åŒ¹é…é€ æˆçš„ï¼Œå‚è€ƒæœ¬æ–‡<strong>ç¬¬ 5 å°èŠ‚</strong>ä¸­è§£å†³é—®é¢˜çš„æ€è·¯å’Œæµç¨‹ï¼Œåº”è¯¥èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ã€‚</p><h2 id=5-è¡¥å……è¯´æ˜>5. è¡¥å……è¯´æ˜</h2><p>æœ¬å°èŠ‚æˆ‘ä»¬å±•ç¤ºä¸€äº›é›†ç¾¤çš„åŸºæœ¬ä¿¡æ¯å’Œä¸€äº›æµ‹è¯•éªŒè¯çš„è¯´æ˜ã€‚</p><h3 id=51-æŸ¥çœ‹-image-åˆ—è¡¨>5.1 æŸ¥çœ‹ Image åˆ—è¡¨</h3><p>æœ¬å°èŠ‚ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ•´ä¸ª KubeSphere å’Œ Kubernetes é›†ç¾¤ç”¨åˆ°äº†å“ªäº›é•œåƒã€‚</p><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹è¾“å…¥ä»¥ä¸‹å‘½ä»¤è·å–åœ¨ Kubernetes é›†ç¾¤èŠ‚ç‚¹ä¸Šå·²ç»ä¸‹è½½çš„ Image åˆ—è¡¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>crictl images ls
</span></span></code></pre></div><p>ä»¥ä¸‹ç»“æœæ˜¯åœ¨æ‰€æœ‰æ‰§è¡ŒæŸ¥çœ‹å‘½ä»¤åçš„æ±‡æ€»è¾“å‡ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># crictl images ls | grep -v docker.io &gt; /tmp/1.txt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># crictl images ls | grep -v docker.io &gt; /tmp/2.txt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># crictl images ls | grep -v docker.io &gt; /tmp/3.txt</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  cat 1.txt 2.txt 3.txt | awk &#39;{if (!seen[$1]++) {print}}&#39; | sort</span>
</span></span><span style=display:flex><span>IMAGE                                                                       TAG                                  IMAGE ID            SIZE
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/alertmanager                  v0.23.0                              44a71f29f42b0       25MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/argocd-applicationset-arm64   v0.4.1                               758eaf0d9da26       76.2MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/argocd-applicationset         v0.4.1                               f5ac1e612edca       77.7MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/argocd                        v2.3.3                               9a557f111ba0b       185MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/cni                           v3.23.2                              dbad3c1a529ac       76.3MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/configmap-reload              v0.7.1                               b4151c08af07d       3.73MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/coredns                       1.9.3                                b19406328e70d       13.4MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/defaultbackend-amd64          1.4                 							   846921f0fe0e5       1.82MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/defaultbackend-arm64          1.4                                  156fbd4afe405       1.67MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/devops-apiserver              ks-v3.4.0                            c89baacbfca67       29.8MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/devops-controller             ks-v3.4.0                            5b4ce4e345d4a       26.3MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/devops-tools                  ks-v3.4.0                            3b2bc61feca12       28.9MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/dex                           v2.30.2                              cd0eb92a37da5       24.1MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/docker                        19.03                                59291a2ff3232       60.8MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/fluentbit-operator            v0.14.0                              1fe6aebe29cb9       18.7MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/fluent-bit                    v1.9.4                               bb0200a3096d6       25.8MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/haproxy                       2.3                                  5be62463c49bf       37.3MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/jaeger-operator               1.29                                 7e6f4ab1586b7       105MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/k8s-dns-node-cache            1.15.12                              c5c27a390f5fa       41.9MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kiali-operator                v1.50.1                              c3dc2b49c5e8b       250MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kiali                         v1.50                                97c5cab789c50       78MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/ks-apiserver                  v3.4.0                               de0e22c9bcf4f       61.5MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/ks-console                    v3.4.0                               42b2364bcafe3       38.7MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/ks-controller-manager         v3.4.0                               4ff90f750485b       46.9MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/ks-installer                  v3.4.0                               3471e6e1d2af0       153MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/ks-jenkins                    v3.4.0-2.319.3-1                     4b52636ce9e50       581MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-apiserver                v1.26.5                              06a268629a822       32.4MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-auditing-operator        v0.2.0                               9c5612b5f8a8e       8.37MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-auditing-webhook         v0.2.0                               f23e1078e2b2c       11.5MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-controller-manager       v1.26.5                              a7b6fa1339316       29.6MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-controllers              v3.23.2                              5a33f410afb91       25.1MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kubectl                       v1.22.0                              29c024bbbf9b1       25.2MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-events-exporter          v0.6.0                               452463fb02cb2       19.7MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-events-operator          v0.6.0                               27146d6e5ab73       21.5MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-events-ruler             v0.6.0                               12573f2ffe64d       25.1MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-proxy                    v1.26.5                              5e89f86edbb88       19.3MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-rbac-proxy               v0.11.0                              bee4dbe8a9f42       17.9MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-scheduler                v1.26.5                              9eb699cb795f8       16.1MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/kube-state-metrics            v2.6.0                               150fa1ddd5ab3       10.8MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/linux-utils                   3.3.0                                d06b9d3a552bc       27.3MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/log-sidecar-injector          v1.2.0                               dbad25c47d9ec       9.9MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/mc                            RELEASE.2019-08-07T23-14-43Z         c02b00df169fc       11.7MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/metrics-server                v0.4.2                               b266eabac7d6a       23.6MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/minio                         RELEASE.2019-08-07T01-59-21Z         6760283c70e3e       23MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/node-exporter                 v1.3.1                               bb203ba967a80       9.72MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/node                          v3.23.2                              2a3416a8ae05d       73MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/notification-manager-operator v2.3.0                               3d8285028607a       17.9MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/notification-manager          v2.3.0                               b4d8dc4ea25ac       20.1MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/notification-tenant-sidecar   v3.2.0                               e41b413830c35       13.2MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/openldap                      1.3.0                                8803fc65b2bfa       91.6MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/openpitrix-jobs               v3.3.2                               d1afba2bac100       15.3MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/opensearch                    2.6.0                                92fe7c48b27f4       813MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/opensearch-curator            v0.0.5                               5791cbce4e83d       19MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/pause                         3.8                                  4e42fb3c9d90e       268kB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/pilot                         1.15.7                               4f12fc8040fe7       66MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/pod2daemon-flexvol            v3.23.2                              d48543e4a525a       4.56MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/prometheus-config-reloader    v0.55.1                              4152fd84f8c36       4.61MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/prometheus-operator           v0.55.1                              8e6f6c78032e8       13.1MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/prometheus                    v2.39.1                              af3e34b4a84e5       83.4MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/provisioner-localpv           3.3.0                                2f625755a998b       27.3MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/redis                         6.2.6-alpine                         50bbab999a871       10.8MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/s2ioperator                   v3.2.1                               30b700dff15f8       11.8MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/scope                         1.13.0                               ca6176be9738f       30.7MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/snapshot-controller           v4.0.0                               3758cfc26c6db       17.7MB
</span></span><span style=display:flex><span>registry.cn-beijing.aliyuncs.com/kubesphereio/thanos                        v0.31.0                              5595f682eee8a       37.7MB
</span></span></code></pre></div><h3 id=52-devops-æ¨¡å—éªŒè¯è¯´æ˜>5.2 DevOps æ¨¡å—éªŒè¯è¯´æ˜</h3><p>åœ¨è§£å†³äº† Jenkins ç­‰é•œåƒæ¶æ„å¼‚å¸¸åï¼ŒDevOps æµæ°´çº¿èƒ½åˆ›å»ºé¡¹ç›®ã€åˆ›å»ºæµæ°´çº¿ï¼Œç¼–è¾‘ Jenkinsfileï¼Œæµæ°´çº¿çš„æµç¨‹å›¾ä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</p><p>æ„å»ºåº”ç”¨çš„æ—¶å€™ Maven å®¹å™¨ä¾æ—§èµ·ä¸æ¥ï¼Œæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œä½œä¸ºé—ç•™é—®é¢˜ï¼Œåç»­è§£å†³äº†å†è¯´ã€‚</p><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-v340-v126-devops-pipelines.png alt></p><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-v340-v126-devops-pipelines-test.png alt></p><p><img src=https://opsman-1258881081.cos.ap-beijing.myqcloud.com//ksp-v340-v126-devops-pipelines-test-error.png alt></p><h2 id=6-å¸¸è§é—®é¢˜>6. å¸¸è§é—®é¢˜</h2><h3 id=61-é—®é¢˜-1>6.1 é—®é¢˜ 1</h3><ul><li>æŠ¥é”™ç°è±¡</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># å®‰è£…å¤±è´¥ï¼Œæœ€åæŠ¥é”™</span>
</span></span><span style=display:flex><span>Please wait <span style=color:#66d9ef>for</span> the installation to complete:   &gt;&gt;---&gt;
</span></span><span style=display:flex><span>13:08:38 CST skipped: <span style=color:#f92672>[</span>ks-master-3<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>13:08:38 CST skipped: <span style=color:#f92672>[</span>ks-master-2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>13:08:38 CST failed: <span style=color:#f92672>[</span>ks-master-1<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>error: Pipeline<span style=color:#f92672>[</span>CreateClusterPipeline<span style=color:#f92672>]</span> execute failed: Module<span style=color:#f92672>[</span>CheckResultModule<span style=color:#f92672>]</span> exec failed:
</span></span><span style=display:flex><span>failed: <span style=color:#f92672>[</span>ks-master-1<span style=color:#f92672>]</span> execute task timeout, Timeout<span style=color:#f92672>=</span>2h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹ Pods</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 kubekey<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -A</span>
</span></span><span style=display:flex><span>NAMESPACE           NAME                                           READY   STATUS             RESTARTS        AGE
</span></span><span style=display:flex><span>kube-system         metrics-server-66b6cfb784-85l94                0/1     CrashLoopBackOff   <span style=color:#ae81ff>38</span> <span style=color:#f92672>(</span>114s ago<span style=color:#f92672>)</span>   171m
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹ Pod æ—¥å¿—</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 kubekey<span style=color:#f92672>]</span><span style=color:#75715e># kubectl logs metrics-server-66b6cfb784-85l94 -n kube-system</span>
</span></span><span style=display:flex><span>exec /metrics-server: exec format error
</span></span></code></pre></div><ul><li>è§£å†³æ–¹æ¡ˆ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>å‚è€ƒ 3.7 å°èŠ‚çš„ è§£å†³ metrics-server å¼‚å¸¸
</span></span></code></pre></div><h3 id=62-é—®é¢˜-2>6.2 é—®é¢˜ 2</h3><ul><li>æŠ¥é”™ä¿¡æ¯</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>## devops æµæ°´çº¿åŠŸèƒ½å¼‚å¸¸ï¼Œä»…åšè®°å½•ï¼Œæœªæœ€ç»ˆè§£å†³</span>
</span></span><span style=display:flex><span>Started by user opsman
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Pipeline<span style=color:#f92672>]</span> Start of Pipeline
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Pipeline<span style=color:#f92672>]</span> node
</span></span><span style=display:flex><span>Still waiting to schedule task
</span></span><span style=display:flex><span>All nodes of label â€˜mavenâ€™ are offline
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-1 ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -n kubesphere-devops-worker</span>
</span></span><span style=display:flex><span>NAME          READY   STATUS        RESTARTS   AGE
</span></span><span style=display:flex><span>maven-604qz   1/2     Terminating   <span style=color:#ae81ff>0</span>          5s
</span></span><span style=display:flex><span>maven-7krjb   1/2     Terminating   <span style=color:#ae81ff>0</span>          5s
</span></span><span style=display:flex><span>maven-b43fl   1/2     Terminating   <span style=color:#ae81ff>0</span>          5s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>5s                      Normal   Started     Pod/maven-pxrt3   Started container jnlp
</span></span><span style=display:flex><span>4s                      Normal   Started     Pod/maven-xnt3j   Started container jnlp
</span></span><span style=display:flex><span>4s                      Normal   Pulled      Pod/maven-xnt3j   Container image <span style=color:#e6db74>&#34;registry.cn-beijing.aliyuncs.com/kubesphereio/inbound-agent:4.10-2&#34;</span> already present on machine
</span></span><span style=display:flex><span>4s                      Normal   Started     Pod/maven-xnt3j   Started container maven
</span></span><span style=display:flex><span>4s                      Normal   Created     Pod/maven-xnt3j   Created container maven
</span></span><span style=display:flex><span>4s                      Normal   Created     Pod/maven-xnt3j   Created container jnlp
</span></span><span style=display:flex><span>4s                      Normal   Pulled      Pod/maven-xnt3j   Container image <span style=color:#e6db74>&#34;registry.cn-beijing.aliyuncs.com/kubesphereio/builder-maven:v3.2.0-podman&#34;</span> already present on machine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-2 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/builder-maven:v3.2.0-podman | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-2 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti registry.cn-beijing.aliyuncs.com/kubesphereio/inbound-agent:4.10-2 | grep arch</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;arm64&#34;</span>,
</span></span></code></pre></div><ul><li>è§£å†³æ–¹æ¡ˆ</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># è¯´æ˜ï¼šæ²¡æœ‰æœ€ç»ˆè§£å†³ï¼Œåªè§£å†³äº†é•œåƒæ¶æ„å¼‚å¸¸ï¼Œä½†æ˜¯åé¢æ„å»ºåº”ç”¨çš„æ—¶å€™ maven å®¹å™¨ä¾æ—§èµ·ä¸æ¥</span>
</span></span><span style=display:flex><span>crictl pull kubespheredev/builder-maven:v3.3.1-podman --platform arm64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ks-master-2 ~<span style=color:#f92672>]</span><span style=color:#75715e># crictl inspecti kubespheredev/builder-maven:v3.3.1-podman | grep arch | head -1</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;architecture&#34;</span>: <span style=color:#e6db74>&#34;arm64&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å·æ¢æ¢æŸ±ï¼Œå¼ºåˆ¶ä¿®æ”¹ tagï¼ˆè¿™ä¸ªæ–¹æ¡ˆæ¯”è¾ƒç²—æš´ï¼Œå»ºè®®é‡‡å–è‡ªå·±æ„å»ºåŒç‰ˆæœ¬ ARM é•œåƒæˆ–æ˜¯ä¿®æ”¹ kubesphere-devops-system é¡¹ç›®ä¸‹çš„é…ç½®å­—å…¸ jenkins-casc-config ä¸­çš„ jenkins_user.yaml ï¼Œä¿®æ”¹é•œåƒç‰ˆæœ¬ï¼‰</span>
</span></span><span style=display:flex><span>crictl rmi registry.cn-beijing.aliyuncs.com/kubesphereio/builder-maven:v3.2.0-podman
</span></span><span style=display:flex><span>ctr -n k8s.io images tag docker.io/kubespheredev/builder-maven:v3.3.1-podman registry.cn-beijing.aliyuncs.com/kubesphereio/builder-maven:v3.2.0-podman --force
</span></span><span style=display:flex><span><span style=color:#75715e>#ctr -n k8s.io images tag docker.io/kubespheredev/builder-maven:v3.3.1-podman registry.cn-beijing.aliyuncs.com/kubesphereio/builder-maven:v3.3.1-podman</span>
</span></span></code></pre></div><h2 id=7-æ€»ç»“>7. æ€»ç»“</h2><p>æœ¬ä¸“é¢˜ä¸»è¦å®æˆ˜æ¼”ç¤ºäº†åœ¨ ARM ç‰ˆ openEuler 22.03 LTS SP2 æœåŠ¡å™¨ä¸Šï¼Œåˆ©ç”¨ KubeKey 3.0.10 è‡ªåŠ¨åŒ–éƒ¨ç½²æœ€å°åŒ– KubeSphere 3.4.0 å’Œ Kubernetes 1.26.5 é«˜å¯ç”¨é›†ç¾¤çš„è¯¦ç»†è¿‡ç¨‹ã€‚</p><p>éƒ¨ç½²å®Œæˆåï¼Œæˆ‘ä»¬è¿˜åˆ©ç”¨ KubeSphere ç®¡ç†æ§åˆ¶å°å’Œ kubectl å‘½ä»¤è¡Œï¼ŒæŸ¥çœ‹å¹¶éªŒè¯äº† KubeSphere å’Œ Kubernetes é›†ç¾¤çš„çŠ¶æ€ã€‚</p><p>æœ€ç»ˆæˆ‘ä»¬é€šè¿‡åœ¨ Kubenetes é›†ç¾¤ä¸Šéƒ¨ç½² Nginx Web æœåŠ¡å™¨éªŒè¯äº† Kubernetes é›†ç¾¤å’Œ KubeSphere çš„å¯ç”¨æ€§ï¼Œå¹¶é€šè¿‡åœ¨ KubeSphere ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹ Nginx Pod å’ŒæœåŠ¡çŠ¶æ€çš„æ“ä½œï¼Œäº†è§£äº† KubeSphere çš„åŸºæœ¬ç”¨æ³•ã€‚</p><p>æ¦‚æ‹¬æ€»ç»“å…¨æ–‡ä¸»è¦æ¶‰åŠä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>openEuler 22.03 LTS SP2 aarch64 æ“ä½œç³»ç»ŸåŸºç¡€é…ç½®</li><li>æ“ä½œç³»ç»Ÿæ•°æ®ç›˜ LVM é…ç½®ã€ç£ç›˜æŒ‚è½½ã€æ•°æ®ç›®å½•åˆ›å»º</li><li>KubeKey ä¸‹è½½åŠåˆ›å»ºé›†ç¾¤é…ç½®æ–‡ä»¶</li><li>åˆ©ç”¨ KubeKey è‡ªåŠ¨åŒ–éƒ¨ç½² KubeSphere å’Œ Kubernetes é›†ç¾¤</li><li>è§£å†³ ARM ç‰ˆ KubeSphere å’Œ Kubernetes æœåŠ¡ç»„ä»¶å¼‚å¸¸çš„é—®é¢˜</li><li>éƒ¨ç½²å®Œæˆåçš„ KubeSphere å’Œ Kubernetes é›†ç¾¤çŠ¶æ€éªŒè¯</li><li>éƒ¨ç½² Nginx éªŒè¯æµ‹è¯• KubeSphere å’Œ Kubernetes åŸºæœ¬åŠŸèƒ½</li></ul><p>æœ¬æ–‡éƒ¨ç½²ç¯å¢ƒè™½ç„¶æ˜¯åŸºäº <strong>Kunpeng-920</strong> èŠ¯ç‰‡çš„ aarch64 ç‰ˆ openEuler 22.03 LTS SP2 ï¼Œä½†æ˜¯å¯¹äº CentOSã€éº’éºŸ V10 SP2 ç­‰ ARM ç‰ˆæ“ä½œç³»ç»Ÿä»¥åŠé£è…¾ï¼ˆFT-2500ï¼‰ç­‰èŠ¯ç‰‡ä¹Ÿæœ‰ä¸€å®šçš„å€Ÿé‰´æ„ä¹‰ã€‚</p><p>æœ¬æ–‡ä»‹ç»çš„å†…å®¹å¯ç›´æ¥ç”¨äºç ”å‘ã€æµ‹è¯•ç¯å¢ƒï¼Œå¯¹äºç”Ÿäº§ç¯å¢ƒæœ‰ä¸€å®šçš„å‚è€ƒæ„ä¹‰ï¼Œ<strong>ç»å¯¹ä¸èƒ½</strong>ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p><p><strong>æœ¬æ–‡çš„ä¸å®Œå…¨æµ‹è¯•ç»“è®ºï¼š</strong> KubeSphere å’Œ Kubernetes åŸºæœ¬åŠŸèƒ½å¯ç”¨ï¼ŒDevOps åŠŸèƒ½éƒ¨åˆ†å¯ç”¨ï¼Œä¸»è¦é—®é¢˜åœ¨æ„å»ºé•œåƒæ—¶ Maven å®¹å™¨å¯åŠ¨å¼‚å¸¸ï¼Œ<strong>å…¶ä»–æ’ä»¶åŠŸèƒ½æœªåšéªŒè¯</strong>ã€‚</p></div></div><div class=share-2><div class=share><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f&text=ARM%20%e7%89%88%20openEuler%2022.03%20%e9%83%a8%e7%bd%b2%20KubeSphere%203.4.0%20%e4%b8%8d%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%e7%bb%ad%e7%af%87" target=_blank rel="noopener noreferrer"><img src=/images/share/Twitter.svg alt="twitter icon">
</a><a href="https://reddit.com/submit?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f&title=ARM%20%e7%89%88%20openEuler%2022.03%20%e9%83%a8%e7%bd%b2%20KubeSphere%203.4.0%20%e4%b8%8d%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%e7%bb%ad%e7%af%87" target=_blank rel="noopener noreferrer"><img src=/images/share/Reddit.svg alt="reddit icon">
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Facebook.svg alt="facebook icon">
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Linkedin.svg alt="linkedin icon">
</a><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fdeploy-kubesphere-v3.4.0-on-arm-openeuler-2%2f&t=ARM%20%e7%89%88%20openEuler%2022.03%20%e9%83%a8%e7%bd%b2%20KubeSphere%203.4.0%20%e4%b8%8d%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%e7%bb%ad%e7%af%87" target=_blank rel="noopener noreferrer"><img src=/images/share/HackerNews.svg alt="hackernews icon"></a></div></div></div><div class=aside><div class=inner-div><div class=title>ç›®å½•</div><div class=tabs><nav id=TableOfContents><ul><li><a href=#å‰è¨€>å‰è¨€</a><ul><li><a href=#çŸ¥è¯†ç‚¹>çŸ¥è¯†ç‚¹</a></li><li><a href=#å®æˆ˜æœåŠ¡å™¨é…ç½®-ä¸ªäººäº‘ä¸Šæµ‹è¯•æœåŠ¡å™¨>å®æˆ˜æœåŠ¡å™¨é…ç½® (ä¸ªäººäº‘ä¸Šæµ‹è¯•æœåŠ¡å™¨)</a></li><li><a href=#å®æˆ˜ç¯å¢ƒæ¶‰åŠè½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯>å®æˆ˜ç¯å¢ƒæ¶‰åŠè½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯</a></li></ul></li><li><a href=#1-æœ¬æ–‡ç®€ä»‹>1. æœ¬æ–‡ç®€ä»‹</a></li><li><a href=#2-å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸åŠè§£å†³æ–¹æ¡ˆ>2. å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸åŠè§£å†³æ–¹æ¡ˆ</a><ul><li><a href=#21-kubernetes-ç›¸å…³ç»„ä»¶äºŒè¿›åˆ¶åŒ…æ ¼å¼ä¸åŒ¹é…>2.1 Kubernetes ç›¸å…³ç»„ä»¶äºŒè¿›åˆ¶åŒ…æ ¼å¼ä¸åŒ¹é…</a></li></ul></li><li><a href=#3-å¼‚å¸¸ç»„ä»¶åŠè§£å†³æ–¹æ¡ˆ>3. å¼‚å¸¸ç»„ä»¶åŠè§£å†³æ–¹æ¡ˆ</a><ul><li><a href=#31-æŸ¥çœ‹å¼‚å¸¸ç»„ä»¶å¯¹åº”çš„-pod>3.1 æŸ¥çœ‹å¼‚å¸¸ç»„ä»¶å¯¹åº”çš„ Pod</a></li><li><a href=#32-è§£å†³-argo-cd-å¼‚å¸¸>3.2 è§£å†³ Argo CD å¼‚å¸¸</a></li><li><a href=#33-è§£å†³-istio-å¼‚å¸¸>3.3 è§£å†³ Istio å¼‚å¸¸</a></li><li><a href=#34-è§£å†³-http-backupend-å¼‚å¸¸>3.4 è§£å†³ http-backupend å¼‚å¸¸</a></li><li><a href=#35-è§£å†³-jenkins-å¼‚å¸¸>3.5 è§£å†³ Jenkins å¼‚å¸¸</a></li><li><a href=#36-è§£å†³-weave-å¼‚å¸¸>3.6 è§£å†³ weave å¼‚å¸¸</a></li><li><a href=#37-è§£å†³-metrics-server-å¼‚å¸¸>3.7 è§£å†³ metrics-server å¼‚å¸¸</a></li><li><a href=#38-è§£å†³-minio-å¼‚å¸¸>3.8 è§£å†³ Minio å¼‚å¸¸</a></li><li><a href=#39-è§£å†³ç»„ä»¶å¼‚å¸¸é€šç”¨æ–¹æ¡ˆ>3.9 è§£å†³ç»„ä»¶å¼‚å¸¸é€šç”¨æ–¹æ¡ˆ</a></li></ul></li><li><a href=#4-éƒ¨ç½²æµ‹è¯•èµ„æº>4. éƒ¨ç½²æµ‹è¯•èµ„æº</a><ul><li><a href=#41-åˆ›å»º-nginx-deployment>4.1 åˆ›å»º Nginx Deployment</a></li><li><a href=#42-åˆ›å»º-nginx-service>4.2 åˆ›å»º Nginx Service</a></li><li><a href=#43-éªŒè¯-nginx-deployment-å’Œ-pod>4.3 éªŒè¯ Nginx Deployment å’Œ Pod</a></li><li><a href=#44-éªŒè¯-nginx-é•œåƒæ¶æ„>4.4 éªŒè¯ Nginx é•œåƒæ¶æ„</a></li><li><a href=#45-éªŒè¯-nginx-service>4.5 éªŒè¯ Nginx Service</a></li><li><a href=#46-éªŒè¯æœåŠ¡>4.6 éªŒè¯æœåŠ¡</a></li><li><a href=#47-åœ¨ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹>4.7 åœ¨ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹</a></li></ul></li><li><a href=#5-è¡¥å……è¯´æ˜>5. è¡¥å……è¯´æ˜</a><ul><li><a href=#51-æŸ¥çœ‹-image-åˆ—è¡¨>5.1 æŸ¥çœ‹ Image åˆ—è¡¨</a></li><li><a href=#52-devops-æ¨¡å—éªŒè¯è¯´æ˜>5.2 DevOps æ¨¡å—éªŒè¯è¯´æ˜</a></li></ul></li><li><a href=#6-å¸¸è§é—®é¢˜>6. å¸¸è§é—®é¢˜</a><ul><li><a href=#61-é—®é¢˜-1>6.1 é—®é¢˜ 1</a></li><li><a href=#62-é—®é¢˜-2>6.2 é—®é¢˜ 2</a></li></ul></li><li><a href=#7-æ€»ç»“>7. æ€»ç»“</a></li></ul></nav></div></div></div></div></section><div class=SubscribeForm><div class=innerBox><img class=close src=/images/home/close.svg alt=close><p class=description>é€šè¿‡é‚®ä»¶æ¥æ”¶ KubeSphere æœ€æ–°çš„æŠ€æœ¯åšå®¢ä¸äº§å“æ›´æ–°çš„é€šçŸ¥</p><div id=blog_formAddress data-actionaddress="https://www.sendcloud.net/v3/api/subInvite/subscription?invitecode=1dc5a4fb-894c-4470-b01d-ca7fa9d47a46" data-usesendcloud=true data-lang=zh><input name=EMAIL id=email-input-blog type=text placeholder>
<button id=email-submit-blog>è®¢é˜…</button>
<span id=message_blog data-message1=è¯·æä¾›æ‚¨çš„é‚®ç®± data-message2=è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€! data-message3=é‚®ç®±åœ°å€å·²ç»å­˜åœ¨ style=color:red></span><span id=message1_blog style=color:#00a971 data-success=è®¢é˜…æˆåŠŸå•¦ï¼Œæˆ‘ä»¬ä¿è¯ä¸ä¼šç»™ä½ å‘åƒåœ¾é‚®ä»¶çš„å•¦></span></div></div></div><footer><div class=footer><div class="footer-main common-layout"><div class=up-main><div class=left-div><img src=/images/logo.svg alt class=foot-logo><p>é€šè¿‡é‚®ä»¶æ¥æ”¶ KubeSphere æœ€æ–°çš„æŠ€æœ¯åšå®¢ä¸äº§å“æ›´æ–°çš„é€šçŸ¥</p><div id=formAddress data-actionaddress="https://www.sendcloud.net/v3/api/subInvite/subscription?invitecode=1dc5a4fb-894c-4470-b01d-ca7fa9d47a46" data-usesendcloud=true data-lang=zh><input name=EMAIL id=email-input type=text placeholder=è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€>
<button id=email-submit>è®¢é˜…</button></div><span id=message data-message1=è¯·æä¾›æ‚¨çš„é‚®ç®± data-message2=è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€! data-message3=é‚®ç®±åœ°å€å·²ç»å­˜åœ¨></span><span id=message1 style=color:#00a971 data-success=è®¢é˜…æˆåŠŸå•¦ï¼Œæˆ‘ä»¬ä¿è¯ä¸ä¼šç»™ä½ å‘åƒåœ¾é‚®ä»¶çš„å•¦></span><script>var bindSubmit=function(){var e=$("#email-input");$("#email-submit").click(function(t){t.stopPropagation();var s,o,n=e.val(),i=$("#message").data("message1"),a=$("#message").data("message2"),r=$("#message").data("message3"),c=$("#message1").data("success");if(n)if(validateEmail(n)){if(s=$("#formAddress").data("usesendcloud"),!s)return;o=$("#formAddress").data("actionaddress"),$.post({type:"post",url:o,data:{email:$("#email-input").val().toString()},success:function(){showSuccessMessage(c),setTimeout(function(){$("#email-input").val("")},1e3)},error:function(){showMessage(r)}})}else t.preventDefault(),showMessage(a);else t.preventDefault(),showMessage(i)})},validateEmail=function(e){var t=/^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\.)+[A-Za-z]{2,6}$/;return t.test(e)},showMessage=function(e){$("#message").html(e).show()},showSuccessMessage=function(e){$("#message1").html(e).show()},bindHideMessage=function(){$(window).click(function(){$("#message").hide(),$("#message1").hide()})},bindClose=function(){$(".formBox .close").click(function(e){e.stopPropagation(),$(".formBox").fadeOut()})};bindSubmit(),bindClose(),bindHideMessage()</script><span id=message data-message1=è¯·æä¾›æ‚¨çš„é‚®ç®± data-message2=è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€!></span></div><div class=right-div><ul class=common-flex-layout><li class=nowrap-li><div class=h3>åº”ç”¨åœºæ™¯</div><a href=/zh/devops/>æ‹¥æŠ±ä¸€ç«™å¼ DevOps</a>
<a href=/zh/service-mesh/>åœ¨ K8s è¿è¡Œå¾®æœåŠ¡</a>
<a href=/zh/observability/>æ„å»ºäº‘åŸç”Ÿå¯è§‚æµ‹æ€§</a>
<a href=https://github.com/kubesphere/kubekey target=_blank rel="noopener noreferrer">K8s ä¸€é”®éƒ¨ç½²ä¸è¿ç»´</a>
<a href=https://github.com/OpenFunction/OpenFunction target=_blank rel="noopener noreferrer">æ„å»º FaaS å¹³å°ä¸ Serverless æ¶æ„</a>
<a href=https://github.com/openpitrix/openpitrix target=_blank rel="noopener noreferrer">å¤šäº‘åº”ç”¨ç®¡ç†å¹³å°</a></li><li class=nowrap-li><div class=h3>èµ„æº</div><a href=/zh/projects/>å¼€æºé¡¹ç›®</a>
<a href=/zh/blogs/>æŠ€æœ¯åšå®¢</a>
<a href=/zh/conferences/>å¼€æºå³°ä¼š</a>
<a href=/zh/videos/>è§†é¢‘èµ„æº</a>
<a href=/zh/learn/>äº‘åŸç”Ÿå®æˆ˜</a></li><li class=nowrap-li><div class=h3>æ–‡æ¡£ä¸­å¿ƒ</div><a href=/zh/docs/v4.1/01-intro/01-introduction/>äº§å“ä»‹ç»</a>
<a href=/zh/docs/v4.1/03-installation-and-upgrade/02-install-kubesphere/02-install-kubernetes-and-kubesphere/>å¦‚ä½•å®‰è£…</a>
<a href=/zh/docs/v4.1/02-quickstart/>å¿«é€Ÿå…¥é—¨</a>
<a href=/zh/docs/v3.4/reference/api-docs/>API æ–‡æ¡£</a></li><li class=nowrap-li><div class=h3>å¼€æºç¤¾åŒº</div><a href=/zh/contribution/>å‚ä¸è´¡çŒ®</a>
<a href=/zh/live/>ç¤¾åŒºæ´»åŠ¨</a>
<a href=/zh/case/>æ¡ˆä¾‹å­¦ä¹ </a>
<a href=/zh/partner/>åˆä½œä¼™ä¼´</a>
<a href=/zh/user-group/>ç”¨æˆ·å§”å‘˜ä¼š</a>
<a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md target=_blank rel="noopener noreferrer">ç‰ˆæœ¬è®¡åˆ’</a>
<a href=https://kubesphere.com.cn/ target=_blank rel="noopener noreferrer">ä¸­å›½ç«™</a>
<a href=https://ask.kubesphere.io/forum target=_blank rel="noopener noreferrer">ä¸­æ–‡è®ºå›</a>
<a href=https://kubesphere.io target=_blank rel="noopener noreferrer">å…¨çƒç«™</a></li><li class=nowrap-li><div class=h3>äº§å“ä¸æœåŠ¡</div><a href=https://aws.amazon.com/cn/quickstart/architecture/qingcloud-kubesphere/ target=_blank rel="noopener noreferrer">KubeSphere on AWS</a>
<a href=https://market.azure.cn/marketplace/apps/qingcloud.kubesphere target=_blank rel="noopener noreferrer">KubeSphere on Azure</a>
<a href=https://marketplace.digitalocean.com/apps/kubesphere target=_blank rel="noopener noreferrer">KubeSphere on DigitalOcean</a>
<a href=https://www.qingcloud.com/products/kubesphereqke target=_blank rel="noopener noreferrer">KubeSphere on QingCloud(QKE)</a>
<a href=https://kubesphere.com.cn/kse/ target=_blank rel="noopener noreferrer">KubeSphere ä¼ä¸šç‰ˆ</a>
<a href=https://kubesphere.cloud/ksv/ target=_blank rel="noopener noreferrer">KubeSphere è™šæ‹ŸåŒ–å¹³å°</a>
<a href=https://kubesphere.com.cn/marketplace/ target=_blank rel="noopener noreferrer">äº‘åŸç”Ÿæ‰©å±•ç»„ä»¶å¸‚åœº</a>
<a href=https://kubesphere.cloud target=_blank rel="noopener noreferrer">äº‘åŸç”Ÿåº”ç”¨æœåŠ¡å¹³å°</a>
<a href=https://m.qingcloud.com/p/aec50 target=_blank rel="noopener noreferrer">äº†è§£å•†ä¸šäº§å“ä¸å’¨è¯¢åˆä½œ</a></li></ul></div></div><div class=down-main><div class=img-div><a class=wechat href=javascript:void(0); aria-label=wechat><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="0 0 28 28"><defs><path id="a" d="M0 0h15.673v12.156H0z"/></defs><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="13" cy="13" r="13" stroke="#B6C2CD"/><g transform="translate(5 7)"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path fill="currentColor" d="M15.673 7.898c0-2.061-2.173-3.74-4.619-3.74-2.59.0-4.625 1.679-4.625 3.74.0 2.066 2.035 3.738 4.625 3.738.542.0 1.09-.13 1.632-.256l1.493.776-.408-1.29c1.09-.776 1.902-1.81 1.902-2.968zm-6.119-.645c-.27.0-.541-.257-.541-.514.0-.256.27-.514.541-.514.41.0.681.258.681.514.0.257-.271.514-.681.514zm2.994.0c-.27.0-.541-.257-.541-.514.0-.256.27-.514.54-.514.41.0.681.258.681.514.0.257-.277.514-.68.514z" mask="url(#b)"/><path fill="currentColor" d="M10.602 3.674c.177.0.356.011.533.029C10.657 1.576 8.27.0 5.543.0 2.498.0.0 1.974.0 4.485c0 1.45.829 2.64 2.216 3.564l-.552 1.588 1.94-.929c.693.129 1.251.263 1.94.263.17.0.343-.005.515-.022a3.68 3.68.0 01-.172-1.104c0-2.302 2.081-4.171 4.715-4.171zM7.618 2.243c.417.0.693.263.693.66s-.276.66-.693.66c-.418.0-.835-.263-.835-.66.006-.398.423-.66.835-.66zm-3.88 1.319c-.417.0-.834-.263-.834-.66s.417-.66.834-.66c.418.0.695.263.695.66.0.392-.277.66-.695.66z" mask="url(#b)"/></g></g></svg><div class=hide-div><img src=/images/home/wechat.svg alt></div></a><a class=facebook-a href=https://www.facebook.com/kubesphere target=_blank aria-label=facebook></a><a class=twitter-a href=https://x.com/KubeSphere target=_blank aria-label=twitter rel="noopener noreferrer"></a><a class=linkedin-a href=https://www.linkedin.com/company/kubesphere/ target=_blank aria-label=linkedin rel="noopener noreferrer"></a><a class=bilibili-a href=https://space.bilibili.com/438908638 target=_blank aria-label=bilibili rel="noopener noreferrer"></a><a class=slack-a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank aria-label=slack rel="noopener noreferrer"></a><a class=github-a href=https://github.com/kubesphere/kubesphere target=_blank aria-label=github rel="noopener noreferrer"></a><a class=medium-a href=https://itnext.io/@kubesphere target=_blank aria-label=medium rel="noopener noreferrer"></a></div><p class=p1></p><p class=case><a href=http://www.beian.miit.gov.cn/ target=_blank rel="noopener noreferrer"><span>äº¬ICPå¤‡13019086å·</span>
</a><a target=_blank rel="noopener noreferrer" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502041003"><img src=/images/footer/case-icon.png alt=å¤‡æ¡ˆå›¾æ ‡>
<span>äº¬å…¬ç½‘å®‰å¤‡ 11010502041003å·</span></a></p></div></div></div><div class=cookie><div class=common-layout><p>æ‚¨çš„éšç§å¯¹æˆ‘ä»¬å¾ˆé‡è¦ã€‚æˆ‘ä»¬ä½¿ç”¨Cookieæ¥è®°ä½è®¢é˜…è¯¦ç»†ä¿¡æ¯ï¼Œä¼˜åŒ–ç½‘ç«™åŠŸèƒ½å¹¶äº¤ä»˜æ ¹æ®æ‚¨çš„å…´è¶£é‡èº«å®šåˆ¶çš„å†…å®¹ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„<a href=/zh/privacy>éšç§æ”¿ç­–</a>.</p><button>
æ¥å—å¹¶ç»§ç»­</button></div></div></footer><script>var lazyLoad=function(e,t){for(var n,o,i,s=0;s<t;s++){if(n=e.eq(s),o=n.attr("data-loaded"),o)continue;n.offset().top<parseInt($(window).height())+parseInt($(window).scrollTop())&&(i=n.attr("src"),n.attr("src",i),n.attr("data-loaded",!0))}},bindLayLoad=function(){var e=$("img"),t=e.length;lazyLoad(e,t),$(window).scroll(function(){lazyLoad(e,t)})},bindAddPadding=function(){var e=$("#close-join");e.length>0&&$(".main-section").addClass("padding")},docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t){return!!e&&!/^(?:expires|max-age|path|domain|secure)$/i.test(e)&&(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t),!0)}},bindHideCookie=function(){var t=docCookies.getItem("hasAuth"),e=$(".cookie");t?e.hide():e.show(),e.find("button").on("click",function(){docCookies.setItem("hasAuth","1"),e.hide()})};bindAddPadding(),bindHideCookie()</script><script type=text/javascript src=/js/aside.2d6977c0f16aef4ed3e886dd66675ce74bd0efcd467c2b2bcdb30b92d5e7c7c0e5c6e0c9d8f09a883c22f58df9e6b0b6347fcdd3c9a920b7faba6d7f91a201c3.js integrity="sha512-LWl3wPFq707T6IbdZmdc50vQ781GfCsrzbMLktXnx8DlxuDJ2PCaiDwi9Y355rC2NH/N08mpILf6um1/kaIBww=="></script><script type=text/javascript src=/js/markdown-tab.17f9f46b021adebc7250ce1b07134a577b307e7a436daa4aaf388f218e8463966f53770b26a64817c06c168738a887672d47fb4c29615adfc446e11d09a344cf.js integrity="sha512-F/n0awIa3rxyUM4bBxNKV3swfnpDbapKrziPIY6EY5ZvU3cLJqZIF8BsFoc4qIdnLUf7TClhWt/ERuEdCaNEzw=="></script><script>let forbidForm=!1;var viewer=new Viewer(document.querySelector(".md-body"),{url:"src"}),blogBindSubmit=function(){var e=$("#email-input-blog");$("#email-submit-blog").click(function(t){t.stopPropagation();var s,o,n=e.val(),i=$("#message_blog").data("message1"),a=$("#message_blog").data("message2"),r=$("#message_blog").data("message3"),c=$("#message1_blog").data("success");if(n)if(validateEmail(n)){if(s=$("#blog_formAddress").data("usesendcloud"),!s)return;o=$("#blog_formAddress").data("actionaddress"),$.post({type:"post",url:o,data:{email:n.toString()},success:function(){showSuccessMessage_blog(c),setTimeout(function(){window.onscroll="",$(".SubscribeForm").hide(),$("#email-input-blog").val("")},5e3)},error:function(){showMessage_blog(r)}})}else t.preventDefault(),$("#message_blog").html(a).show();else t.preventDefault(),$("#message_blog").html(i).show()})},validateEmail=function(e){var t=/^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\.)+[A-Za-z]{2,6}$/;return t.test(e)},bindHideMessageBlog=function(){$(window).click(function(){$("#message_blog").hide()})},bindCloseBlog=function(){$(".SubscribeForm .close").click(function(e){e.stopPropagation(),$(".SubscribeForm").fadeOut(),window.onscroll=""})},showMessage_blog=function(e){$("#message_blog").html(e).show()},showSuccessMessage_blog=function(e){$("#message1_blog").html(e).show()};window.onscroll=()=>{var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollHeight||document.body.scrollHeight;forbidForm&&(window.onscroll=""),e+t>n-710?$(".SubscribeForm").hide():$(".SubscribeForm").show()},blogBindSubmit(),bindCloseBlog(),bindHideMessageBlog()</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></body></html>