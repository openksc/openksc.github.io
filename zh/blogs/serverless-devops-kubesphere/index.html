<!doctype html><html lang=en-US><head><meta charset=utf-8><title>对于 Serverless, DevOps, 多云及边缘可观测性的思考与实践</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="本文是整理自 2020 年 KubeSphere 社区组织的年度 meetup 上 KubeSphere  可观测性负责人霍秉杰的分享，主要介绍了 Serverless 的含义、处理模型、应用场景及 Serverless DeOps 等等，以及多云和边缘可观测性的思考和实践。"><meta name=keywords content="KubeSphere,Serverless,Kubernetes,DevOps,可观测性"><meta property="og:type" content="article"><meta property="og:title" content="对于 Serverless, DevOps, 多云及边缘可观测性的思考与实践"><meta property="og:description" content="本文是整理自 2020 年 KubeSphere 社区组织的年度 meetup 上 KubeSphere  可观测性负责人霍秉杰的分享，主要介绍了 Serverless 的含义、处理模型、应用场景及 Serverless DeOps 等等，以及多云和边缘可观测性的思考和实践。"><meta property="og:image" content="https://pek3b.qingstor.com/kubesphere-community/images/Serverless-banner.png"><meta property="og:url" content="https://openksc.github.io/zh/blogs/serverless-devops-kubesphere/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@KubeSphere"><meta property="twitter:image" content="https://pek3b.qingstor.com/kubesphere-community/images/Serverless-banner.png"><meta name=docsearch:language content="zh-CN"><meta name=docsearch:version content><link rel=canonical href=https://kubesphere.io/zh/blogs/serverless-devops-kubesphere/><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=apple-touch-icon href=/images/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/svg+xml href=/images/favicons/favicon.svg><link rel=icon type=image/png href=/images/favicons/favicon.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#00ad6e><meta name=msapplication-config content='/images/favicons/browserconfig.xml'><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=/fonts/Roboto/stylesheet.css><link rel=stylesheet href=/fonts/ProximaNova/stylesheet.css><link rel=stylesheet href=/css/jquery.modal.min.css><link rel=stylesheet href=/css/viewer.min.css><link rel=stylesheet href=/swiper/swiper-bundle.min.css><link rel=stylesheet href=/scss/common.min.0c3fdcc05ec210321169846714f74b11c4a1baf09a1833fa9273b2347c81e636.css><script src=/js/jquery-3.7.1.min.js></script><script src=/js/viewer.min.js></script><script src=/js/jquery.modal.min.js></script><script src=/swiper/swiper-bundle.min.js></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?0888981f1fa45d241b1fb6962da2963e",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-YYCVN36HT5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YYCVN36HT5")</script><script type=text/javascript>!function(e,t,n,s,o){e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=("https:"==document.location.protocol?"https://":"http://")+s,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio"),gio("init","8a24ae300cbf8b8c",{}),gio("send")</script><link rel=stylesheet href=/scss/content.min.f73b326fbf8c5bd331900b0de21c7dde608a4926f482f6465f9ae1d9049b83ad.css><link rel=stylesheet href=/scss/markdown.min.db47186481122431dffae72d17dbbd51f90b66f022cc163458645709924e4eac.css></head><body><header class=navigation><div class=join-div><div class=content>🚀 KubeSphere v4.1.3 发布，多项优化与改进，欢迎体验！<a href=/zh/docs/v4.1/20-release-notes/release-v413/ target=_blank rel="noopener noreferrer">请查看 Release notes →</a>
<img id=close-join src=/images/header/close.svg alt=close></div></div><div class=common-layout><div class=header-container><a href=/zh/ aria-label=logo><img src=/images/header/logo.svg alt class=logo></a><ul class=nav><li class=menu-li><span class=menu-span>应用场景</span><ul class="dropdown-menu menu-2"><li><a href=/zh/devops/>拥抱一站式 DevOps 工作流</a></li><li><a href=/zh/service-mesh/>在 Kubernetes 运行微服务</a></li><li><a href=/zh/observability/>构建丰富的云原生可观测性</a></li></ul></li><li class=menu-li><span class=menu-span>资源</span><ul class="dropdown-menu menu-3"><li><a href=/zh/projects/>开源项目</a></li><li><a href=/zh/conferences/>开源峰会</a></li><li><a href=/zh/blogs/>技术博客</a></li><li><a href=/zh/videos/>视频资源</a></li><li><a href=/zh/learn/>云原生实战</a></li></ul></li><li class=menu-li><span class=menu-span>文档中心</span><ul class="dropdown-menu menu-4"><li><a href=/zh/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/zh/docs/v3.4>v3.4</a></li><li><a href=/zh/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/zh/ target=_blank rel="noopener noreferrer">扩展组件开发</a></li><li><a href=https://kube.design/ target=_blank rel="noopener noreferrer">Kube Design</a></li></ul></li><li class=menu-li><span class=menu-span>开源社区</span><ul class="dropdown-menu menu-5"><li><a href=/zh/contribution/>参与贡献</a></li><li><a href=/zh/live/>社区活动</a></li><li><a href=/zh/case/>案例学习</a></li><li><a href=/zh/partner/>合作伙伴</a></li><li><a href=/zh/user-group/>用户委员会</a></li><li><a href=/zh/news/>动态</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md target=_blank rel="noopener noreferrer">版本计划</a></li><li><a href=https://www.kubesphere.io/zh/ target=_blank rel="noopener noreferrer">中国站</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025 target=_blank rel="noopener noreferrer">开源之夏 2025</a></li></ul></li><li><a data-docs=用户论坛 href=https://ask.kubesphere.io/forum target=_blank rel="noopener noreferrer">用户论坛</a></li><li><a data-docs=认证 href=https://kubesphere.cloud/certification/ target=_blank rel="noopener noreferrer">认证</a></li></ul><div class=right-menu><ul><li class=language-menu><div><img src=/images/header/black.svg alt>
<span>简体中文</span></div><ul class=dropdown-menu><li onclick='handleLangClick("zh","/zh/blogs/serverless-devops-kubesphere/")'>简体中文</li></ul></li><li class=github-li><div class=github-star><a class=star-btn href=https://github.com/kubesphere/kubesphere rel="noopener noreferrer" target=_blank><span class=star-img></span>&nbsp;<span>Star</span>
</a><a class=social-count href=https://github.com/kubesphere/kubesphere/stargazers rel="noopener noreferrer" target=_blank></a></div></li><li class=menu-icon><img src=/images/header/menu.svg alt></li></ul></div></div></div><div id=modal-for-menu class=modal><ul class=nav><li data-check=0 class=menu-li><span class=menu-span>应用场景</span><ul class=dropdown-menu><li><a href=/zh/devops/>拥抱一站式 DevOps 工作流</a></li><li><a href=/zh/service-mesh/>在 Kubernetes 运行微服务</a></li><li><a href=/zh/observability/>构建丰富的云原生可观测性</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>资源</span><ul class=dropdown-menu><li><a href=/zh/projects/>开源项目</a></li><li><a href=/zh/conferences/>开源峰会</a></li><li><a href=/zh/blogs/>技术博客</a></li><li><a href=/zh/videos/>视频资源</a></li><li><a href=/zh/learn/>云原生实战</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>文档中心</span><ul class=dropdown-menu><li><a href=/zh/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/zh/docs/v3.4>v3.4</a></li><li><a href=/zh/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/zh/>扩展组件开发</a></li><li><a href=https://kube.design/>Kube Design</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>开源社区</span><ul class=dropdown-menu><li><a href=/zh/contribution/>参与贡献</a></li><li><a href=/zh/live/>社区活动</a></li><li><a href=/zh/case/>案例学习</a></li><li><a href=/zh/partner/>合作伙伴</a></li><li><a href=/zh/user-group/>用户委员会</a></li><li><a href=/zh/news/>动态</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md>版本计划</a></li><li><a href=https://www.kubesphere.io/zh/>中国站</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025>开源之夏 2025</a></li></ul></li><li><a data-docs=用户论坛 href=https://ask.kubesphere.io/forum>用户论坛</a></li><li><a data-docs=认证 href=https://kubesphere.cloud/certification/>认证</a></li></ul><div class=link-div><a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank rel="noopener noreferrer" aria-label=slack><img src=/images/header/slack-hover.svg alt>
</a><a href=https://x.com/KubeSphere target=_blank rel="noopener noreferrer" aria-label=twitter><img src=/images/header/twitter-hover.svg alt>
</a><a href=https://github.com/kubesphere/kubesphere target=_blank rel="noopener noreferrer" aria-label=github><img src=/images/header/github-hover.svg alt></a></div></div></header><script>var bindNavMouseEvent,bindScrollChangeHeader,bindClickShowMenu,bindClickModalLi,bindClickClose,language,handleLangClick,githubApiLink="https://api.github.com/repos/kubesphere/kubesphere",getStar=function(){$(".social-count").hide(),$.getJSON(githubApiLink,function(e){$(".social-count").show().html(e.stargazers_count)})};getStar(),bindNavMouseEvent=function(e,t){t||(t=$(e));var n=!1;t.mouseenter(function(){if(n)return!1;n=!0,$(this).find(".dropdown-menu").fadeIn(200,function(){n=!1})}),t.mouseleave(function(){$(this).find(".dropdown-menu").fadeOut(200)})},bindScrollChangeHeader=function(){var t=100,e=$("header");window.addEventListener("scroll",function(){var t=window.scrollY;t>0?e.addClass("navigationScroll"):e.removeClass("navigationScroll")})},bindClickShowMenu=function(){$(".menu-icon").click(function(){$("#modal-for-menu").modal()})},bindClickModalLi=function(){$(".modal .menu-li").click(function(){var e=$(this).data("check");e===0?($(this).data("check",1),$(this).find(".dropdown-menu").slideDown(200)):($(this).data("check",0),$(this).find(".dropdown-menu").slideUp(200)),$(this).find(".menu-span").toggleClass("up")})},bindClickClose=function(){$("#close-join").click(function(){$(".navigation .join-div").hide(),$(".main-section").removeClass("padding")})},language="zh",bindClickClose(),bindScrollChangeHeader(),$(".header-container .menu-li").each(function(){bindNavMouseEvent("",$(this))}),bindNavMouseEvent(".header-container .language-menu"),bindNavMouseEvent(".header-container .btn-li"),bindClickShowMenu(),bindClickModalLi(),handleLangClick=function(e,t){try{localStorage.setItem("lang",e)}catch{}location.href=t}</script><section class=main-section><div class=common-layout><div class=breadcrumb><span><a href=/zh/blogs/>技术博客</a> > </span><span>对于 Serverless, DevOps, 多云及边缘可观测性的思考与实践</span></div><div class='main-div middle-div'><div class=author>霍秉杰</div><span class=date>发布于：2021-03-25</span>&nbsp;&nbsp;&nbsp;
<span style=font-size:14px;color:#919aa3 id=busuanzi_container_page_pv>本文总阅读量：<span id=busuanzi_value_page_pv></span></span><h1>对于 Serverless, DevOps, 多云及边缘可观测性的思考与实践</h1><div class=share-1><div class=share><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f&text=%e5%af%b9%e4%ba%8e%20Serverless%2c%20DevOps%2c%20%e5%a4%9a%e4%ba%91%e5%8f%8a%e8%be%b9%e7%bc%98%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7%e7%9a%84%e6%80%9d%e8%80%83%e4%b8%8e%e5%ae%9e%e8%b7%b5" target=_blank rel="noopener noreferrer"><img src=/images/share/Twitter.svg alt="twitter icon">
</a><a href="https://reddit.com/submit?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f&title=%e5%af%b9%e4%ba%8e%20Serverless%2c%20DevOps%2c%20%e5%a4%9a%e4%ba%91%e5%8f%8a%e8%be%b9%e7%bc%98%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7%e7%9a%84%e6%80%9d%e8%80%83%e4%b8%8e%e5%ae%9e%e8%b7%b5" target=_blank rel="noopener noreferrer"><img src=/images/share/Reddit.svg alt="reddit icon">
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Facebook.svg alt="facebook icon">
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Linkedin.svg alt="linkedin icon">
</a><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f&t=%e5%af%b9%e4%ba%8e%20Serverless%2c%20DevOps%2c%20%e5%a4%9a%e4%ba%91%e5%8f%8a%e8%be%b9%e7%bc%98%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7%e7%9a%84%e6%80%9d%e8%80%83%e4%b8%8e%e5%ae%9e%e8%b7%b5" target=_blank rel="noopener noreferrer"><img src=/images/share/HackerNews.svg alt="hackernews icon"></a></div></div><div class=content><div class=md-body><p>从单体到微服务，再到 Serverless，应用在逐渐地轻量化。有人可能会有疑问，微服务都还没有顺畅的搭建起来，现在又出了 Serverless，应该怎么办？</p><p>其实两者之间并不是一个相互替代的关系。我们可以看到，现在有单体应用在跑，也有微服务的应用在跑，那么以后 Serverless 这种应用也会有一定的用途。而微服务里也可以调用 Serverless 的函数（function）。</p><h2 id=serverless-定义>Serverless 定义</h2><p>Serverless 类似于之前大数据的概念，大家都知道，但不是特别确切了解其中的含义。</p><p>CNCF 有一个 Serverless 工作组，在 Serverless 的白皮书中进行了定义。简单来讲就是，Serverless 等于 FaaS (Function-as-a-Service) 加上 BaaS (Backend-as-a-Service)。我们可以将应用程序以函数的形式打包，然后上传到 FaaS 平台。这样我们就不用关心底层服务器的运维，因为它能自动扩展，而且是按需收费。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/severless-2.png alt></p><p>Serverless 有一个很重要的特征，就是事件驱动模式，即依赖于外部事件去触发它运行。</p><p>至于 Backend-as-a-Service，你可以理解成支撑 Serverless 运行的一些 API 的服务，比如对象存储或者是数据库服务。</p><h2 id=serverless-处理模型>Serverless 处理模型</h2><p>下图是 Serverless 的处理模型。上文讲到，它的模式是事件触发，所以它会有事件源产生事件，然后 FaaS 的 controller 是根据这些事件去启动 function 的 instance，而且能够实时的去扩展，能够 scale 到 0，这样动态的去给用户提供服务。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-20.png alt></p><h2 id=函数生命周期>函数生命周期</h2><p>函数（function）是有生命周期的，也就是函数部署流水线的流程。首先提供 function 的源码和 spec，然后把源码 build 成 docker image，再把 docker image 部署到 FaaS 平台上。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-12.png alt></p><p>涉及到函数，肯定会有函数的创建、更新、发布等操作，因篇幅关系，这里就不再赘述了。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-4.png alt></p><h2 id=serverless-应用场景>Serverless 应用场景</h2><h3 id=对-iot-设备数据进行分析>对 IoT 设备数据进行分析</h3><p>目前边缘计算，还有 IoT 的应用都在逐渐地兴起。 比如 IoT 中的一个传感器，它会源源不断的产生一些数据（例如传感器温度超过了 60 度），我们可以调用一个云端的函数来处理这件事情（发个通知或者做一个应用）。所以 Serverless 和 IoT 这个场景可以很好地结合起来。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-5.png alt></p><h3 id=ai-模型服务>AI 模型服务</h3><p>AI 也在逐渐兴起。边缘或者是云端提供模型的服务，因为很多模型的推理都要占用 GPU，所以如果一直占用 instance，非常耗费资源，而且还增加了成本。但是如果用 Serverless 这种方式去提供服务，比如利用 Kubeflow 项目下的 KFServing 提供推理服务，在空闲的时候可以 scale 到 0，有流量的时候会自动 scale up 起来，所以能很好地节省成本。</p><p>其他场景见上图，因为篇幅关系不再一一展开讲述。</p><h2 id=serverless-优势>Serverless 优势</h2><ul><li>降低成本</li><li>提高资源利用率</li><li>无需关系底层基础设施的运维及管理</li><li>灵活可拓展</li><li>提升开发效率</li></ul><h2 id=开源-serverless-平台>开源 Serverless 平台</h2><p>我们针对开源的 Serverless 平台做了一个调研。下图中列出的都是开源的 Serverless 平台，可以分为两类，一类是 Knative，另一类就是非 Knative。</p><p>为什么这么分类呢？因为上文讲到，Serverless 主要就是有一个 FaaS 的功能，但 Knative 并不是一个严格意义上的 FaaS 平台，而其他开源的 Serverless 平台都属于 FaaS 平台。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-7.png alt></p><p>下图是在 Google trend 上查询到的数据。在过去一年中， Knative 的热度基本是最高的，OpenFaaS 的热度在 FaaS 平台中是比较靠前的。而过去 5 年的数据也类似，可以说，Knative 自问世以来，热度一直居高不下。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-8.png alt></p><p>下图是 CNCF 去年做的一个调查，调查显示，在可安装的 Serverless 平台里，Knative 是比较领先的，然后 OpenFaaS 在 FaaS 平台里是比较领先的。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-9.png alt></p><h3 id=knative-的优势>Knative 的优势</h3><p>大家可能会有疑问，上文说到 Knative 并不是一个严格意义上的 FaaS 平台，那么它为什么在 Serverless 领域会这么受欢迎呢？</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-10.png alt></p><p>有以下几个原因：</p><ol><li>Serverless 有几个要素，首先它是事件驱动的，所以它要对事件有很好的支撑。通过 Knative Eventing，可以对事件的管理有很好的支持，也形成了一套 cloudevent 规范，用于 Serverless 负载的交互。</li><li>我们上文讲到了，它需要把函数的源码去 build 成一个 docker 镜像，所以它也要有 build 的能力。之前这个组件叫 knative build，现在叫 Tekton。然后在函数发布的时候，可以利用 Knative serving，进行部署和版本管理。也就是说 Knative 是一个平台的平台。基于 Knative，你可以去构建更多的 Serverless 平台或者 FaaS 平台。</li><li>之前大家对 Knative 比较诟病的地方，就是它比较重，因为它依赖于 Istio。Knative 自身的安装，可能也就几十兆，但是装上 Istio 之后，会占用几 g 内存。然而目前它已经不再强依赖于 Istio 了，Istio 只是其中一个选项。你也可以使用别的组件，比如 ambassador、Gloo、Kong 去替代它做 API Gateway。这意味着 Knative 也在逐渐的轻量化。</li></ol><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-11.png alt="service  model"></p><h2 id=serverless-devops>Serverless DevOps</h2><p>函数要 build 成镜像会有一个 build 的过程，那么在 devops 里这个过程就是持续交付。然后把镜像部署到生产环境，在 devops 里面这个过程就是持续部署，所以 Serverless 和 DevOps 也有很多结合点。</p><h3 id=serverless-ci>Serverless CI</h3><p>Serverless 的 CI 也是需要的，但是因为它是函数，不是一个完整的 source code，所以它有一些不一样的地方。但是肯定也需要代码的质量扫描、单元测试这样的工作。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-13.png alt></p><h3 id=serverless-cd>Serverless CD</h3><p>对于 Serverless CD，build 的过程也就是函数的创建过程，会自动的把这个函数打包成镜像，这是由 FaaS 平台去完成的工作。</p><p>如果要将函数镜像发布到生产环境，需要进行审核。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-14.png alt></p><h3 id=serverless-cicd-工具>Serverless CI/CD 工具</h3><p>build 的过程，我们可以依赖于 tekton 去管理流水线。但是从 Kubernetes 1.20 开始，不再支持 docker 作为它默认的一个运行时了，也就是说以后 Kubernetes 里可以不安装 docker daemon。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-15.png alt></p><p>CNCF 官方的文档中，推荐了几个 build docker 镜像的工具，比如 Kaniko，img，buildah。他们各有各的优劣势，但是有一个共同点，就是不依赖于 docker daemon。你可以用 Kaniko 在 docker 里面 build 一个 docker 镜像，但是不需要连接 docker daemon。</p><p>另外一个比较新兴的工具是 Cloud Native Buildpacks，它更进一步，连 Dockerfile 都不需要了，根据源码就能检测出来，然后能够 build 出一个 docker 镜像。很多国外的公司，比如 Google、Pivotal，都在使用 Buildpacks。</p><h2 id=serverlessfaas-痛点>Serverless/FaaS 痛点</h2><p>目前有很多云厂商，而且几乎每个云厂商都有自己的函数平台。开源平台又有很多。所以大家会面临应该如何选择的问题，另外也会有厂商锁定的问题。</p><h2 id=kubesphere-serverless-路线图>KubeSphere Serverless 路线图</h2><p>我们做 Serverless 有一个想法，能不能做一个厂商中立的 FaaS 平台？它是一个平台的平台，你可以基于它去构建自己的 FaaS 平台。</p><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-17.png alt></p><p>通过 KubeSphere Serverless 平台，你可以在 Kubernetes 里边去运行各个云厂商的云函数，运行开源 FaaS 平台的云函数。当然，运行云厂商的云函数有个前提，就是它的 runtime 必须是开源的。</p><p>KubeSphere Serverless 平台大概率也会开源，到时候希望社区的小伙伴能够积极的参与进来。</p><p>另外一个就是 Serverless 的应用，你可以把它想象成一个 deployment + service 的替代品。它有一个额外的能力，就是可以动态的扩展，然后它也能够 scale 到 0。简单来讲，你可以提供一个 docker 镜像，然后你就拥有了一个能够自动伸缩的 service。</p><h2 id=多云及边缘可观测性>多云及边缘可观测性</h2><p>KubeSphere 在 3.0 版本中已经支持了多集群的管理，将会在 3.1 版本中支持边缘计算。所以这就产生了一个话题——多云及边缘计算的可观测性。</p><h3 id=需求和挑战>需求和挑战</h3><ol><li><p>多云及边缘集群的全局视图
很多用户使用 KubeSphere 管理多集群，希望能在一个统一的界面看到各个集群使用资源的情况。目前这个功能还在开发中。
也有社区用户反馈，KubeSphere 已经支持联邦的 federated 的这种调度，能不能在一个界面看到 federated 联邦的部署，各个集群里边，对运行的资源的占用情况，这也是一个需求。</p></li><li><p>跨集群监控指标
workspace 可能是跨了几个集群，那么能不能在一个界面里面看到 KubeSphere 在 workspace 中跨集群的资源的使用情况？</p></li><li><p>多云及边缘集群的全局告警
因为边缘节点的资源是比较受限的，边缘集群的监控和告警怎么解决？</p></li><li><p>网络状况各有不同
每个集群的特点都不一样。有的集群能够连接外网，也能够被外网连接。有的集群只能访问外网，不能够被 Host 集群主动连接。</p></li></ol><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-21.png alt></p><h3 id=架构>架构</h3><p><img src=https://pek3b.qingstor.com/kubesphere-community/images/serverless-22.png alt></p><p>针对 Member 集群的连接方式，如果是像上图中左上角这样的集群，它只能连接外网，我们就可以用 prometheus 通过 remote write，把监控数据写到 Host 集群的存储上去。</p><p>对于上图中左下角的集群，可以双向访问，可以直接查询数据，然后到 Host 集群上做一个聚合，这样就能够把多集群监控的数据展现出来了。</p><p>有的用户尤其是企业用户，在单个集群上存储的数据可能不是很多，如果只想存一两年应该怎么办呢？</p><p>还有一个方案就是可以把它存储到对象存储中。Host 集群上也可以去查对象存储里时间比较久远的监控数据。</p><p>以上是监控的解决方案，那么告警是怎么解决的呢？</p><p>各个集群可以有自定义的告警，KubeSphere v3.1 会支持这个功能。对于 Host 集群，也可以做对于全局的监控指标的告警。KubeSphere 也有一些自己研发的组件，比如 Kube-Events、Kube-Auditing，这些组件也会发出一些告警，发到 Alertmanager 中，最后通过 Notification Manager 发到云端。</p><p>对于边缘集群，它的资源比较受限，它的配置通常是两核 4 g、一核 2 g，如果去使用 prometheus 往云端发送数据，资源占用会比较多。</p><p>对于边缘节点，它的带宽较小，如果源源不断的把监控数据传输到云端，会浪费带宽。</p><p>我们的想法是，可以利用一些边缘的流失处理组件，比如 EMQ 的 Kuiper 这样的组件，然后配合我们云端下发告警的规则，能够实时的把边缘的一些设备、节点的数据进行实时的过滤。当超过了阈值，就发到云端告警。这就是对边缘节点的支持。</p></div></div><div class=share-2><div class=share><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f&text=%e5%af%b9%e4%ba%8e%20Serverless%2c%20DevOps%2c%20%e5%a4%9a%e4%ba%91%e5%8f%8a%e8%be%b9%e7%bc%98%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7%e7%9a%84%e6%80%9d%e8%80%83%e4%b8%8e%e5%ae%9e%e8%b7%b5" target=_blank rel="noopener noreferrer"><img src=/images/share/Twitter.svg alt="twitter icon">
</a><a href="https://reddit.com/submit?url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f&title=%e5%af%b9%e4%ba%8e%20Serverless%2c%20DevOps%2c%20%e5%a4%9a%e4%ba%91%e5%8f%8a%e8%be%b9%e7%bc%98%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7%e7%9a%84%e6%80%9d%e8%80%83%e4%b8%8e%e5%ae%9e%e8%b7%b5" target=_blank rel="noopener noreferrer"><img src=/images/share/Reddit.svg alt="reddit icon">
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Facebook.svg alt="facebook icon">
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f" target=_blank rel="noopener noreferrer"><img src=/images/share/Linkedin.svg alt="linkedin icon">
</a><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fopenksc.github.io%2fzh%2fblogs%2fserverless-devops-kubesphere%2f&t=%e5%af%b9%e4%ba%8e%20Serverless%2c%20DevOps%2c%20%e5%a4%9a%e4%ba%91%e5%8f%8a%e8%be%b9%e7%bc%98%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7%e7%9a%84%e6%80%9d%e8%80%83%e4%b8%8e%e5%ae%9e%e8%b7%b5" target=_blank rel="noopener noreferrer"><img src=/images/share/HackerNews.svg alt="hackernews icon"></a></div></div></div><div class=aside><div class=inner-div><div class=title>目录</div><div class=tabs><nav id=TableOfContents><ul><li><a href=#serverless-定义>Serverless 定义</a></li><li><a href=#serverless-处理模型>Serverless 处理模型</a></li><li><a href=#函数生命周期>函数生命周期</a></li><li><a href=#serverless-应用场景>Serverless 应用场景</a><ul><li><a href=#对-iot-设备数据进行分析>对 IoT 设备数据进行分析</a></li><li><a href=#ai-模型服务>AI 模型服务</a></li></ul></li><li><a href=#serverless-优势>Serverless 优势</a></li><li><a href=#开源-serverless-平台>开源 Serverless 平台</a><ul><li><a href=#knative-的优势>Knative 的优势</a></li></ul></li><li><a href=#serverless-devops>Serverless DevOps</a><ul><li><a href=#serverless-ci>Serverless CI</a></li><li><a href=#serverless-cd>Serverless CD</a></li><li><a href=#serverless-cicd-工具>Serverless CI/CD 工具</a></li></ul></li><li><a href=#serverlessfaas-痛点>Serverless/FaaS 痛点</a></li><li><a href=#kubesphere-serverless-路线图>KubeSphere Serverless 路线图</a></li><li><a href=#多云及边缘可观测性>多云及边缘可观测性</a><ul><li><a href=#需求和挑战>需求和挑战</a></li><li><a href=#架构>架构</a></li></ul></li></ul></nav></div></div></div></div></section><div class=SubscribeForm><div class=innerBox><img class=close src=/images/home/close.svg alt=close><p class=description>通过邮件接收 KubeSphere 最新的技术博客与产品更新的通知</p><div id=blog_formAddress data-actionaddress="https://www.sendcloud.net/v3/api/subInvite/subscription?invitecode=1dc5a4fb-894c-4470-b01d-ca7fa9d47a46" data-usesendcloud=true data-lang=zh><input name=EMAIL id=email-input-blog type=text placeholder>
<button id=email-submit-blog>订阅</button>
<span id=message_blog data-message1=请提供您的邮箱 data-message2=请输入有效的邮箱地址! data-message3=邮箱地址已经存在 style=color:red></span><span id=message1_blog style=color:#00a971 data-success=订阅成功啦，我们保证不会给你发垃圾邮件的啦></span></div></div></div><footer><div class=footer><div class="footer-main common-layout"><div class=up-main><div class=left-div><img src=/images/logo.svg alt class=foot-logo><p>通过邮件接收 KubeSphere 最新的技术博客与产品更新的通知</p><div id=formAddress data-actionaddress="https://www.sendcloud.net/v3/api/subInvite/subscription?invitecode=1dc5a4fb-894c-4470-b01d-ca7fa9d47a46" data-usesendcloud=true data-lang=zh><input name=EMAIL id=email-input type=text placeholder=请输入您的邮箱地址>
<button id=email-submit>订阅</button></div><span id=message data-message1=请提供您的邮箱 data-message2=请输入有效的邮箱地址! data-message3=邮箱地址已经存在></span><span id=message1 style=color:#00a971 data-success=订阅成功啦，我们保证不会给你发垃圾邮件的啦></span><script>var bindSubmit=function(){var e=$("#email-input");$("#email-submit").click(function(t){t.stopPropagation();var s,o,n=e.val(),i=$("#message").data("message1"),a=$("#message").data("message2"),r=$("#message").data("message3"),c=$("#message1").data("success");if(n)if(validateEmail(n)){if(s=$("#formAddress").data("usesendcloud"),!s)return;o=$("#formAddress").data("actionaddress"),$.post({type:"post",url:o,data:{email:$("#email-input").val().toString()},success:function(){showSuccessMessage(c),setTimeout(function(){$("#email-input").val("")},1e3)},error:function(){showMessage(r)}})}else t.preventDefault(),showMessage(a);else t.preventDefault(),showMessage(i)})},validateEmail=function(e){var t=/^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\.)+[A-Za-z]{2,6}$/;return t.test(e)},showMessage=function(e){$("#message").html(e).show()},showSuccessMessage=function(e){$("#message1").html(e).show()},bindHideMessage=function(){$(window).click(function(){$("#message").hide(),$("#message1").hide()})},bindClose=function(){$(".formBox .close").click(function(e){e.stopPropagation(),$(".formBox").fadeOut()})};bindSubmit(),bindClose(),bindHideMessage()</script><span id=message data-message1=请提供您的邮箱 data-message2=请输入有效的邮箱地址!></span></div><div class=right-div><ul class=common-flex-layout><li class=nowrap-li><div class=h3>应用场景</div><a href=/zh/devops/>拥抱一站式 DevOps</a>
<a href=/zh/service-mesh/>在 K8s 运行微服务</a>
<a href=/zh/observability/>构建云原生可观测性</a>
<a href=https://github.com/kubesphere/kubekey target=_blank rel="noopener noreferrer">K8s 一键部署与运维</a>
<a href=https://github.com/OpenFunction/OpenFunction target=_blank rel="noopener noreferrer">构建 FaaS 平台与 Serverless 架构</a>
<a href=https://github.com/openpitrix/openpitrix target=_blank rel="noopener noreferrer">多云应用管理平台</a></li><li class=nowrap-li><div class=h3>资源</div><a href=/zh/projects/>开源项目</a>
<a href=/zh/blogs/>技术博客</a>
<a href=/zh/conferences/>开源峰会</a>
<a href=/zh/videos/>视频资源</a>
<a href=/zh/learn/>云原生实战</a></li><li class=nowrap-li><div class=h3>文档中心</div><a href=/zh/docs/v4.1/01-intro/01-introduction/>产品介绍</a>
<a href=/zh/docs/v4.1/03-installation-and-upgrade/02-install-kubesphere/02-install-kubernetes-and-kubesphere/>如何安装</a>
<a href=/zh/docs/v4.1/02-quickstart/>快速入门</a>
<a href=/zh/docs/v3.4/reference/api-docs/>API 文档</a></li><li class=nowrap-li><div class=h3>开源社区</div><a href=/zh/contribution/>参与贡献</a>
<a href=/zh/live/>社区活动</a>
<a href=/zh/case/>案例学习</a>
<a href=/zh/partner/>合作伙伴</a>
<a href=/zh/user-group/>用户委员会</a>
<a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md target=_blank rel="noopener noreferrer">版本计划</a>
<a href=https://kubesphere.com.cn/ target=_blank rel="noopener noreferrer">中国站</a>
<a href=https://ask.kubesphere.io/forum target=_blank rel="noopener noreferrer">中文论坛</a>
<a href=https://kubesphere.io target=_blank rel="noopener noreferrer">全球站</a></li><li class=nowrap-li><div class=h3>产品与服务</div><a href=https://aws.amazon.com/cn/quickstart/architecture/qingcloud-kubesphere/ target=_blank rel="noopener noreferrer">KubeSphere on AWS</a>
<a href=https://market.azure.cn/marketplace/apps/qingcloud.kubesphere target=_blank rel="noopener noreferrer">KubeSphere on Azure</a>
<a href=https://marketplace.digitalocean.com/apps/kubesphere target=_blank rel="noopener noreferrer">KubeSphere on DigitalOcean</a>
<a href=https://www.qingcloud.com/products/kubesphereqke target=_blank rel="noopener noreferrer">KubeSphere on QingCloud(QKE)</a>
<a href=https://kubesphere.com.cn/kse/ target=_blank rel="noopener noreferrer">KubeSphere 企业版</a>
<a href=https://kubesphere.cloud/ksv/ target=_blank rel="noopener noreferrer">KubeSphere 虚拟化平台</a>
<a href=https://kubesphere.com.cn/marketplace/ target=_blank rel="noopener noreferrer">云原生扩展组件市场</a>
<a href=https://kubesphere.cloud target=_blank rel="noopener noreferrer">云原生应用服务平台</a>
<a href=https://m.qingcloud.com/p/aec50 target=_blank rel="noopener noreferrer">了解商业产品与咨询合作</a></li></ul></div></div><div class=down-main><div class=img-div><a class=wechat href=javascript:void(0); aria-label=wechat><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="0 0 28 28"><defs><path id="a" d="M0 0h15.673v12.156H0z"/></defs><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="13" cy="13" r="13" stroke="#B6C2CD"/><g transform="translate(5 7)"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path fill="currentColor" d="M15.673 7.898c0-2.061-2.173-3.74-4.619-3.74-2.59.0-4.625 1.679-4.625 3.74.0 2.066 2.035 3.738 4.625 3.738.542.0 1.09-.13 1.632-.256l1.493.776-.408-1.29c1.09-.776 1.902-1.81 1.902-2.968zm-6.119-.645c-.27.0-.541-.257-.541-.514.0-.256.27-.514.541-.514.41.0.681.258.681.514.0.257-.271.514-.681.514zm2.994.0c-.27.0-.541-.257-.541-.514.0-.256.27-.514.54-.514.41.0.681.258.681.514.0.257-.277.514-.68.514z" mask="url(#b)"/><path fill="currentColor" d="M10.602 3.674c.177.0.356.011.533.029C10.657 1.576 8.27.0 5.543.0 2.498.0.0 1.974.0 4.485c0 1.45.829 2.64 2.216 3.564l-.552 1.588 1.94-.929c.693.129 1.251.263 1.94.263.17.0.343-.005.515-.022a3.68 3.68.0 01-.172-1.104c0-2.302 2.081-4.171 4.715-4.171zM7.618 2.243c.417.0.693.263.693.66s-.276.66-.693.66c-.418.0-.835-.263-.835-.66.006-.398.423-.66.835-.66zm-3.88 1.319c-.417.0-.834-.263-.834-.66s.417-.66.834-.66c.418.0.695.263.695.66.0.392-.277.66-.695.66z" mask="url(#b)"/></g></g></svg><div class=hide-div><img src=/images/home/wechat.svg alt></div></a><a class=facebook-a href=https://www.facebook.com/kubesphere target=_blank aria-label=facebook></a><a class=twitter-a href=https://x.com/KubeSphere target=_blank aria-label=twitter rel="noopener noreferrer"></a><a class=linkedin-a href=https://www.linkedin.com/company/kubesphere/ target=_blank aria-label=linkedin rel="noopener noreferrer"></a><a class=bilibili-a href=https://space.bilibili.com/438908638 target=_blank aria-label=bilibili rel="noopener noreferrer"></a><a class=slack-a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank aria-label=slack rel="noopener noreferrer"></a><a class=github-a href=https://github.com/kubesphere/kubesphere target=_blank aria-label=github rel="noopener noreferrer"></a><a class=medium-a href=https://itnext.io/@kubesphere target=_blank aria-label=medium rel="noopener noreferrer"></a></div><p class=p1></p><p class=case><a href=http://www.beian.miit.gov.cn/ target=_blank rel="noopener noreferrer"><span>京ICP备13019086号</span>
</a><a target=_blank rel="noopener noreferrer" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502041003"><img src=/images/footer/case-icon.png alt=备案图标>
<span>京公网安备 11010502041003号</span></a></p></div></div></div><div class=cookie><div class=common-layout><p>您的隐私对我们很重要。我们使用Cookie来记住订阅详细信息，优化网站功能并交付根据您的兴趣量身定制的内容。要了解更多信息，请参阅我们的<a href=/zh/privacy>隐私政策</a>.</p><button>
接受并继续</button></div></div></footer><script>var lazyLoad=function(e,t){for(var n,o,i,s=0;s<t;s++){if(n=e.eq(s),o=n.attr("data-loaded"),o)continue;n.offset().top<parseInt($(window).height())+parseInt($(window).scrollTop())&&(i=n.attr("src"),n.attr("src",i),n.attr("data-loaded",!0))}},bindLayLoad=function(){var e=$("img"),t=e.length;lazyLoad(e,t),$(window).scroll(function(){lazyLoad(e,t)})},bindAddPadding=function(){var e=$("#close-join");e.length>0&&$(".main-section").addClass("padding")},docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t){return!!e&&!/^(?:expires|max-age|path|domain|secure)$/i.test(e)&&(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t),!0)}},bindHideCookie=function(){var t=docCookies.getItem("hasAuth"),e=$(".cookie");t?e.hide():e.show(),e.find("button").on("click",function(){docCookies.setItem("hasAuth","1"),e.hide()})};bindAddPadding(),bindHideCookie()</script><script type=text/javascript src=/js/aside.2d6977c0f16aef4ed3e886dd66675ce74bd0efcd467c2b2bcdb30b92d5e7c7c0e5c6e0c9d8f09a883c22f58df9e6b0b6347fcdd3c9a920b7faba6d7f91a201c3.js integrity="sha512-LWl3wPFq707T6IbdZmdc50vQ781GfCsrzbMLktXnx8DlxuDJ2PCaiDwi9Y355rC2NH/N08mpILf6um1/kaIBww=="></script><script type=text/javascript src=/js/markdown-tab.17f9f46b021adebc7250ce1b07134a577b307e7a436daa4aaf388f218e8463966f53770b26a64817c06c168738a887672d47fb4c29615adfc446e11d09a344cf.js integrity="sha512-F/n0awIa3rxyUM4bBxNKV3swfnpDbapKrziPIY6EY5ZvU3cLJqZIF8BsFoc4qIdnLUf7TClhWt/ERuEdCaNEzw=="></script><script>let forbidForm=!1;var viewer=new Viewer(document.querySelector(".md-body"),{url:"src"}),blogBindSubmit=function(){var e=$("#email-input-blog");$("#email-submit-blog").click(function(t){t.stopPropagation();var s,o,n=e.val(),i=$("#message_blog").data("message1"),a=$("#message_blog").data("message2"),r=$("#message_blog").data("message3"),c=$("#message1_blog").data("success");if(n)if(validateEmail(n)){if(s=$("#blog_formAddress").data("usesendcloud"),!s)return;o=$("#blog_formAddress").data("actionaddress"),$.post({type:"post",url:o,data:{email:n.toString()},success:function(){showSuccessMessage_blog(c),setTimeout(function(){window.onscroll="",$(".SubscribeForm").hide(),$("#email-input-blog").val("")},5e3)},error:function(){showMessage_blog(r)}})}else t.preventDefault(),$("#message_blog").html(a).show();else t.preventDefault(),$("#message_blog").html(i).show()})},validateEmail=function(e){var t=/^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\.)+[A-Za-z]{2,6}$/;return t.test(e)},bindHideMessageBlog=function(){$(window).click(function(){$("#message_blog").hide()})},bindCloseBlog=function(){$(".SubscribeForm .close").click(function(e){e.stopPropagation(),$(".SubscribeForm").fadeOut(),window.onscroll=""})},showMessage_blog=function(e){$("#message_blog").html(e).show()},showSuccessMessage_blog=function(e){$("#message1_blog").html(e).show()};window.onscroll=()=>{var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollHeight||document.body.scrollHeight;forbidForm&&(window.onscroll=""),e+t>n-710?$(".SubscribeForm").hide():$(".SubscribeForm").show()},blogBindSubmit(),bindCloseBlog(),bindHideMessageBlog()</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></body></html>