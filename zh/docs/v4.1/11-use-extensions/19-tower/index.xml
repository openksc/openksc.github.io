<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>KubeSphere 多集群代理连接 on</title><link>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/19-tower/</link><description>Recent content in KubeSphere 多集群代理连接 on</description><generator>Hugo</generator><language>zh-CN</language><atom:link href="https://openksc.github.io/zh/docs/v4.1/11-use-extensions/19-tower/index.xml" rel="self" type="application/rss+xml"/><item><title>通过代理连接添加成员集群</title><link>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/19-tower/02-add-a-member-cluster-using-proxy-connection/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/19-tower/02-add-a-member-cluster-using-proxy-connection/</guid><description>&lt;div class="paragraph">
&lt;p>本节介绍如何通过代理连接添加成员集群。&lt;/p>
&lt;/div>
&lt;div class="paragraph">
&lt;p>如果主集群无法访问成员集群的 Kubernetes API 服务，您可以设置成员集群连接到主集群对外暴露的 &lt;strong>tower&lt;/strong> 服务从而添加成员集群。&lt;/p>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_前提条件">前提条件&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="ulist">
&lt;ul>
&lt;li>
&lt;p>您需要在主集群中具有 &lt;strong>platform-admin&lt;/strong> 角色。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>KubeSphere 平台需要安装并启用 &lt;strong>KubeSphere 多集群代理连接&lt;/strong>扩展组件。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>成员集群所有节点必须能访问主集群 &lt;strong>tower&lt;/strong> 服务的外部访问地址。取决于您的网络环境，您可能需要配置防火墙和流量转发规则。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_设置代理服务地址">设置代理服务地址&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="paragraph">
&lt;p>在主集群安装“KubeSphere 多集群代理连接”扩展组件后，将在系统项目 kubesphere-system 中自动创建一个名为 tower 的服务。&lt;/p>
&lt;/div>
&lt;div class="sect2">
&lt;h3 id="_集群中有可用的_loadbalancer">集群中有可用的 LoadBalancer&lt;/h3>
&lt;div class="paragraph">
&lt;p>如果主集群中有可用的 LoadBalancer 插件，在主集群节点执行以下命令，可以看到 tower 服务有相应的 &lt;code>EXTERNAL-IP&lt;/code> 地址。该地址将由 KubeSphere 自动获取并配置代理服务地址，这意味着您可以跳过设置代理服务地址这一步。&lt;/p>
&lt;/div>
&lt;div class="paragraph">
&lt;p>执行以下命令确认是否有 LoadBalancer 插件。&lt;/p>
&lt;/div>
&lt;div class="listingblock">
&lt;div class="content">
&lt;pre class="highlight">&lt;code class="language-bash" data-lang="bash">kubectl -n kubesphere-system get svc&lt;/code>&lt;/pre>
&lt;/div>
&lt;/div>
&lt;div class="paragraph">
&lt;p>命令输出结果可能如下所示：&lt;/p>
&lt;/div>
&lt;div class="listingblock">
&lt;div class="content">
&lt;pre class="highlight">&lt;code class="language-bash" data-lang="bash">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
tower LoadBalancer 10.233.63.191 139.198.110.23 8080:30721/TCP 16h&lt;/code>&lt;/pre>
&lt;/div>
&lt;/div>
&lt;table class="tableblock frame-all grid-all stretch admon note">
&lt;colgroup>
&lt;col style="width: 100%;"/>
&lt;/colgroup>
&lt;thead>
&lt;tr>
&lt;th class="tableblock halign-left valign-top">说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td class="tableblock halign-left valign-top">&lt;div class="content">&lt;div class="paragraph">
&lt;p>主流公有云厂商一般会提供 LoadBalancer 解决方案，并且负载均衡器可以自动分配外部 IP。如果您的集群运行在本地环境中，尤其是在裸机环境中，可以使用 &lt;a href="https://github.com/kubesphere/openelb">OpenELB&lt;/a> 作为负载均衡器解决方案。&lt;/p>
&lt;/div></description></item></channel></rss>