<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DevOps 项目设置 on</title><link>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/</link><description>Recent content in DevOps 项目设置 on</description><generator>Hugo</generator><language>zh-CN</language><atom:link href="https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/index.xml" rel="self" type="application/rss+xml"/><item><title>凭证管理</title><link>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/01-credential-management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/01-credential-management/</guid><description>&lt;div class="paragraph">
&lt;p>凭证是包含敏感信息的对象，例如用户名和密码、SSH 密钥和令牌 (Token)。当 KubeSphere DevOps 流水线运行时，会与外部环境中的对象进行交互，以执行一系列任务，包括拉取代码、推送和拉取镜像以及运行脚本等。此过程中需要提供相应的凭证，而这些凭证不会明文出现在流水线中。&lt;/p>
&lt;/div>
&lt;div class="paragraph">
&lt;p>具有必要权限的 DevOps 项目用户可以为 Jenkins 流水线配置凭证。用户在 DevOps 项目中添加或配置这些凭证后，便可以在 DevOps 项目中使用这些凭证与第三方应用程序进行交互。&lt;/p>
&lt;/div>
&lt;div class="paragraph">
&lt;p>目前，您可以在 DevOps 项目中创建以下类型的凭证：&lt;/p>
&lt;/div>
&lt;div class="ulist">
&lt;ul>
&lt;li>
&lt;p>&lt;strong>用户名和密码&lt;/strong>：用户名和密码，可以作为单独的组件处理，或者作为用冒号分隔的字符串（格式为 &lt;strong>username:password&lt;/strong>）处理，例如 GitHub 和 GitLab 账户。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>SSH 密钥&lt;/strong>：带有私钥的用户名，SSH 公钥/私钥对。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>访问令牌&lt;/strong>：具有访问权限的令牌。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>kubeconfig&lt;/strong>：用于配置跨集群认证。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div class="paragraph">
&lt;p>本文档演示如何在 DevOps 项目中创建和管理凭证。有关如何使用凭证的更多信息，请参阅&lt;a href="../../02-pipelines/02-create-a-pipeline-using-jenkinsfile/">使用 Jenkinsfile 创建流水线&lt;/a>和&lt;a href="../../02-pipelines/01-create-a-pipeline-using-graphical-editing-panel/">使用图形编辑面板创建流水线&lt;/a>。&lt;/p>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_前提条件">前提条件&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="ulist">
&lt;ul>
&lt;li>
&lt;p>KubeSphere 平台需要安装并启用 &lt;strong>DevOps&lt;/strong> 扩展组件。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>已有一个企业空间、一个 DevOps 项目和一个用户 (例如 &lt;strong>project-regular&lt;/strong>)，并已邀请该用户至 DevOps 项目且授予 &lt;strong>operator&lt;/strong> 角色。请参阅&lt;a href="../02-role-and-member-management">角色和成员管理&lt;/a>。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_创建凭证">创建凭证&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="olist arabic">
&lt;ol class="arabic">
&lt;li>
&lt;p>以 &lt;strong>project-regular&lt;/strong> 用户登录 KubeSphere Web 控制台。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击&lt;strong>企业空间管理&lt;/strong>并进入您的 DevOps 项目。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在左侧导航栏，选择 &lt;strong>DevOps 项目设置 &amp;gt; 凭证&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在右侧的&lt;strong>凭证&lt;/strong>区域，点击&lt;strong>创建&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在弹出的&lt;strong>创建凭证&lt;/strong>对话框，输入凭证名称，并选择凭证类型。不同的凭证类型需要设置的参数不同，具体请参考以下内容。&lt;/p>
&lt;div class="exampleblock">
&lt;div class="content">
&lt;div class="ulist">
&lt;ul>
&lt;li>
&lt;p>创建用户名和密码凭证&lt;/p>
&lt;div class="openblock">
&lt;div class="content">
&lt;div class="paragraph">
&lt;p>以创建 GitHub 用户凭证为例，您需要设置以下参数：&lt;/p>
&lt;/div></description></item><item><title>角色和成员管理</title><link>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/02-role-and-member-management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/02-role-and-member-management/</guid><description>&lt;div class="paragraph">
&lt;p>本文档演示如何在 DevOps 项目中管理角色和成员。&lt;/p>
&lt;/div>
&lt;div class="paragraph">
&lt;p>在 DevOps 项目范围内，您可以向角色授予以下资源的权限：&lt;/p>
&lt;/div>
&lt;div class="ulist">
&lt;ul>
&lt;li>
&lt;p>DevOps 项目设置&lt;/p>
&lt;/li>
&lt;li>
&lt;p>流水线&lt;/p>
&lt;/li>
&lt;li>
&lt;p>凭证&lt;/p>
&lt;/li>
&lt;li>
&lt;p>持续部署&lt;/p>
&lt;/li>
&lt;li>
&lt;p>代码仓库&lt;/p>
&lt;/li>
&lt;li>
&lt;p>访问控制&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_前提条件">前提条件&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="ulist">
&lt;ul>
&lt;li>
&lt;p>已创建一个 DevOps 项目，例如 &lt;strong>demo-devops&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>已有一个在 DevOps 项目级别具有 &lt;strong>admin&lt;/strong> 角色的用户（例如 &lt;strong>devops-admin&lt;/strong>）。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_内置角色">内置角色&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="paragraph">
&lt;p>在 &lt;strong>DevOps 项目角色&lt;/strong>中，有三个可用的内置角色，如下所示。创建 DevOps 项目时，会自动创建内置角色，并且无法编辑或删除这些角色。&lt;/p>
&lt;/div>
&lt;table class="tableblock frame-all grid-all stretch">
&lt;colgroup>
&lt;col style="width: 20%;"/>
&lt;col style="width: 80%;"/>
&lt;/colgroup>
&lt;thead>
&lt;tr>
&lt;th class="tableblock halign-left valign-top">内置角色&lt;/th>
&lt;th class="tableblock halign-left valign-top">描述信息&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td class="tableblock halign-left valign-top">&lt;div class="content">&lt;div class="paragraph">
&lt;p>viewer&lt;/p>
&lt;/div>&lt;/div>&lt;/td>
&lt;td class="tableblock halign-left valign-top">&lt;div class="content">&lt;div class="paragraph">
&lt;p>DevOps 项目观察者，查看 DevOps 项目中的所有资源。&lt;/p>
&lt;/div>&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td class="tableblock halign-left valign-top">&lt;div class="content">&lt;div class="paragraph">
&lt;p>operator&lt;/p>
&lt;/div>&lt;/div>&lt;/td>
&lt;td class="tableblock halign-left valign-top">&lt;div class="content">&lt;div class="paragraph">
&lt;p>DevOps 项目普通成员，管理 DevOps 凭证和流水线以及查看 DevOps 项目中的成员和角色。&lt;/p>
&lt;/div>&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td class="tableblock halign-left valign-top">&lt;div class="content">&lt;div class="paragraph">
&lt;p>admin&lt;/p>
&lt;/div>&lt;/div>&lt;/td>
&lt;td class="tableblock halign-left valign-top">&lt;div class="content">&lt;div class="paragraph">
&lt;p>DevOps 项目管理员，管理 DevOps 项目中的所有资源。&lt;/p>
&lt;/div></description></item><item><title>添加持续部署白名单</title><link>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/03-add-cd-allowlist/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/03-add-cd-allowlist/</guid><description>&lt;div class="paragraph">
&lt;p>KubeSphere 支持通过设置白名单，限制资源持续部署的代码仓库和目标位置。&lt;/p>
&lt;/div>
&lt;div class="paragraph">
&lt;p>本文档介绍如何添加持续部署白名单。&lt;/p>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_前提条件">前提条件&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="ulist">
&lt;ul>
&lt;li>
&lt;p>KubeSphere 平台需要安装并启用 &lt;strong>DevOps&lt;/strong> 扩展组件。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>已有一个企业空间、一个 DevOps 项目和一个用户 (例如 &lt;strong>project-regular&lt;/strong>)，并已邀请该用户至 DevOps 项目且授予 &lt;strong>operator&lt;/strong> 角色。请参阅&lt;a href="../02-role-and-member-management">角色和成员管理&lt;/a>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>已&lt;a href="../../04-import-code-repositories/">导入代码仓库&lt;/a>。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_操作步骤">操作步骤&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="olist arabic">
&lt;ol class="arabic">
&lt;li>
&lt;p>以 &lt;strong>project-regular&lt;/strong> 用户登录 KubeSphere Web 控制台。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击&lt;strong>企业空间管理&lt;/strong>并进入您的 DevOps 项目。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在左侧导航栏，选择 &lt;strong>DevOps 项目设置 &amp;gt; 基本信息&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在右侧&lt;strong>基本信息&lt;/strong>下的&lt;strong>持续部署白名单&lt;/strong>区域，点击&lt;strong>编辑白名单&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在弹出的&lt;strong>编辑白名单&lt;/strong>对话框，选择代码仓库、部署集群和项目，点击&lt;strong>确定&lt;/strong>。点击&lt;strong>添加&lt;/strong>可添加多个代码仓库和部署位置。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>为依赖项缓存设置 CI 节点</title><link>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/04-set-ci-node/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/zh/docs/v4.1/11-use-extensions/01-devops/03-how-to-use/05-devops-settings/04-set-ci-node/</guid><description>&lt;div class="paragraph">
&lt;p>构建应用程序通常需要拉取不同的依赖项。拉取过程中可能会遇到某些问题，例如拉取时间长、网络不稳定，进而导致构建失败。为了提供更可靠和稳定的环境，可以配置节点或节点组，专门用于持续集成 (CI)，并通过使用缓存来加快构建过程。&lt;/p>
&lt;/div>
&lt;div class="paragraph">
&lt;p>本文档演示如何设置 CI 节点，以便 KubeSphere 将流水线的任务调度到这些节点。&lt;/p>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_前提条件">前提条件&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="paragraph">
&lt;p>您需要在 KubeSphere 平台具有&lt;strong>集群管理&lt;/strong>权限。&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_标记_ci_节点">标记 CI 节点&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="olist arabic">
&lt;ol class="arabic">
&lt;li>
&lt;p>以具有&lt;strong>集群管理&lt;/strong>权限的账户登录 KubeSphere Web 控制台。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击&lt;strong>集群管理&lt;/strong>，进入一个集群。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在左侧导航栏中选择&lt;strong>节点&lt;/strong>下的&lt;strong>集群节点&lt;/strong>，查看当前集群中的现有节点。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>从列表中选择一个节点用来运行 CI 任务。点击节点名称转到其详情页面，点击&lt;strong>更多操作&lt;/strong> &amp;gt; &lt;strong>编辑标签&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在弹出的对话框中，在键为 &lt;strong>node-role.kubernetes.io/worker&lt;/strong> 的后面，输入 &lt;strong>ci&lt;/strong> 作为此标签的值，点击&lt;strong>确定&lt;/strong>。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="sect1">
&lt;h2 id="_给_ci_节点添加污点">给 CI 节点添加污点&lt;/h2>
&lt;div class="sectionbody">
&lt;div class="paragraph">
&lt;p>流水线一般会根据&lt;a href="https://kubernetes.io/zh/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity">节点亲和性&lt;/a>来确定是否调度任务到某一节点。如果要将节点专用于 CI 任务，即不允许将其他工作负载调度到该节点，可以在该节点上添加&lt;a href="https://kubernetes.io/zh/docs/concepts/scheduling-eviction/taint-and-toleration/">污点&lt;/a>。&lt;/p>
&lt;/div>
&lt;div class="olist arabic">
&lt;ol class="arabic">
&lt;li>
&lt;p>点击&lt;strong>更多操作&lt;/strong> &amp;gt; &lt;strong>编辑污点&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击&lt;strong>添加&lt;/strong>，输入键 &lt;strong>node.kubernetes.io/ci&lt;/strong> 而不指定值。根据需要选择&lt;strong>阻止调度&lt;/strong>、&lt;strong>尽可能阻止调度&lt;/strong>或&lt;strong>阻止调度并驱逐现有容器组&lt;/strong> 。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击&lt;strong>确定&lt;/strong>。KubeSphere 将根据您设置的污点调度任务。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div>
&lt;/div>
&lt;/div></description></item></channel></rss>