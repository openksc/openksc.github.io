<!doctype html><html lang=en-US><head><meta charset=utf-8><title>Deploy KubeSphere on VMware vSphere</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn how to create a high-availability cluster on VMware vSphere."><meta name=keywords content="Kubernetes,KubeSphere,VMware-vSphere,installation"><meta property="og:type" content="article"><meta property="og:title" content="Deploy KubeSphere on VMware vSphere"><meta property="og:description" content="Learn how to create a high-availability cluster on VMware vSphere."><meta property="og:image" content="https://openksc.github.io/images/common/snapshot-en.png"><meta property="og:url" content="https://openksc.github.io/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@KubeSphere"><meta property="twitter:image" content="https://openksc.github.io/images/common/snapshot-en.png"><meta name=docsearch:language content="en-US"><meta name=docsearch:version content='v3.4'><link rel=canonical href=https://kubesphere.io/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=apple-touch-icon href=/images/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/svg+xml href=/images/favicons/favicon.svg><link rel=icon type=image/png href=/images/favicons/favicon.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#00ad6e><meta name=msapplication-config content='/images/favicons/browserconfig.xml'><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=/fonts/Roboto/stylesheet.css><link rel=stylesheet href=/fonts/ProximaNova/stylesheet.css><link rel=stylesheet href=/css/jquery.modal.min.css><link rel=stylesheet href=/css/viewer.min.css><link rel=stylesheet href=/swiper/swiper-bundle.min.css><link rel=stylesheet href=/scss/common.min.0c3fdcc05ec210321169846714f74b11c4a1baf09a1833fa9273b2347c81e636.css><link rel=stylesheet href=/npm/docsearch.js@2/dist/cdn/docsearch.min.css><link rel=stylesheet href=/scss/doc.min.6386f8ef12d58904c1ceb2c6c1a35acc29636881d06cce80e1a9e2ef773e1a7a.css><script src=/js/jquery-3.7.1.min.js></script><script src=/js/viewer.min.js></script><script src=/js/jquery.modal.min.js></script><script src=/swiper/swiper-bundle.min.js></script><script type=text/javascript src=/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?0888981f1fa45d241b1fb6962da2963e",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-YYCVN36HT5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YYCVN36HT5")</script><script type=text/javascript>!function(e,t,n,s,o){e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=("https:"==document.location.protocol?"https://":"http://")+s,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio"),gio("init","8a24ae300cbf8b8c",{}),gio("send")</script><script>(function(e,t,n,s,o,i){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:1756364,hjsv:6},o=t.getElementsByTagName("head")[0],i=t.createElement("script"),i.async=1,i.src=n+e._hjSettings.hjid+s+e._hjSettings.hjsv,o.appendChild(i)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=")</script><script type=text/javascript>_linkedin_partner_id="3131724",window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(_linkedin_partner_id)</script><script type=text/javascript>(function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.parentNode.insertBefore(e,t)})()</script><noscript>&lt; img height="1" width="1" style="display:none;" alt="" src="https://px.ads.linkedin.com/collect/?pid=3131724&fmt=gif" /></noscript><script>!function(e,t,n,s,o,i){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments)},s.version="1.1",s.queue=[],o=t.createElement(n),o.async=!0,o.src="//static.ads-twitter.com/uwt.js",i=t.getElementsByTagName(n)[0],i.parentNode.insertBefore(o,i))}(window,document,"script"),twq("init","o65xa"),twq("track","PageView")</script></head><body><header class=navigation><div class=join-div><div class=content>ðŸš€ KubeSphere v4.1.3 with Enhancements and Bug Fixes is available now. <a href=/docs/v4.1/20-release-notes/release-v413/ target=_blank rel="noopener noreferrer">Read the release notes â†’</a>
<img id=close-join src=/images/header/close.svg alt=close></div></div><div class=common-layout><div class=header-container><a href=/ aria-label=logo><img src=/images/header/logo.svg alt class=logo></a><ul class=nav><li class=menu-li><span class=menu-span>Scenarios</span><ul class="dropdown-menu menu-2"><li><a href=/devops/>Embracing One-stop DevOps Workflow</a></li><li><a href=/service-mesh/>Running Microservices on Kubernetes</a></li><li><a href=/observability/>Building Cloud Native Observability</a></li></ul></li><li class=menu-li><span class=menu-span>Resources</span><ul class="dropdown-menu menu-3"><li><a href=/projects/>Open Source Projects</a></li><li><a href=/conferences/>KubeCon & QCon</a></li><li><a href=/blogs/>Technology Blogs</a></li><li><a href=/videos/>Video Resources</a></li></ul></li><li class=menu-li><span class=menu-span>Documentation</span><ul class="dropdown-menu menu-4"><li><a href=/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/docs/v3.4>v3.4</a></li><li><a href=/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/en/%20 target=_blank rel="noopener noreferrer">Extension Development</a></li><li><a href=https://kube.design/ target=_blank rel="noopener noreferrer">Kube Design</a></li></ul></li><li class=menu-li><span class=menu-span>Community</span><ul class="dropdown-menu menu-5"><li><a href=/contribution/>Contribution</a></li><li><a href=/case/>Case Studies</a></li><li><a href=/partner/>Partner</a></li><li><a href=/news/>News</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md target=_blank rel="noopener noreferrer">RoadMap</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025 target=_blank rel="noopener noreferrer">OSPP 2025</a></li></ul></li></ul><div class=right-menu><ul><li class=language-menu><div><img src=/images/header/black.svg alt>
<span>English</span></div><ul class=dropdown-menu><li onclick='handleLangClick("en","/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/")'>English</li><li onclick='handleLangClick("zh","/zh/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/")'>ç®€ä½“ä¸­æ–‡</li></ul></li><li class=github-li><div class=github-star><a class=star-btn href=https://github.com/kubesphere/kubesphere rel="noopener noreferrer" target=_blank><span class=star-img></span>&nbsp;<span>Star</span>
</a><a class=social-count href=https://github.com/kubesphere/kubesphere/stargazers rel="noopener noreferrer" target=_blank></a></div></li><li class=menu-icon><img src=/images/header/menu.svg alt></li></ul></div></div></div><div id=modal-for-menu class=modal><ul class=nav><li data-check=0 class=menu-li><span class=menu-span>Scenarios</span><ul class=dropdown-menu><li><a href=/devops/>Embracing One-stop DevOps Workflow</a></li><li><a href=/service-mesh/>Running Microservices on Kubernetes</a></li><li><a href=/observability/>Building Cloud Native Observability</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>Resources</span><ul class=dropdown-menu><li><a href=/projects/>Open Source Projects</a></li><li><a href=/conferences/>KubeCon & QCon</a></li><li><a href=/blogs/>Technology Blogs</a></li><li><a href=/videos/>Video Resources</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>Documentation</span><ul class=dropdown-menu><li><a href=/docs/v4.1>v4.1 <img src=/images/header/star.svg alt=star></a></li><li><a href=/docs/v3.4>v3.4</a></li><li><a href=/docs/v3.3>v3.3</a></li><li><a href=https://dev-guide.kubesphere.io/extension-dev-guide/en/%20>Extension Development</a></li><li><a href=https://kube.design/>Kube Design</a></li></ul></li><li data-check=0 class=menu-li><span class=menu-span>Community</span><ul class=dropdown-menu><li><a href=/contribution/>Contribution</a></li><li><a href=/case/>Case Studies</a></li><li><a href=/partner/>Partner</a></li><li><a href=/news/>News</a></li><li><a href=https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md>RoadMap</a></li><li><a href=https://github.com/kubesphere/community/tree/master/sig-advocacy-and-outreach/ospp-2025>OSPP 2025</a></li></ul></li></ul><div class=link-div><a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank rel="noopener noreferrer" aria-label=slack><img src=/images/header/slack-hover.svg alt>
</a><a href=https://x.com/KubeSphere target=_blank rel="noopener noreferrer" aria-label=twitter><img src=/images/header/twitter-hover.svg alt>
</a><a href=https://github.com/kubesphere/kubesphere target=_blank rel="noopener noreferrer" aria-label=github><img src=/images/header/github-hover.svg alt></a></div></div></header><script>var bindNavMouseEvent,bindScrollChangeHeader,bindClickShowMenu,bindClickModalLi,bindClickClose,language,handleLangClick,githubApiLink="https://api.github.com/repos/kubesphere/kubesphere",getStar=function(){$(".social-count").hide(),$.getJSON(githubApiLink,function(e){$(".social-count").show().html(e.stargazers_count)})};getStar(),bindNavMouseEvent=function(e,t){t||(t=$(e));var n=!1;t.mouseenter(function(){if(n)return!1;n=!0,$(this).find(".dropdown-menu").fadeIn(200,function(){n=!1})}),t.mouseleave(function(){$(this).find(".dropdown-menu").fadeOut(200)})},bindScrollChangeHeader=function(){var t=100,e=$("header");window.addEventListener("scroll",function(){var t=window.scrollY;t>0?e.addClass("navigationScroll"):e.removeClass("navigationScroll")})},bindClickShowMenu=function(){$(".menu-icon").click(function(){$("#modal-for-menu").modal()})},bindClickModalLi=function(){$(".modal .menu-li").click(function(){var e=$(this).data("check");e===0?($(this).data("check",1),$(this).find(".dropdown-menu").slideDown(200)):($(this).data("check",0),$(this).find(".dropdown-menu").slideUp(200)),$(this).find(".menu-span").toggleClass("up")})},bindClickClose=function(){$("#close-join").click(function(){$(".navigation .join-div").hide(),$(".main-section").removeClass("padding")})},language="en",bindClickClose(),bindScrollChangeHeader(),$(".header-container .menu-li").each(function(){bindNavMouseEvent("",$(this))}),bindNavMouseEvent(".header-container .language-menu"),bindNavMouseEvent(".header-container .btn-li"),bindClickShowMenu(),bindClickModalLi(),handleLangClick=function(e,t){try{localStorage.setItem("lang",e)}catch{}location.href=t}</script><main class='main-section padding'><section class='section-1 bg-cover'><div class=common-layout><ol class=breadcrumbnav><li><a href=/docs/>Docs&nbsp;/&nbsp;</a></li><li><a href=/docs/v3.4/>Documentation&nbsp;/&nbsp;</a></li><li><a href=/docs/v3.4/installing-on-linux/>Installing on Linux&nbsp;/&nbsp;</a></li><li><a href>Installing in On-premises Environments&nbsp;/&nbsp;</a></li><li class=active><a href=/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/>Deploy KubeSphere on VMware vSphere</a></li></ol><div class=title-div><p><a href=/docs/v3.4/>Documentation</a></p><div class="menu section-control"><div></div><div></div><div></div></div></div><div class=search-div><div class=search-input-div><input id=search type=text placeholder>
<svg width="1em" height="1em" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M12.606 11.192l5.24 5.24-1.415 1.414-5.239-5.24a7.041 7.041.0 001.414-1.414z" fill="#324558"/><path d="M7 14A7 7 0 117 0a7 7 0 010 14zm0-2A5 5 0 107 2a5 5 0 000 10z" fill="#B6C2CD"/></g></svg></div><script>docsearch({appId:"P64S7K7Q7W",apiKey:"1cf6480742e28cdc08c95710326ede25",indexName:"kubesphere",inputSelector:"#search",algoliaOptions:{hitsPerPage:10,facetFilters:[`lang:${language}`,`version:v3.4`]},transformData:function(e){const t=/(releases?|notes?|patches?|updates?|changelogs?|ç‰ˆæœ¬|è¯´æ˜Ž)/i,n=document.getElementById("search").value.trim(),s=t.test(n);return s?e.filter(e=>e.isReleaseNote.includes("yes")):e.filter(e=>e.isReleaseNote.includes("no"))},debug:!1})</script></div></div></section><section class=section-menu><div class=common-layout><ul class=common-flex-layout><li><p><span><img src alt=Documentation></span>
<a href=/docs/v3.4/>Documentation</a></p><ul><li><a href=/docs/v3.4/introduction/what-is-kubesphere/>Introduction</a></li><li><a href=/docs/v3.4/quick-start/create-workspace-and-project/>Quickstarts</a></li><li><a href=/docs/v3.4/installing-on-linux/introduction/intro/>Installing on Linux</a></li><li><a href=/docs/v3.4/installing-on-kubernetes/introduction/overview/>Installing on Kubernetes</a></li><li><a href=/docs/v3.4/multicluster-management/introduction/overview/>Multi-cluster Management</a></li><li><a href=/docs/v3.4/>Learn More...</a></li></ul></li><li style=height:0;margin:0;padding:0></li></ul></div></section><section class=section-2><div class=common-layout><div class="left-div left-tree"><div class=inner-tree><div><nav class=nav-menu><ul class=ul-active><li class=list><p class=list-title><span class=arrow></span>
<span>Introduction</span></p><ul><li class=list><a href=/docs/v3.4/introduction/what-is-kubesphere/>What is KubeSphere</a></li><li class=list><a href=/docs/v3.4/introduction/ecosystem/>KubeSphere Ecosystem Tools</a></li><li class=list><a href=/docs/v3.4/introduction/features/>Features</a></li><li class=list><a href=/docs/v3.4/introduction/whats-new-in-3.4/>What's New in 3.4</a></li><li class=list><a href=/docs/v3.4/introduction/architecture/>Architecture</a></li><li class=list><a href=/docs/v3.4/introduction/advantages/>Advantages</a></li><li class=list><a href=/docs/v3.4/introduction/scenarios/>Use Cases</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Quickstarts</span></p><ul><li class=list><a href=/docs/v3.4/quick-start/create-workspace-and-project/>Create Workspaces, Projects, Users and Roles</a></li><li class=list><a href=/docs/v3.4/quick-start/deploy-bookinfo-to-k8s/>Deploy and Access Bookinfo</a></li><li class=list><a href=/docs/v3.4/quick-start/wordpress-deployment/>Compose and Deploy WordPress</a></li><li class=list><a href=/docs/v3.4/quick-start/enable-pluggable-components/>Enable Pluggable Components</a></li><li class=list><a href=/docs/v3.4/quick-start/all-in-one-on-linux/>All-in-One Installation on Linux</a></li><li class=list><a href=/docs/v3.4/quick-start/minimal-kubesphere-on-k8s/>Minimal KubeSphere on Kubernetes</a></li></ul></li><li class=list><p class=list-title><span class="arrow arrow-open"></span>
<span>Installing on Linux</span></p><ul class=ul-active><li class=list><p class=list-title><span class=arrow></span>
<span>Introduction</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-linux/introduction/intro/>Overview</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/introduction/kubekey/>KubeKey</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/introduction/multioverview/>Multi-node Installation</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/introduction/air-gapped-installation/>Air-gapped Installation</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/introduction/port-firewall/>Port Requirements</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/introduction/vars/>Kubernetes Cluster Configurations</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>High Availability Configurations</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-linux/high-availability-configurations/internal-ha-configuration/>Set Up an HA Cluster Using the Internal HAProxy of KubeKey</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/high-availability-configurations/ha-configuration/>Set up an HA Cluster Using a Load Balancer</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/high-availability-configurations/set-up-ha-cluster-using-keepalived-haproxy/>Set up an HA Cluster Using Keepalived and HAproxy</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Persistent Storage Configurations</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-linux/persistent-storage-configurations/understand-persistent-storage/>Understand Persistent Storage Installation</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/persistent-storage-configurations/install-qingcloud-csi/>Install QingCloud CSI</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/persistent-storage-configurations/install-nfs-client/>Install NFS Client</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/persistent-storage-configurations/install-glusterfs/>Install GlusterFS</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/persistent-storage-configurations/install-ceph-csi-rbd/>Install Ceph</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Installing on Public Cloud</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-linux/public-cloud/install-kubesphere-on-azure-vms/>Deploy KubeSphere on Azure VM Instances</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/public-cloud/install-kubesphere-on-qingcloud-vms/>Deploy KubeSphere on QingCloud Instances</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/public-cloud/install-and-use-kubesphere-on-hostinger-vps/>Install and Use KubeSphere on Hostinger VPS</a></li></ul></li><li class=list><p class=list-title><span class="arrow arrow-open"></span>
<span>Installing in On-premises Environments</span></p><ul class=ul-active><li class="list active"><a href=/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/>Deploy KubeSphere on VMware vSphere</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-bare-metal/>Deploy KubeSphere on Bare Metal</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-and-k3s/>Deploy K3s and KubeSphere</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/on-premises/installing-kubesphere-on-minikube/>Installing KubeSphere on Minikube</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Add and Delete Nodes</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-linux/cluster-operation/add-new-nodes/>Add New Nodes</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/cluster-operation/remove-nodes/>Delete Nodes</a></li><li class=list><a href=/docs/v3.4/installing-on-linux/cluster-operation/add-edge-nodes/>Add Edge Nodes</a></li></ul></li><li class=list><a href=/docs/v3.4/installing-on-linux/uninstall-kubesphere-and-kubernetes/>Uninstall KubeSphere and Kubernetes</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Installing on Kubernetes</span></p><ul><li class=list><p class=list-title><span class=arrow></span>
<span>Introduction</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-kubernetes/introduction/overview/>Overview</a></li><li class=list><a href=/docs/v3.4/installing-on-kubernetes/introduction/prerequisites/>Prerequisites</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Installing on Hosted Kubernetes</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-aks/>Deploy KubeSphere on AKS</a></li><li class=list><a href=/docs/v3.4/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-eks/>Deploy KubeSphere on AWS EKS</a></li><li class=list><a href=/docs/v3.4/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-do/>Deploy KubeSphere on DigitalOcean Kubernetes</a></li><li class=list><a href=/docs/v3.4/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-gke/>Deploy KubeSphere on GKE</a></li><li class=list><a href=/docs/v3.4/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-huaweicloud-cce/>Deploy KubeSphere on Huawei CCE</a></li><li class=list><a href=/docs/v3.4/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-oke/>Deploy KubeSphere on Oracle OKE</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Installing on On-premises Kubernetes</span></p><ul><li class=list><a href=/docs/v3.4/installing-on-kubernetes/on-prem-kubernetes/install-ks-on-linux-airgapped/>Air-gapped Installation</a></li></ul></li><li class=list><a href=/docs/v3.4/installing-on-kubernetes/uninstall-kubesphere-from-k8s/>Uninstall KubeSphere from Kubernetes</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Multi-cluster Management</span></p><ul><li class=list><p class=list-title><span class=arrow></span>
<span>Introduction</span></p><ul><li class=list><a href=/docs/v3.4/multicluster-management/introduction/overview/>Overview</a></li><li class=list><a href=/docs/v3.4/multicluster-management/introduction/kubefed-in-kubesphere/>KubeSphere Federation</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Enable Multi-cluster Management in KubeSphere</span></p><ul><li class=list><a href=/docs/v3.4/multicluster-management/enable-multicluster/direct-connection/>Direct Connection</a></li><li class=list><a href=/docs/v3.4/multicluster-management/enable-multicluster/agent-connection/>Agent Connection</a></li><li class=list><a href=/docs/v3.4/multicluster-management/enable-multicluster/retrieve-kubeconfig/>Retrieve Kubeconfig</a></li><li class=list><a href=/docs/v3.4/multicluster-management/enable-multicluster/update-kubeconfig/>Update Kubeconfig</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Import Cloud-hosted Kubernetes Clusters</span></p><ul><li class=list><a href=/docs/v3.4/multicluster-management/import-cloud-hosted-k8s/import-aliyun-ack/>Import an Alibaba Cloud Kubernetes (ACK) Cluster</a></li><li class=list><a href=/docs/v3.4/multicluster-management/import-cloud-hosted-k8s/import-aws-eks/>Import an AWS EKS Cluster</a></li><li class=list><a href=/docs/v3.4/multicluster-management/import-cloud-hosted-k8s/import-gke/>Import a Google GKE Cluster</a></li></ul></li><li class=list><a href=/docs/v3.4/multicluster-management/unbind-cluster/>Remove a Member Cluster</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Enable Pluggable Components</span></p><ul><li class=list><a href=/docs/v3.4/pluggable-components/overview/>Overview</a></li><li class=list><a href=/docs/v3.4/pluggable-components/app-store/>KubeSphere App Store</a></li><li class=list><a href=/docs/v3.4/pluggable-components/devops/>KubeSphere DevOps System</a></li><li class=list><a href=/docs/v3.4/pluggable-components/logging/>KubeSphere Logging System</a></li><li class=list><a href=/docs/v3.4/pluggable-components/events/>KubeSphere Events</a></li><li class=list><a href=/docs/v3.4/pluggable-components/alerting/>KubeSphere Alerting</a></li><li class=list><a href=/docs/v3.4/pluggable-components/auditing-logs/>KubeSphere Audit Logs</a></li><li class=list><a href=/docs/v3.4/pluggable-components/service-mesh/>KubeSphere Service Mesh</a></li><li class=list><a href=/docs/v3.4/pluggable-components/network-policy/>Network Policies</a></li><li class=list><a href=/docs/v3.4/pluggable-components/metrics-server/>Metrics Server</a></li><li class=list><a href=/docs/v3.4/pluggable-components/service-topology/>Service Topology</a></li><li class=list><a href=/docs/v3.4/pluggable-components/pod-ip-pools/>Pod IP Pools</a></li><li class=list><a href=/docs/v3.4/pluggable-components/kubeedge/>KubeEdge</a></li><li class=list><a href=/docs/v3.4/pluggable-components/uninstall-pluggable-components/>Uninstall Pluggable Components</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Upgrade</span></p><ul><li class=list><a href=/docs/v3.4/upgrade/overview/>Overview</a></li><li class=list><a href=/docs/v3.4/upgrade/upgrade-with-kubekey/>Upgrade with KubeKey</a></li><li class=list><a href=/docs/v3.4/upgrade/upgrade-with-ks-installer/>Upgrade with ks-installer</a></li><li class=list><a href=/docs/v3.4/upgrade/air-gapped-upgrade-with-kubekey/>Air-Gapped Upgrade with KubeKey</a></li><li class=list><a href=/docs/v3.4/upgrade/air-gapped-upgrade-with-ks-installer/>Air-Gapped Upgrade with ks-installer</a></li><li class=list><a href=/docs/v3.4/upgrade/what-changed/>Changes after Upgrade</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Cluster Administration</span></p><ul><li class=list><a href=/docs/v3.4/cluster-administration/logs-dashboard/>KubeSphere Log Dashboard</a></li><li class=list><a href=/docs/v3.4/cluster-administration/nodes/>Node Management</a></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-status-monitoring/>Cluster Status Monitoring</a></li><li class=list><a href=/docs/v3.4/cluster-administration/application-resources-monitoring/>Application Resources Monitoring</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>Cluster-wide Alerting and Notification</span></p><ul><li class=list><a href=/docs/v3.4/cluster-administration/cluster-wide-alerting-and-notification/alertmanager/>Alertmanager in KubeSphere</a></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-wide-alerting-and-notification/alerting-policy/>Alerting Policies (Node Level)</a></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-wide-alerting-and-notification/alerting-message/>Alerting Messages (Node Level)</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Cluster Settings</span></p><ul><li class=list><a href=/docs/v3.4/cluster-administration/cluster-settings/cluster-visibility-and-authorization/>Cluster Visibility and Authorization</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>Log Receivers</span></p><ul><li class=list><a href=/docs/v3.4/cluster-administration/cluster-settings/log-collections/introduction/>Introduction</a></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-settings/log-collections/add-es-as-receiver/>Add Elasticsearch as a Receiver</a></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-settings/log-collections/add-kafka-as-receiver/>Add Kafka as a Receiver</a></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-settings/log-collections/add-fluentd-as-receiver/>Add Fluentd as a Receiver</a></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-settings/log-collections/add-opensearch-as-receiver/>Add OpenSearch as a Log Receiver</a></li></ul></li><li class=list><a href=/docs/v3.4/cluster-administration/cluster-settings/cluster-gateway/>Cluster Gateway</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Notification Management</span></p><ul><li class=list><a href=/docs/v3.4/cluster-administration/platform-settings/notification-management/customize-cluster-name/>Customize Cluster Name in Notification Messages</a></li><li class=list><a href=/docs/v3.4/cluster-administration/platform-settings/notification-management/configure-email/>Configure Email Notifications</a></li><li class=list><a href=/docs/v3.4/cluster-administration/platform-settings/notification-management/configure-dingtalk/>Configure DingTalk Notifications</a></li><li class=list><a href=/docs/v3.4/cluster-administration/platform-settings/notification-management/configure-wecom/>Configure WeCom Notifications</a></li><li class=list><a href=/docs/v3.4/cluster-administration/platform-settings/notification-management/configure-slack/>Configure Slack Notifications</a></li><li class=list><a href=/docs/v3.4/cluster-administration/platform-settings/notification-management/configure-webhook/>Configure Webhook Notifications</a></li></ul></li><li class=list><a href=/docs/v3.4/cluster-administration/shut-down-and-restart-cluster-gracefully/>Cluster Shutdown and Restart</a></li><li class=list><a href=/docs/v3.4/cluster-administration/storageclass/>Storage Classes</a></li><li class=list><a href=/docs/v3.4/cluster-administration/snapshotclass/>Volume Snapshot Classes</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Workspace Administration and User Guide</span></p><ul><li class=list><a href=/docs/v3.4/workspace-administration/what-is-workspace/>Workspace Overview</a></li><li class=list><a href=/docs/v3.4/workspace-administration/upload-helm-based-application/>Upload Helm-based Applications</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>App Repositories</span></p><ul><li class=list><a href=/docs/v3.4/workspace-administration/app-repository/import-helm-repository/>Import a Helm Repository</a></li><li class=list><a href=/docs/v3.4/workspace-administration/app-repository/upload-app-to-public-repository/>Upload Apps to the KubeSphere GitHub Repository</a></li></ul></li><li class=list><a href=/docs/v3.4/workspace-administration/role-and-member-management/>Workspace Role and Member Management</a></li><li class=list><a href=/docs/v3.4/workspace-administration/workspace-network-isolation/>Workspace Network Isolation</a></li><li class=list><a href=/docs/v3.4/workspace-administration/project-quotas/>Project Quotas</a></li><li class=list><a href=/docs/v3.4/workspace-administration/workspace-quotas/>Workspace Quotas</a></li><li class=list><a href=/docs/v3.4/workspace-administration/department-management/>Department Management</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Project User Guide</span></p><ul><li class=list><p class=list-title><span class=arrow></span>
<span>Applications</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/application/app-template/>App Templates</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application/deploy-app-from-template/>Deploy Apps from App Templates</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application/deploy-app-from-appstore/>Deploy Apps from the App Store</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application/compose-app/>Create a Microservices-based App</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Application Workloads</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/deployments/>Deployments</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/statefulsets/>StatefulSets</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/daemonsets/>DaemonSets</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/services/>Services</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/jobs/>Jobs</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/cronjobs/>CronJobs</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/routes/>Routes</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/container-image-settings/>Pod Settings</a></li><li class=list><a href=/docs/v3.4/project-user-guide/application-workloads/horizontal-pod-autoscaling/>Kubernetes HPA (Horizontal Pod Autoscaling) on KubeSphere</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Volume Management</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/storage/volumes/>Persistent Volume Claims</a></li><li class=list><a href=/docs/v3.4/project-user-guide/storage/volume-snapshots/>Volume Snapshots</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Configuration</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/configuration/secrets/>Secrets</a></li><li class=list><a href=/docs/v3.4/project-user-guide/configuration/configmaps/>ConfigMaps</a></li><li class=list><a href=/docs/v3.4/project-user-guide/configuration/image-registry/>Image Registries</a></li><li class=list><a href=/docs/v3.4/project-user-guide/configuration/serviceaccounts/>Service Accounts</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Grayscale Release</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/grayscale-release/overview/>Overview</a></li><li class=list><a href=/docs/v3.4/project-user-guide/grayscale-release/blue-green-deployment/>Blue-Green Deployment with Kubernetes</a></li><li class=list><a href=/docs/v3.4/project-user-guide/grayscale-release/canary-release/>Canary Release</a></li><li class=list><a href=/docs/v3.4/project-user-guide/grayscale-release/traffic-mirroring/>Traffic Mirroring</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Image Builder</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/image-builder/source-to-image/>Source to Image: Publish an App without a Dockerfile</a></li><li class=list><a href=/docs/v3.4/project-user-guide/image-builder/binary-to-image/>Binary to Image: Publish an Artifact to Kubernetes</a></li><li class=list><a href=/docs/v3.4/project-user-guide/image-builder/s2i-introduction/>S2I Workflow and Logic</a></li><li class=list><a href=/docs/v3.4/project-user-guide/image-builder/s2i-templates/>Customize S2I Templates</a></li><li class=list><a href=/docs/v3.4/project-user-guide/image-builder/s2i-and-b2i-webhooks/>Configure S2I and B2I Webhooks</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Alerting</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/alerting/alerting-policy/>Alerting Policies (Workload Level)</a></li><li class=list><a href=/docs/v3.4/project-user-guide/alerting/alerting-message/>Alerting Messages (Workload Level)</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Custom Application Monitoring</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/custom-application-monitoring/introduction/>Introduction</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>Examples</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/custom-application-monitoring/examples/monitor-mysql/>Monitor MySQL</a></li><li class=list><a href=/docs/v3.4/project-user-guide/custom-application-monitoring/examples/monitor-sample-web/>Monitor a Sample Web Application</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Visualization</span></p><ul><li class=list><a href=/docs/v3.4/project-user-guide/custom-application-monitoring/visualization/overview/>Overview</a></li><li class=list><a href=/docs/v3.4/project-user-guide/custom-application-monitoring/visualization/panel/>Charts</a></li><li class=list><a href=/docs/v3.4/project-user-guide/custom-application-monitoring/visualization/querying/>Querying</a></li></ul></li></ul></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>DevOps User Guide</span></p><ul><li class=list><p class=list-title><span class=arrow></span>
<span>Understand and Manage DevOps Projects</span></p><ul><li class=list><a href=/docs/v3.4/devops-user-guide/devops-overview/overview/>Overview</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/devops-overview/devops-project-management/>DevOps Project Management</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Use DevOps</span></p><ul><li class=list><p class=list-title><span class=arrow></span>
<span>Pipelines</span></p><ul><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/create-a-pipeline-using-graphical-editing-panel/>Create a Pipeline Using Graphical Editing Panels</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/create-a-pipeline-using-jenkinsfile/>Create a Pipeline Using a Jenkinsfile</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/use-pipeline-templates/>Use Pipeline Templates</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/pipeline-settings/>Pipeline Settings</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/use-pipeline-step-template/>Use Pipeline Step Templates</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/gitlab-multibranch-pipeline/>Create a Multi-branch Pipeline with GitLab</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/jenkins-setting/>Jenkins System Settings</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/jenkins-shared-library/>Use Jenkins Shared Libraries in a Pipeline</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/jenkins-email/>Set Email Server for KubeSphere Pipelines</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/pipeline-webhook/>Trigger a Pipeline by Using a Webhook</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/choose-jenkins-agent/>Choose Jenkins Agent</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/pipelines/customize-jenkins-agent/>Customize Jenkins Agent</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Continuous Deployments</span></p><ul><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/continuous-deployments/use-gitops-for-continous-deployment/>Use GitOps to Achieve Continuous Deployment of Applications</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Code Repositories</span></p><ul><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/code-repositories/import-code-repositories/>Import a Code Repository</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>DevOps Settings</span></p><ul><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/devops-settings/credential-management/>Credential Management</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/devops-settings/role-and-member-management/>Role and Member Management</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/devops-settings/add-cd-allowlist/>Add a Continuous Deployment Allowlist</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-use/devops-settings/set-ci-node/>Set a CI Node for Dependency Caching</a></li></ul></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Tool Integration</span></p><ul><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-integrate/sonarqube/>Integrate SonarQube into Pipelines</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/how-to-integrate/harbor/>Integrate Harbor into Pipelines</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Examples</span></p><ul><li class=list><a href=/docs/v3.4/devops-user-guide/examples/go-project-pipeline/>Build and Deploy a Go Project</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/examples/multi-cluster-project-example/>Deploy Apps in a Multi-cluster Project Using a Jenkinsfile</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/examples/a-maven-project/>Build and Deploy a Maven Project</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/examples/create-multi-cluster-pipeline/>Create a Multi-cluster Pipeline</a></li><li class=list><a href=/docs/v3.4/devops-user-guide/examples/use-nexus-in-pipelines/>Use Nexus in Pipelines</a></li></ul></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Access Control and Account Management</span></p><ul><li class=list><a href=/docs/v3.4/access-control-and-account-management/multi-tenancy-in-kubesphere/>Multi-tenancy in KubeSphere</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>External Authentication</span></p><ul><li class=list><a href=/docs/v3.4/access-control-and-account-management/external-authentication/set-up-external-authentication/>Set Up External Authentication</a></li><li class=list><a href=/docs/v3.4/access-control-and-account-management/external-authentication/use-an-ldap-service/>Use an LDAP Service</a></li><li class=list><a href=/docs/v3.4/access-control-and-account-management/external-authentication/oidc-identity-provider/>OIDC Identity Provider</a></li><li class=list><a href=/docs/v3.4/access-control-and-account-management/external-authentication/use-an-oauth2-identity-provider/>Use an OAuth 2.0 Identity Provider</a></li></ul></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Project Administration</span></p><ul><li class=list><a href=/docs/v3.4/project-administration/project-and-multicluster-project/>Projects and Multi-cluster Projects</a></li><li class=list><a href=/docs/v3.4/project-administration/role-and-member-management/>Project Role and Member Management</a></li><li class=list><a href=/docs/v3.4/project-administration/project-network-isolation/>Project Network Isolation</a></li><li class=list><a href=/docs/v3.4/project-administration/container-limit-ranges/>Container Limit Ranges</a></li><li class=list><a href=/docs/v3.4/project-administration/project-gateway/>Project Gateway</a></li><li class=list><a href=/docs/v3.4/project-administration/disk-log-collection/>Log Collection</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>App Store</span></p><ul><li class=list><a href=/docs/v3.4/application-store/app-lifecycle-management/>Application Lifecycle Management</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>Built-in Applications</span></p><ul><li class=list><a href=/docs/v3.4/application-store/built-in-apps/etcd-app/>Deploy etcd on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/harbor-app/>Deploy Harbor on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/memcached-app/>Deploy Memcached on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/meshery-app/>Deploy Meshery on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/minio-app/>Deploy MinIO on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/mongodb-app/>Deploy MongoDB on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/mysql-app/>Deploy MySQL on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/nginx-app/>Deploy NGINX on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/postgresql-app/>Deploy PostgreSQL on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/rabbitmq-app/>Deploy RabbitMQ on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/redis-app/>Deploy Redis on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/tomcat-app/>Deploy Tomcat on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/radondb-mysql-app/>Deploy RadonDB MySQL on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/radondb-postgresql-app/>Deploy RadonDB PostgreSQL on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/built-in-apps/deploy-chaos-mesh/>Deploy Chaos Mesh on KubeSphere</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>External Applications</span></p><ul><li class=list><a href=/docs/v3.4/application-store/external-apps/deploy-gitlab/>Deploy GitLab on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/external-apps/deploy-tidb/>Deploy TiDB Operator and a TiDB Cluster</a></li><li class=list><a href=/docs/v3.4/application-store/external-apps/deploy-metersphere/>Deploy MeterSphere on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/external-apps/deploy-clickhouse/>Deploy RadonDB ClickHouse Operator and Cluster</a></li><li class=list><a href=/docs/v3.4/application-store/external-apps/deploy-litmus/>Deploy Litmus on KubeSphere</a></li><li class=list><a href=/docs/v3.4/application-store/external-apps/deploy-radondb-mysql/>Deploy RadonDB MySQL Operator and Cluster</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Application Developer Guide</span></p><ul><li class=list><a href=/docs/v3.4/application-store/app-developer-guide/helm-developer-guide/>Helm Developer Guide</a></li><li class=list><a href=/docs/v3.4/application-store/app-developer-guide/helm-specification/>Helm Specifications</a></li></ul></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Toolbox</span></p><ul><li class=list><a href=/docs/v3.4/toolbox/log-query/>Log Query</a></li><li class=list><a href=/docs/v3.4/toolbox/events-query/>Event Query</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>Auditing</span></p><ul><li class=list><a href=/docs/v3.4/toolbox/auditing/auditing-receive-customize/>Receive and Customize Auditing Logs</a></li><li class=list><a href=/docs/v3.4/toolbox/auditing/auditing-rule/>Auditing Rules</a></li><li class=list><a href=/docs/v3.4/toolbox/auditing/auditing-query/>Auditing Log Query</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Metering and Billing</span></p><ul><li class=list><a href=/docs/v3.4/toolbox/metering-and-billing/view-resource-consumption/>View Resource Consumption</a></li><li class=list><a href=/docs/v3.4/toolbox/metering-and-billing/enable-billing/>Enable Billing</a></li></ul></li><li class=list><a href=/docs/v3.4/toolbox/web-kubectl/>Web Kubectl</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>FAQ</span></p><ul><li class=list><p class=list-title><span class=arrow></span>
<span>Installation</span></p><ul><li class=list><a href=/docs/v3.4/faq/installation/configure-booster/>Configure a Booster for Installation</a></li><li class=list><a href=/docs/v3.4/faq/installation/telemetry/>Telemetry in KubeSphere</a></li><li class=list><a href=/docs/v3.4/faq/installation/install-addon-through-yaml-using-kubekey/>Install an Add-on through YAML Using KubeKey</a></li><li class=list><a href=/docs/v3.4/faq/installation/ssh-connection-failure/>SSH Connection Failure</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Upgrade FAQ</span></p><ul><li class=list><a href=/docs/v3.4/faq/upgrade/qingcloud-csi-upgrade/>Upgrade QingCloud CSI</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Observability FAQ</span></p><ul><li class=list><a href=/docs/v3.4/faq/observability/logging/>Logging</a></li><li class=list><a href=/docs/v3.4/faq/observability/monitoring/>Monitoring</a></li><li class=list><a href=/docs/v3.4/faq/observability/byop/>Bring Your Own Prometheus</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Access Control and Account Management FAQ</span></p><ul><li class=list><a href=/docs/v3.4/faq/access-control/forgot-password/>Reset the Account Password</a></li><li class=list><a href=/docs/v3.4/faq/access-control/session-timeout/>Session Timeout</a></li><li class=list><a href=/docs/v3.4/faq/access-control/add-kubernetes-namespace-to-kubesphere-workspace/>Add existing Kubernetes namespaces to a KubeSphere Workspace</a></li><li class=list><a href=/docs/v3.4/faq/access-control/cannot-login/>User Login Failure</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>KubeSphere Web Console</span></p><ul><li class=list><a href=/docs/v3.4/faq/console/console-web-browser/>Supported Browsers</a></li><li class=list><a href=/docs/v3.4/faq/console/edit-resources-in-system-workspace/>Edit System Resources on the Console</a></li><li class=list><a href=/docs/v3.4/faq/console/change-console-language/>Change the Console Language</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Multi-cluster Management</span></p><ul><li class=list><a href=/docs/v3.4/faq/multi-cluster-management/manage-multi-cluster/>Manage a Multi-cluster Environment on KubeSphere</a></li><li class=list><a href=/docs/v3.4/faq/multi-cluster-management/host-cluster-access-member-cluster/>Restore the Host Cluster Access to A Member Cluster</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>DevOps</span></p><ul><li class=list><a href=/docs/v3.4/faq/devops/install-jenkins-plugins/>Install Plugins to Jenkins in KubeSphere</a></li><li class=list><a href=/docs/v3.4/faq/devops/create-devops-kubeconfig-on-aws/>Create a DevOps Kubeconfig on AWS</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Applications</span></p><ul><li class=list><a href=/docs/v3.4/faq/applications/remove-built-in-apps/>Remove Built-in Apps in KubeSphere</a></li></ul></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Reference</span></p><ul><li class=list><a href=/docs/v3.4/reference/glossary/>Glossary</a></li><li class=list><a href=/docs/v3.4/reference/api-docs/>KubeSphere API</a></li><li class=list><p class=list-title><span class=arrow></span>
<span>API Changes</span></p><ul><li class=list><a href=/docs/v3.4/reference/api-changes/logging/>Logging</a></li><li class=list><a href=/docs/v3.4/reference/api-changes/monitoring/>Monitoring</a></li><li class=list><a href=/docs/v3.4/reference/api-changes/notification/>Notification</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Storage System Installation</span></p><ul><li class=list><a href=/docs/v3.4/reference/storage-system-installation/nfs-server/>Set up an NFS Server</a></li><li class=list><a href=/docs/v3.4/reference/storage-system-installation/glusterfs-server/>Set up a GlusterFS Server</a></li></ul></li><li class=list><a href=/docs/v3.4/reference/environment-requirements/>Environment Requirements</a></li></ul></li><li class=list><p class=list-title><span class=arrow></span>
<span>Release Notes</span></p><ul><li class=list><a href=/docs/v3.4/release/release-v341/>Release Notes - 3.4.1</a></li><li class=list><a href=/docs/v3.4/release/release-v340/>Release Notes - 3.4.0</a></li><li class=list><a href=/docs/v3.4/release/release-v332/>Release Notes - 3.3.2</a></li><li class=list><a href=/docs/v3.4/release/release-v331/>Release Notes - 3.3.1</a></li><li class=list><a href=/docs/v3.4/release/release-v330/>Release Notes - 3.3.0</a></li><li class=list><a href=/docs/v3.4/release/release-v321/>Release Notes - 3.2.1</a></li><li class=list><a href=/docs/v3.4/release/release-v320/>Release Notes - 3.2.0</a></li><li class=list><a href=/docs/v3.4/release/release-v311/>Release Notes - 3.1.1</a></li><li class=list><a href=/docs/v3.4/release/release-v310/>Release Notes - 3.1.0</a></li><li class=list><a href=/docs/v3.4/release/release-v300/>Release Notes - 3.0.0</a></li></ul></li></ul></nav></div><script>$(".nav-menu .list-title").click(function(){$(this).find(".arrow").toggleClass("arrow-open"),$(this).next().toggleClass("ul-active")})</script></div></div><div class=second-section-menu><div></div><div></div><div></div></div><div class=middle-div><div class="top-div common-flex-layout"><div class=contributor-div><span>Last updated:</span>
<span class=update-time></span>
<a href=https://github.com/kubesphere/website/blob/master/content/en/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere.md target=_blank rel="noopener noreferrer"><ul class=contributor-avatar></ul></a><span class=more-contributor></span></div><div class="mutual-div common-flex-layout"><div class=edit-div><a href=https://github.com/kubesphere/website/edit/master/content/en/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere.md target=_blank rel="noopener noreferrer"><span class=icon-span></span>
<span>Edit</span></a></div><div class=feedback-div><a href=https://github.com/kubesphere/website/issues/new target=_blank rel="noopener noreferrer"><span class=icon-span></span>
<span>Feedback</span></a></div><div class=share-div><div><span class=icon-span></span>
<span>Share</span></div><ul><li><img src=/images/docs/v3.3/twitter.svg alt=twitter>
<a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fopenksc.github.io%2fdocs%2fv3.4%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f&text=Deploy%20KubeSphere%20on%20VMware%20vSphere" target=_blank rel="noopener noreferrer">twitter</a></li><li><img src=/images/docs/v3.3/linkedIn.svg alt=linkedIn>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fopenksc.github.io%2fdocs%2fv3.4%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f" target=_blank rel="noopener noreferrer">linkedIn</a></li><li><img src=/images/docs/v3.3/facebook.svg alt=facebook>
<a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fopenksc.github.io%2fdocs%2fv3.4%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f" target=_blank rel="noopener noreferrer">facebook</a></li><li><img src=/images/docs/v3.3/reddit.svg alt=reddit>
<a href="https://reddit.com/submit?url=https%3a%2f%2fopenksc.github.io%2fdocs%2fv3.4%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f&title=Deploy%20KubeSphere%20on%20VMware%20vSphere" target=_blank rel="noopener noreferrer">reddit</a></li><li><img src=/images/docs/v3.3/email.svg alt=email>
<a href=mailto:info@kubesphere.io target=_blank rel="noopener noreferrer">email</a></li></ul></div></div></div><div class="content-div main-div"><div class=md-body><h1>Deploy KubeSphere on VMware vSphere</h1><h2 id=introduction>Introduction</h2><p>For a production environment, we need to consider the high availability of the cluster. If the key components (for example, kube-apiserver, kube-scheduler, and kube-controller-manager) are all running on the same control plane node, Kubernetes and KubeSphere will be unavailable once the control plane node goes down. Therefore, we need to set up a high-availability cluster by provisioning load balancers with multiple control plane nodes. You can use any cloud load balancer, or any hardware load balancer (for example, F5). In addition, Keepalived and <a href=https://www.haproxy.com/ target=_blank rel="noopener noreferrer">HAProxy</a>, or Nginx is also an alternative for creating high-availability clusters.</p><p>This tutorial walks you through an example of how to create Keepalived and HAProxy, and implement high availability of control plane and etcd nodes using the load balancers on VMware vSphere.</p><h2 id=prerequisites>Prerequisites</h2><ul><li>Please make sure that you already know how to install KubeSphere with a multi-node cluster by following the <a href=../../introduction/multioverview/>guide</a>. This tutorial focuses more on how to configure load balancers.</li><li>You need a VMware vSphere account to create VMs.</li><li>Considering data persistence, for a production environment, we recommend you to prepare persistent storage and create a <strong>default</strong> StorageClass in advance. For development and testing, you can use the integrated OpenEBS to provision LocalPV as the storage service directly.</li></ul><h2 id=architecture>Architecture</h2><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-zh-architecture.png alt=Architecture></p><h2 id=prepare-linux-hosts>Prepare Linux Hosts</h2><p>This tutorial creates 8 virtual machines of <strong>CentOS Linux release 7.6.1810 (Core)</strong> for the default minimal installation. Every machine has 2 Cores, 4 GB of memory and 40 G disk space.</p><table><thead><tr><th>Host IP</th><th>Host Name</th><th>Role</th></tr></thead><tbody><tr><td>10.10.71.214</td><td>master1</td><td>master, etcd</td></tr><tr><td>10.10.71.73</td><td>master2</td><td>master, etcd</td></tr><tr><td>10.10.71.62</td><td>master3</td><td>master, etcd</td></tr><tr><td>10.10.71.75</td><td>node1</td><td>worker</td></tr><tr><td>10.10.71.76</td><td>node2</td><td>worker</td></tr><tr><td>10.10.71.79</td><td>node3</td><td>worker</td></tr><tr><td>10.10.71.67</td><td>vip</td><td>vip (No need to create a VM)</td></tr><tr><td>10.10.71.77</td><td>lb-0</td><td>lb (Keepalived + HAProxy)</td></tr><tr><td>10.10.71.66</td><td>lb-1</td><td>lb (Keepalived + HAProxy)</td></tr></tbody></table><div class="notices note"><p>Note</p><div>You do not need to create a virtual machine for <code>vip</code> (i.e. Virtual IP) above, so only 8 virtual machines need to be created.</div></div><p>You can follow the New Virtual Machine wizard to create a virtual machine to place in the VMware Host Client inventory.</p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-create.png alt=create></p><ol><li><p>In the first step <strong>Select a creation type</strong>, you can deploy a virtual machine from an OVF or OVA file, or register an existing virtual machine directly.</p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-1-create-type.png alt=kubesphereOnVsphere-en-0-1-1-create-type></p></li><li><p>When you create a new virtual machine, provide a unique name for the virtual machine to distinguish it from existing virtual machines on the host you are managing.</p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-2-name.png alt=kubesphereOnVsphere-en-0-1-2-name></p></li><li><p>Select a compute resource and storage (datastore) for the configuration and disk files. You can select the datastore that has the most suitable properties, such as size, speed, and availability, for your virtual machine storage.</p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-3-resource.png alt=kubesphereOnVsphere-en-0-1-3-resource></p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-4-storage.png alt=kubesphereOnVsphere-en-0-1-4-storage></p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-5-compatibility.png alt=kubesphereOnVsphere-en-0-1-5-compatibility></p></li><li><p>Select a guest operating system. The wizard will provide the appropriate defaults for the operating system installation.</p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-6-system.png alt=kubesphereOnVsphere-en-0-1-6-system></p></li><li><p>Before you finish deploying a new virtual machine, you have the option to set <strong>Virtual Hardware</strong> and <strong>VM Options</strong>. You can refer to the images below for part of the fields.</p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-1.png alt=kubesphereOnVsphere-en-0-1-7-hardware-1></p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-2.png alt=kubesphereOnVsphere-en-0-1-7-hardware-2></p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-3.png alt=kubesphereOnVsphere-en-0-1-7-hardware-3></p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-4.png alt=kubesphereOnVsphere-en-0-1-7-hardware-4></p></li><li><p>In <strong>Ready to complete</strong> page, you review the configuration selections that you have made for the virtual machine. Click <strong>Finish</strong> at the bottom-right corner to continue.</p><p><img src=/images/docs/v3.x/vsphere/kubesphereOnVsphere-en-0-1-8.png alt=kubesphereOnVsphere-en-0-1-8></p></li></ol><h2 id=install-a-load-balancer-using-keepalived-and-haproxy>Install a Load Balancer using Keepalived and HAProxy</h2><p>For a production environment, you have to prepare an external load balancer for your cluster with multiple control plane nodes. If you do not have a load balancer, you can install it using Keepalived and HAProxy. If you are provisioning a development or testing environment by installing a cluster with a control plane node, please skip this section.</p><h3 id=yum-install>Yum Install</h3><p>host lb-0 (<code>10.10.71.77</code>) and host lb-1 (<code>10.10.71.66</code>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yum install keepalived haproxy psmisc -y
</span></span></code></pre></div><h3 id=configure-haproxy>Configure HAProxy</h3><p>On the servers with IP <code>10.10.71.77</code> and <code>10.10.71.66</code>, configure HAProxy as follows.</p><div class="notices note"><p>Note</p><div>The configuration of the two lb machines is the same. Please pay attention to the backend service address.</div></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># HAProxy Configure /etc/haproxy/haproxy.cfg</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>global</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>log         127.0.0.1 local2</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>chroot      /var/lib/haproxy</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>pidfile     /var/run/haproxy.pid</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>maxconn     4000</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>user        haproxy</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>group       haproxy</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>daemon</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># turn on stats unix socket</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>stats socket /var/lib/haproxy/stats</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e># common defaults that all the &#39;listen&#39; and &#39;backend&#39; sections will</span>
</span></span><span style=display:flex><span><span style=color:#75715e># use if not designated in their block</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>defaults</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>log                     global</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>option                  httplog</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>option                  dontlognull</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>timeout connect         5000</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>timeout client          5000</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>timeout server          5000</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e># main frontend which proxys to the backends</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>frontend  kube-apiserver</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>bind *:6443</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>mode tcp</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>option tcplog</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>default_backend kube-apiserver</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e># round robin balancing between the various backends</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>backend kube-apiserver</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>mode tcp</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>option tcplog</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>balance     roundrobin</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>default-server inter 10s downinter 5s rise 2 fall 2 slowstart 60s maxconn 250 maxqueue 256 weight 100</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>server kube-apiserver-1 10.10.71.214:6443 check</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>server kube-apiserver-2 10.10.71.73:6443 check</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>server kube-apiserver-3 10.10.71.62:6443 check</span>
</span></span></code></pre></div><p>Check grammar first before you start it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>haproxy -f /etc/haproxy/haproxy.cfg -c
</span></span></code></pre></div><p>Restart HAProxy and execute the command below to enable HAProxy.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl restart haproxy <span style=color:#f92672>&amp;&amp;</span> systemctl enable haproxy
</span></span></code></pre></div><p>Stop HAProxy.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl stop haproxy
</span></span></code></pre></div><h3 id=configure-keepalived>Configure Keepalived</h3><p>Main HAProxy 77 lb-0-10.10.71.77 (/etc/keepalived/keepalived.conf).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>global_defs <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  notification_email <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  smtp_connect_timeout <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>  router_id LVS_DEVEL01
</span></span><span style=display:flex><span>  vrrp_skip_check_adv_addr
</span></span><span style=display:flex><span>  vrrp_garp_interval <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  vrrp_gna_interval <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>vrrp_script chk_haproxy <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  script <span style=color:#e6db74>&#34;killall -0 haproxy&#34;</span>
</span></span><span style=display:flex><span>  interval <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  weight <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>vrrp_instance haproxy-vip <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  state MASTER  
</span></span><span style=display:flex><span>  priority <span style=color:#ae81ff>100</span>  
</span></span><span style=display:flex><span>  interface ens192
</span></span><span style=display:flex><span>  virtual_router_id <span style=color:#ae81ff>60</span>
</span></span><span style=display:flex><span>  advert_int <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  authentication <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    auth_type PASS
</span></span><span style=display:flex><span>    auth_pass <span style=color:#ae81ff>1111</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  unicast_src_ip 10.10.71.77
</span></span><span style=display:flex><span>  unicast_peer <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    10.10.71.66
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  virtual_ipaddress <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#vip</span>
</span></span><span style=display:flex><span>    10.10.71.67/24
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  track_script <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    chk_haproxy
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Remark HAProxy 66 lb-1-10.10.71.66 (/etc/keepalived/keepalived.conf).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>global_defs <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  notification_email <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  router_id LVS_DEVEL02
</span></span><span style=display:flex><span>  vrrp_skip_check_adv_addr
</span></span><span style=display:flex><span>  vrrp_garp_interval <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  vrrp_gna_interval <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>vrrp_script chk_haproxy <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  script <span style=color:#e6db74>&#34;killall -0 haproxy&#34;</span>
</span></span><span style=display:flex><span>  interval <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  weight <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>vrrp_instance haproxy-vip <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  state BACKUP
</span></span><span style=display:flex><span>  priority <span style=color:#ae81ff>90</span>
</span></span><span style=display:flex><span>  interface ens192
</span></span><span style=display:flex><span>  virtual_router_id <span style=color:#ae81ff>60</span>
</span></span><span style=display:flex><span>  advert_int <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  authentication <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    auth_type PASS
</span></span><span style=display:flex><span>    auth_pass <span style=color:#ae81ff>1111</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  unicast_src_ip 10.10.71.66
</span></span><span style=display:flex><span>  unicast_peer <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    10.10.71.77
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  virtual_ipaddress <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    10.10.71.67/24
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  track_script <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    chk_haproxy
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Start keepalived and enable keepalived.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl restart keepalived <span style=color:#f92672>&amp;&amp;</span> systemctl enable keepalived
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl stop keepalived
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl start keepalived
</span></span></code></pre></div><h3 id=verify-availability>Verify Availability</h3><p>Use <code>ip a s</code> to view the vip binding status of each lb node:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip a s
</span></span></code></pre></div><p>Pause VIP node HAProxy through the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl stop haproxy
</span></span></code></pre></div><p>Use <code>ip a s</code> again to check the vip binding of each lb node, and check whether vip drifts:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip a s
</span></span></code></pre></div><p>Alternatively, use the command below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl status -l keepalived
</span></span></code></pre></div><h2 id=download-kubekey>Download KubeKey</h2><p><a href=https://github.com/kubesphere/kubekey target=_blank rel="noopener noreferrer">Kubekey</a> is the brand-new installer which provides an easy, fast and flexible way to install Kubernetes and KubeSphere 3.4.</p><p>Follow the step below to download KubeKey.</p><div class=code-tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title="Good network connections to GitHub/Googleapis"><p>Download KubeKey from its <a href=https://github.com/kubesphere/kubekey/releases target=_blank rel="noopener noreferrer">GitHub Release Page</a> or use the following command directly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sfL https://get-kk.kubesphere.io | VERSION<span style=color:#f92672>=</span>v3.0.13 sh -
</span></span></code></pre></div></div><div class=tab-pane title="Poor network connections to GitHub/Googleapis"><p>Run the following command first to make sure you download KubeKey from the correct zone.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export KKZONE<span style=color:#f92672>=</span>cn
</span></span></code></pre></div><p>Run the following command to download KubeKey:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sfL https://get-kk.kubesphere.io | VERSION<span style=color:#f92672>=</span>v3.0.13 sh -
</span></span></code></pre></div><div class="notices note"><p>Note</p><div>After you download KubeKey, if you transfer it to a new machine also with poor network connections to Googleapis, you must run <code>export KKZONE=cn</code> again before you proceed with the steps below.</div></div></div></div></div><div class="notices note"><p>Note</p><div>The commands above download the latest release of KubeKey. You can change the version number in the command to download a specific version.</div></div><p>Make <code>kk</code> executable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod +x kk
</span></span></code></pre></div><h2 id=create-a-high-availability-cluster>Create a High Availability Cluster</h2><p>With KubeKey, you can install Kubernetes and KubeSphere together. You have the option to create a multi-node cluster by customizing parameters in the configuration file.</p><p>Create a Kubernetes cluster with KubeSphere installed (for example, <code>--with-kubesphere v3.4.1</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./kk create config --with-kubernetes v1.22.12 --with-kubesphere v3.4.1
</span></span></code></pre></div><div class="notices note"><p>Note</p><div><ul><li><p>Recommended Kubernetes versions for KubeSphere 3.4: v1.20.x, v1.21.x, * v1.22.x, * v1.23.x, * v1.24.x, * v1.25.x, and * v1.26.x. For Kubernetes versions with an asterisk, some features of edge nodes may be unavailable due to incompatability. Therefore, if you want to use edge nodes, you are advised to install Kubernetes v1.23.x. If you do not specify a Kubernetes version, KubeKey will install Kubernetes v1.23.10 by default. For more information about supported Kubernetes versions, see <a href=../../../installing-on-linux/introduction/kubekey/#support-matrix>Support Matrix</a>.</p></li><li><p>If you do not add the flag <code>--with-kubesphere</code> in the command in this step, KubeSphere will not be deployed unless you install it using the <code>addons</code> field in the configuration file or add this flag again when you use <code>./kk create cluster</code> later.</p></li><li><p>If you add the flag <code>--with-kubesphere</code> without specifying a KubeSphere version, the latest version of KubeSphere will be installed.</p></li></ul></div></div><p>A default file <code>config-sample.yaml</code> will be created. Modify it according to your environment.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vi config-sample.yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>kubekey.kubesphere.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Cluster</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>config-sample</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>hosts</span>:
</span></span><span style=display:flex><span>  - {<span style=color:#f92672>name: master1, address: 10.10.71.214, internalAddress: 10.10.71.214, password</span>: <span style=color:#ae81ff>P@ssw0rd!}</span>
</span></span><span style=display:flex><span>  - {<span style=color:#f92672>name: master2, address: 10.10.71.73, internalAddress: 10.10.71.73, password</span>: <span style=color:#ae81ff>P@ssw0rd!}</span>
</span></span><span style=display:flex><span>  - {<span style=color:#f92672>name: master3, address: 10.10.71.62, internalAddress: 10.10.71.62, password</span>: <span style=color:#ae81ff>P@ssw0rd!}</span>
</span></span><span style=display:flex><span>  - {<span style=color:#f92672>name: node1, address: 10.10.71.75, internalAddress: 10.10.71.75, password</span>: <span style=color:#ae81ff>P@ssw0rd!}</span>
</span></span><span style=display:flex><span>  - {<span style=color:#f92672>name: node2, address: 10.10.71.76, internalAddress: 10.10.71.76, password</span>: <span style=color:#ae81ff>P@ssw0rd!}</span>
</span></span><span style=display:flex><span>  - {<span style=color:#f92672>name: node3, address: 10.10.71.79, internalAddress: 10.10.71.79, password</span>: <span style=color:#ae81ff>P@ssw0rd!}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>roleGroups</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>etcd</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>master1</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>master2</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>master3</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>control-plane</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>master1</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>master2</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>master3</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>worker</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>node1</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>node2</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>node3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>controlPlaneEndpoint</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>domain</span>: <span style=color:#ae81ff>lb.kubesphere.local</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># vip</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>address</span>: <span style=color:#e6db74>&#34;10.10.71.67&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>port</span>: <span style=color:#ae81ff>6443</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>kubernetes</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#ae81ff>v1.22.12</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>imageRepo</span>: <span style=color:#ae81ff>kubesphere</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>clusterName</span>: <span style=color:#ae81ff>cluster.local</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>masqueradeAll: false  # masqueradeAll tells kube-proxy to SNAT everything if using the pure iptables proxy mode. [Default</span>: <span style=color:#66d9ef>false</span>]
</span></span><span style=display:flex><span>    <span style=color:#f92672>maxPods: 110  # maxPods is the number of pods that can run on this Kubelet. [Default</span>: <span style=color:#ae81ff>110</span>]
</span></span><span style=display:flex><span>    <span style=color:#f92672>nodeCidrMaskSize: 24  # internal network node size allocation. This is the size allocated to each node on your network. [Default</span>: <span style=color:#ae81ff>24</span>]
</span></span><span style=display:flex><span>    <span style=color:#f92672>proxyMode: ipvs  # mode specifies which proxy mode to use. [Default</span>: <span style=color:#ae81ff>ipvs]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>network</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>plugin</span>: <span style=color:#ae81ff>calico</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>calico</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>ipipMode</span>: <span style=color:#ae81ff>Always </span> <span style=color:#75715e># IPIP Mode to use for the IPv4 POOL created at start up. If set to a value other than Never, vxlanMode should be set to &#34;Never&#34;. [Always | CrossSubnet | Never] [Default: Always]</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>vxlanMode</span>: <span style=color:#ae81ff>Never </span> <span style=color:#75715e># VXLAN Mode to use for the IPv4 POOL created at start up. If set to a value other than Never, ipipMode should be set to &#34;Never&#34;. [Always | CrossSubnet | Never] [Default: Never]</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>vethMTU: 1440  # The maximum transmission unit (MTU) setting determines the largest packet size that can be transmitted through your network. [Default</span>: <span style=color:#ae81ff>1440</span>]
</span></span><span style=display:flex><span>    <span style=color:#f92672>kubePodsCIDR</span>: <span style=color:#ae81ff>10.233.64.0</span><span style=color:#ae81ff>/18</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>kubeServiceCIDR</span>: <span style=color:#ae81ff>10.233.0.0</span><span style=color:#ae81ff>/18</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>registry</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>registryMirrors</span>: []
</span></span><span style=display:flex><span>    <span style=color:#f92672>insecureRegistries</span>: []
</span></span><span style=display:flex><span>    <span style=color:#f92672>privateRegistry</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>storage</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>defaultStorageClass</span>: <span style=color:#ae81ff>localVolume</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>localVolume</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>storageClassName</span>: <span style=color:#ae81ff>local  </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>installer.kubesphere.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ClusterConfiguration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ks-installer</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>kubesphere-system</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#ae81ff>v3.4.1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>local_registry</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>persistence</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>storageClass</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>authentication</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>jwtSecret</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>etcd</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>monitoring</span>: <span style=color:#66d9ef>true</span>        <span style=color:#75715e># Whether to install etcd monitoring dashboard</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>endpointIps</span>: <span style=color:#ae81ff>192.168.0.7</span>,<span style=color:#ae81ff>192.168.0.8</span>,<span style=color:#ae81ff>192.168.0.9</span>  <span style=color:#75715e># etcd cluster endpointIps</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>port</span>: <span style=color:#ae81ff>2379</span>              <span style=color:#75715e># etcd port</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>tlsEnable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>common</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>mysqlVolumeSize</span>: <span style=color:#ae81ff>20Gi</span> <span style=color:#75715e># MySQL PVC size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>minioVolumeSize</span>: <span style=color:#ae81ff>20Gi</span> <span style=color:#75715e># Minio PVC size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>etcdVolumeSize</span>: <span style=color:#ae81ff>20Gi </span> <span style=color:#75715e># etcd PVC size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>openldapVolumeSize</span>: <span style=color:#ae81ff>2Gi  </span> <span style=color:#75715e># openldap PVC size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>redisVolumSize</span>: <span style=color:#ae81ff>2Gi</span> <span style=color:#75715e># Redis PVC size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>es</span>:  <span style=color:#75715e># Storage backend for logging, tracing, events and auditing.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>elasticsearchMasterReplicas</span>: <span style=color:#ae81ff>1</span>   <span style=color:#75715e># total number of master nodes, it&#39;s not allowed to use even number</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>elasticsearchDataReplicas</span>: <span style=color:#ae81ff>1</span>     <span style=color:#75715e># total number of data nodes</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>elasticsearchMasterVolumeSize</span>: <span style=color:#ae81ff>4Gi  </span> <span style=color:#75715e># Volume size of Elasticsearch master nodes</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>elasticsearchDataVolumeSize</span>: <span style=color:#ae81ff>20Gi   </span> <span style=color:#75715e># Volume size of Elasticsearch data nodes</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>logMaxAge</span>: <span style=color:#ae81ff>7</span>                     <span style=color:#75715e># Log retention time in built-in Elasticsearch, it is 7 days by default.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>elkPrefix</span>: <span style=color:#ae81ff>logstash             </span> <span style=color:#75715e># The string making up index names. The index name will be formatted as ks-&lt;elk_prefix&gt;-log</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># externalElasticsearchHost:</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># externalElasticsearchPort:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>console</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enableMultiLogin</span>: <span style=color:#66d9ef>false</span>  <span style=color:#75715e># enable/disable multiple sing on, it allows a user can be used by different users at the same time.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>port</span>: <span style=color:#ae81ff>30880</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>alerting</span>:                <span style=color:#75715e># Whether to install KubeSphere alerting system. It enables Users to customize alerting policies to send messages to receivers in time with different time intervals and alerting levels to choose from.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>auditing</span>:                <span style=color:#75715e># Whether to install KubeSphere audit log system. It provides a security-relevant chronological set of recordsï¼Œrecording the sequence of activities happened in platform, initiated by different tenants.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>devops</span>:                  <span style=color:#75715e># Whether to install KubeSphere DevOps System. It provides out-of-box CI/CD system based on Jenkins, and automated workflow tools including Source-to-Image &amp; Binary-to-Image</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>jenkinsMemoryLim</span>: <span style=color:#ae81ff>2Gi     </span> <span style=color:#75715e># Jenkins memory limit</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>jenkinsMemoryReq</span>: <span style=color:#ae81ff>1500Mi  </span> <span style=color:#75715e># Jenkins memory request</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>jenkinsVolumeSize</span>: <span style=color:#ae81ff>8Gi    </span> <span style=color:#75715e># Jenkins volume size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>jenkinsJavaOpts_Xms</span>: <span style=color:#ae81ff>512m </span> <span style=color:#75715e># The following three fields are JVM parameters</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>jenkinsJavaOpts_Xmx</span>: <span style=color:#ae81ff>512m</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>jenkinsJavaOpts_MaxRAM</span>: <span style=color:#ae81ff>2g</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>events</span>:                  <span style=color:#75715e># Whether to install KubeSphere events system. It provides a graphical web console for Kubernetes Events exporting, filtering and alerting in multi-tenant Kubernetes clusters.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>logging</span>:                 <span style=color:#75715e># Whether to install KubeSphere logging system. Flexible logging functions are provided for log query, collection and management in a unified console. Additional log collectors can be added, such as Elasticsearch, Kafka and Fluentd.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>logsidecarReplicas</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>metrics_server</span>:                    <span style=color:#75715e># Whether to install metrics-server. IT enables HPA (Horizontal Pod Autoscaler).</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>monitoring</span>:                        <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>prometheusReplicas</span>: <span style=color:#ae81ff>1</span>            <span style=color:#75715e># Prometheus replicas are responsible for monitoring different segments of data source and provide high availability as well.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>prometheusMemoryRequest</span>: <span style=color:#ae81ff>400Mi  </span> <span style=color:#75715e># Prometheus request memory</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>prometheusVolumeSize</span>: <span style=color:#ae81ff>20Gi      </span> <span style=color:#75715e># Prometheus PVC size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>alertmanagerReplicas</span>: <span style=color:#ae81ff>1</span>          <span style=color:#75715e># AlertManager Replicas</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>multicluster</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>clusterRole</span>: <span style=color:#ae81ff>none  # host | member | none </span> <span style=color:#75715e># You can install a solo cluster, or specify it as the role of host or member cluster</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>networkpolicy</span>:       <span style=color:#75715e># Network policies allow network isolation within the same cluster, which means firewalls can be set up between certain instances (Pods).</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>notification</span>:        <span style=color:#75715e># It supports notification management in multi-tenant Kubernetes clusters. It allows you to set AlertManager as its sender, and receivers include Email, Wechat Work, and Slack.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>openpitrix</span>:          <span style=color:#75715e># Whether to install KubeSphere App Store. It provides an application store for Helm-based applications, and offer application lifecycle management</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>servicemesh</span>:         <span style=color:#75715e># (0.3 Core, 300 MiB) Provide fine-grained traffic management, observability and tracing, and visualized traffic topology</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span></code></pre></div><p>Create a cluster using the configuration file you customized above:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./kk create cluster -f config-sample.yaml
</span></span></code></pre></div><h2 id=verify-the-multi-node-installation>Verify the Multi-node Installation</h2><p>Inspect the logs of installation by executing the command below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl logs -n kubesphere-system <span style=color:#66d9ef>$(</span>kubectl get pod -n kubesphere-system -l <span style=color:#e6db74>&#39;app in (ks-install, ks-installer)&#39;</span> -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.items[0].metadata.name}&#39;</span><span style=color:#66d9ef>)</span> -f
</span></span></code></pre></div><p>If you can see the welcome log return, it means the installation is successful. Your cluster is up and running.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e>**************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################################################</span>
</span></span><span style=display:flex><span><span style=color:#75715e>###              Welcome to KubeSphere!           ###</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################################################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Console</span>: <span style=color:#ae81ff>http://10.10.71.214:30880</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Account</span>: <span style=color:#ae81ff>admin</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Password</span>: <span style=color:#ae81ff>P@88w0rd</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>NOTESï¼š</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>1</span><span style=color:#ae81ff>. After you log into the console, please check the</span>
</span></span><span style=display:flex><span>     <span style=color:#ae81ff>monitoring status of service components in</span>
</span></span><span style=display:flex><span>     <span style=color:#ae81ff>the &#34;Cluster Management&#34;. If any service is not</span>
</span></span><span style=display:flex><span>     <span style=color:#ae81ff>ready, please wait patiently until all components</span>
</span></span><span style=display:flex><span>     <span style=color:#ae81ff>are up and running.</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>2</span><span style=color:#ae81ff>. Please change the default password after login.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################################################</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>https://kubesphere.io             2020-08-15 23:32:12</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################################################</span>
</span></span></code></pre></div><h3 id=log-in-to-the-console>Log in to the Console</h3><p>You will be able to use default account and password <code>admin/P@88w0rd</code> to log in to the console <code>http://{$IP}:30880</code> to take a tour of KubeSphere. Please change the default password after login.</p><h2 id=enable-pluggable-components-optional>Enable Pluggable Components (Optional)</h2><p>The example above demonstrates the process of a default minimal installation. To enable other components in KubeSphere, see <a href=../../../pluggable-components/>Enable Pluggable Components</a> for more details.</p><section class=feedback-section><p class=title>Feedback</p><p>Was this page Helpful?</p><button class=Yes>Yes</button>
<button class=No>No</button></section><div class=SubscribeForm><div class=innerBox><p class=description>Receive the latest news, articles and updates from KubeSphere</p><div id=formAddress data-usesendcloud=false><form action="https://kubesphere.us10.list-manage.com/subscribe/post?u=c85ea2b944b08b951f607bdd4&amp;id=83f673a2d9" method=post target=_blank novalidate><input name=EMAIL id=email-input type=text placeholder='Please enter your email address'>
<button type=submit id=email-submit>Subscribe</button></form></div><span id=message data-message1='email is required!' data-message2='Please enter a valid email address!'></span>
<script>var bindSubmit=function(){var e=$("#email-input");$("#email-submit").click(function(t){t.stopPropagation();var s,o,n=e.val(),i=$("#message").data("message1"),a=$("#message").data("message2"),r=$("#message").data("message3"),c=$("#message1").data("success");if(n)if(validateEmail(n)){if(s=$("#formAddress").data("usesendcloud"),!s)return;o=$("#formAddress").data("actionaddress"),$.post({type:"post",url:o,data:{email:$("#email-input").val().toString()},success:function(){showSuccessMessage(c),setTimeout(function(){$("#email-input").val("")},1e3)},error:function(){showMessage(r)}})}else t.preventDefault(),showMessage(a);else t.preventDefault(),showMessage(i)})},validateEmail=function(e){var t=/^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\.)+[A-Za-z]{2,6}$/;return t.test(e)},showMessage=function(e){$("#message").html(e).show()},showSuccessMessage=function(e){$("#message1").html(e).show()},bindHideMessage=function(){$(window).click(function(){$("#message").hide(),$("#message1").hide()})},bindClose=function(){$(".formBox .close").click(function(e){e.stopPropagation(),$(".formBox").fadeOut()})};bindSubmit(),bindClose(),bindHideMessage()</script></div></div><br><p class=msg-thank>Thanks for the feedback. If you have a specific question about how to use KubeSphere, ask it on Slack. Open an issue in the GitHub repo if you want to report a problem or suggest an improvement.</p></div></div><div class="page-div common-flex-layout"><a class=last href=/docs/v3.4/installing-on-linux/public-cloud/install-and-use-kubesphere-on-hostinger-vps/><img src=/images/docs/v3.3/last.svg alt>
Previous
<span>: Install and Use KubeSphere on Hostinger VPS</span>
</a><a class=next href=/docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-bare-metal/>Next
<span>: Deploy KubeSphere on Bare Metal</span>
<img src=/images/docs/v3.3/next.svg alt></a></div><div></div></div><div class=aside><div class=inner-div><div class=title>Whatâ€™s on this Page</div><div class=tabs><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#architecture>Architecture</a></li><li><a href=#prepare-linux-hosts>Prepare Linux Hosts</a></li><li><a href=#install-a-load-balancer-using-keepalived-and-haproxy>Install a Load Balancer using Keepalived and HAProxy</a><ul><li><a href=#yum-install>Yum Install</a></li><li><a href=#configure-haproxy>Configure HAProxy</a></li><li><a href=#configure-keepalived>Configure Keepalived</a></li><li><a href=#verify-availability>Verify Availability</a></li></ul></li><li><a href=#download-kubekey>Download KubeKey</a></li><li><a href=#create-a-high-availability-cluster>Create a High Availability Cluster</a></li><li><a href=#verify-the-multi-node-installation>Verify the Multi-node Installation</a><ul><li><a href=#log-in-to-the-console>Log in to the Console</a></li></ul></li><li><a href=#enable-pluggable-components-optional>Enable Pluggable Components (Optional)</a></li></ul></nav></div></div></div></div></section><script type=text/javascript src=/js/aside.2d6977c0f16aef4ed3e886dd66675ce74bd0efcd467c2b2bcdb30b92d5e7c7c0e5c6e0c9d8f09a883c22f58df9e6b0b6347fcdd3c9a920b7faba6d7f91a201c3.js integrity="sha512-LWl3wPFq707T6IbdZmdc50vQ781GfCsrzbMLktXnx8DlxuDJ2PCaiDwi9Y355rC2NH/N08mpILf6um1/kaIBww=="></script><script type=text/javascript src=/js/markdown-tab.17f9f46b021adebc7250ce1b07134a577b307e7a436daa4aaf388f218e8463966f53770b26a64817c06c168738a887672d47fb4c29615adfc446e11d09a344cf.js integrity="sha512-F/n0awIa3rxyUM4bBxNKV3swfnpDbapKrziPIY6EY5ZvU3cLJqZIF8BsFoc4qIdnLUf7TClhWt/ERuEdCaNEzw=="></script><script>var getLatestTime,filterData,getFileContributors,renderContributors,renderLatestTime,bindClickMenu,bindClickSecondMenu,useViewer,__main,languageCode="en",filePath="docs/v3.4/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere.md",githubUrl="https://github.com/kubesphere/website",Yes=$("button.Yes"),No=$("button.No"),msg=$("p.msg-thank");msg.hide(),Yes.click(function(){Yes.css("background-color"," #55BC8A"),Yes.css("opacity","0.5"),Yes.css("pointer-events","none"),No.css("pointer-events","none"),msg.show()}),No.click(function(){No.css("background-color"," #55BC8A"),No.css("opacity","0.5"),Yes.css("pointer-events","none"),No.css("pointer-events","none"),msg.show()}),getLatestTime=function(e){var t=e[0].commit;return t.author.date.replace("T"," ").replace("Z","")},filterData=function(e){for(var t,o,n=[],i=e.length,s=0;s<i;s++)o=e[s].author,o&&(t=o.avatar_url,t&&!n.includes(t)&&n.push(t));return n},getFileContributors=function(){var e="https://api.github.com/repos/kubesphere/website/commits?path=content/"+languageCode+"/"+filePath;$.getJSON(e,function(e){if(!e||e.length===0){$(".contributor-div").hide();return}var t=filterData(e),n=getLatestTime(e);renderLatestTime(n),renderContributors(t)})},renderContributors=function(e){var t,s=$(".contributor-avatar"),o=e.length,n=5;$.each(e.slice(0,n),function(e,t){var n=$("<img />",{src:t,alt:"avatar"});$("<li />",{html:n}).appendTo(s)}),t=o-n,t>0&&$(".more-contributor").html("+"+t)},renderLatestTime=function(e){$(".update-time").html(e)},bindClickMenu=function(){var e=$(".section-menu");$(".section-control").on("mouseenter",function(){e.is(":hidden")&&e.show()}),e.on("mouseleave",function(){e.hide()}),$(document).on("click",function(){e.hide()}),e.on("click",function(e){e.stopPropagation()})},bindClickSecondMenu=function(){var e=$(".section-2 .left-div");$(".second-section-menu").on("click",function(t){e.css("left","0"),$(document).one("click",function(){e.css("left","-274px")}),t.stopPropagation()}),e.on("click",function(e){e.stopPropagation()})},useViewer=function(){var e=new Viewer(document.querySelector(".md-body"),{url:"src"})},__main=function(){getFileContributors(),bindClickMenu(),bindClickSecondMenu(),useViewer()},__main(),$(".asciicast").children().attr("title","video")</script></main><footer><div class=down-main><div class=img-div><a class=wechat href=javascript:void(0); aria-label=wechat><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="0 0 28 28"><defs><path id="a" d="M0 0h15.673v12.156H0z"/></defs><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="13" cy="13" r="13" stroke="#B6C2CD"/><g transform="translate(5 7)"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path fill="currentColor" d="M15.673 7.898c0-2.061-2.173-3.74-4.619-3.74-2.59.0-4.625 1.679-4.625 3.74.0 2.066 2.035 3.738 4.625 3.738.542.0 1.09-.13 1.632-.256l1.493.776-.408-1.29c1.09-.776 1.902-1.81 1.902-2.968zm-6.119-.645c-.27.0-.541-.257-.541-.514.0-.256.27-.514.541-.514.41.0.681.258.681.514.0.257-.271.514-.681.514zm2.994.0c-.27.0-.541-.257-.541-.514.0-.256.27-.514.54-.514.41.0.681.258.681.514.0.257-.277.514-.68.514z" mask="url(#b)"/><path fill="currentColor" d="M10.602 3.674c.177.0.356.011.533.029C10.657 1.576 8.27.0 5.543.0 2.498.0.0 1.974.0 4.485c0 1.45.829 2.64 2.216 3.564l-.552 1.588 1.94-.929c.693.129 1.251.263 1.94.263.17.0.343-.005.515-.022a3.68 3.68.0 01-.172-1.104c0-2.302 2.081-4.171 4.715-4.171zM7.618 2.243c.417.0.693.263.693.66s-.276.66-.693.66c-.418.0-.835-.263-.835-.66.006-.398.423-.66.835-.66zm-3.88 1.319c-.417.0-.834-.263-.834-.66s.417-.66.834-.66c.418.0.695.263.695.66.0.392-.277.66-.695.66z" mask="url(#b)"/></g></g></svg><div class=hide-div><p>Follow the official account</p><img src=/images/footer/wechat_code.svg alt></div></a><a class=facebook-a href=https://www.facebook.com/kubesphere target=_blank aria-label=facebook></a><a class=twitter-a href=https://x.com/KubeSphere target=_blank aria-label=twitter rel="noopener noreferrer"></a><a class=linkedin-a href=https://www.linkedin.com/company/kubesphere/ target=_blank aria-label=linkedin rel="noopener noreferrer"></a><a class=youtube-a href=https://www.youtube.com/c/KubeSphere target=_blank aria-label=youtube rel="noopener noreferrer"></a><a class=slack-a href=https://join.slack.com/t/kubesphere/shared_invite/zt-2b4t6rdb4-ico_4UJzCln_S2c1pcrIpQ target=_blank aria-label=slack rel="noopener noreferrer"></a><a class=github-a href=https://github.com/kubesphere/kubesphere target=_blank aria-label=github rel="noopener noreferrer"></a><a class=medium-a href=https://itnext.io/@kubesphere target=_blank aria-label=medium rel="noopener noreferrer"></a></div><p class=p1></p></div></footer></body></html>