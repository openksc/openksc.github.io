<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Observability FAQ on</title><link>https://openksc.github.io/docs/v3.3/faq/observability/</link><description>Recent content in Observability FAQ on</description><generator>Hugo</generator><language>en-US</language><atom:link href="https://openksc.github.io/docs/v3.3/faq/observability/index.xml" rel="self" type="application/rss+xml"/><item><title>Observability — Logging FAQ</title><link>https://openksc.github.io/docs/v3.3/faq/observability/logging/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/docs/v3.3/faq/observability/logging/</guid><description>&lt;p>This page contains some of the frequently asked questions about logging.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="#how-to-change-the-log-store-to-the-external-elasticsearch-and-shut-down-the-internal-elasticsearch">How to change the log store to the external Elasticsearch and shut down the internal Elasticsearch&lt;/a>&lt;/li>
&lt;li>&lt;a href="#how-to-change-the-log-store-to-elasticsearch-with-x-pack-security-enabled">How to change the log store to Elasticsearch with X-Pack Security enabled&lt;/a>&lt;/li>
&lt;li>&lt;a href="#how-to-set-the-data-retention-period-of-logs-events-auditing-logs-and-istio-logs">How to set the data retention period of logs, events, auditing logs, and Istio logs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#i-cannot-find-logs-from-workloads-on-some-nodes-using-toolbox">I cannot find logs from workloads on some nodes using Toolbox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#the-log-search-page-in-toolbox-gets-stuck-when-loading">The log search page in Toolbox gets stuck when loading&lt;/a>&lt;/li>
&lt;li>&lt;a href="#toolbox-shows-no-log-record-today">Toolbox shows no log record today&lt;/a>&lt;/li>
&lt;li>&lt;a href="#i-see-internal-server-error-when-viewing-logs-in-toolbox">I see Internal Server Error when viewing logs in Toolbox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#how-to-make-kubesphere-only-collect-logs-from-specified-workloads">How to make KubeSphere only collect logs from specified workloads&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to-change-the-log-store-to-the-external-elasticsearch-and-shut-down-the-internal-elasticsearch">How to change the log store to the external Elasticsearch and shut down the internal Elasticsearch&lt;/h2>
&lt;p>If you are using the KubeSphere internal Elasticsearch and want to change it to your external alternate, follow the steps below. If you haven't enabled the logging system, refer to &lt;a href="../../../pluggable-components/logging/">KubeSphere Logging System&lt;/a> to setup your external Elasticsearch directly.&lt;/p></description></item><item><title>Observability — Monitoring FAQ</title><link>https://openksc.github.io/docs/v3.3/faq/observability/monitoring/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/docs/v3.3/faq/observability/monitoring/</guid><description>&lt;p>This page contains some of the frequently asked questions about monitoring.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="#how-to-access-the-prometheus-console-in-kubesphere">How to access the Prometheus console in KubeSphere&lt;/a>&lt;/li>
&lt;li>&lt;a href="#host-port-9100-conflict-caused-by-the-node-exporter">Host port 9100 conflict caused by the node exporter&lt;/a>&lt;/li>
&lt;li>&lt;a href="#conflicts-with-the-preexisting-prometheus-operator">Conflicts with the preexisting prometheus operator&lt;/a>&lt;/li>
&lt;li>&lt;a href="#how-to-change-the-monitoring-data-retention-period">How to change the monitoring data retention period&lt;/a>&lt;/li>
&lt;li>&lt;a href="#no-monitoring-data-for-kube-scheduler-and-kube-controller-manager">No monitoring data for kube-scheduler and kube-controller-manager&lt;/a>&lt;/li>
&lt;li>&lt;a href="#no-monitoring-data-for-the-last-few-minutes">No monitoring data for the last few minutes&lt;/a>&lt;/li>
&lt;li>&lt;a href="#no-monitoring-data-for-both-nodes-and-the-control-plane">No monitoring data for both nodes and the control plane&lt;/a>&lt;/li>
&lt;li>&lt;a href="#prometheus-produces-an-error-log-opening-storage-failed-no-such-file-or-directory">Prometheus produces an error log: opening storage failed, no such file or directory: opening storage failed, no such file or directory&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to-access-the-prometheus-console-in-kubesphere">How to access the Prometheus console in KubeSphere&lt;/h2>
&lt;p>The KubeSphere monitoring engine is powered by Prometheus. For debugging purposes, you may want to access the built-in Prometheus service through a NodePort. Run the following command to change the service type to &lt;code>NodePort&lt;/code>:&lt;/p></description></item><item><title>Bring Your Own Prometheus</title><link>https://openksc.github.io/docs/v3.3/faq/observability/byop/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openksc.github.io/docs/v3.3/faq/observability/byop/</guid><description>&lt;p>KubeSphere comes with several pre-installed customized monitoring components, including Prometheus Operator, Prometheus, Alertmanager, Grafana (Optional), various ServiceMonitors, node-exporter, and kube-state-metrics. These components might already exist before you install KubeSphere. It is possible to use your own Prometheus stack setup in KubeSphere v3.3.&lt;/p>
&lt;h2 id="bring-your-own-prometheus">Bring Your Own Prometheus&lt;/h2>
&lt;h3 id="step-1-uninstall-the-customized-prometheus-stack-of-kubesphere">Step 1. Uninstall the customized Prometheus stack of KubeSphere&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>Execute the following commands to uninstall the stack:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/alertmanager/ 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/devops/ 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/etcd/ 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/grafana/ 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/kube-state-metrics/ 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/node-exporter/ 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/upgrade/ 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/prometheus-rules-v1.16&lt;span style="color:#ae81ff">\+&lt;/span>.yaml 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/prometheus-rules.yaml 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl -n kubesphere-system exec &lt;span style="color:#66d9ef">$(&lt;/span>kubectl get pod -n kubesphere-system -l app&lt;span style="color:#f92672">=&lt;/span>ks-installer -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span> -- kubectl delete -f /kubesphere/kubesphere/prometheus/prometheus 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Uncomment this line if you don&amp;#39;t have Prometheus managed by Prometheus Operator in other namespaces.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># kubectl -n kubesphere-system exec $(kubectl get pod -n kubesphere-system -l app=ks-installer -o jsonpath=&amp;#39;{.items[0].metadata.name}&amp;#39;) -- kubectl delete -f /kubesphere/kubesphere/prometheus/init/ 2&amp;gt;/dev/null&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Delete the PVC that Prometheus uses.&lt;/p></description></item></channel></rss>